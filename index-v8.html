<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Sorteio Inteligente</title>

  <!-- √çcones -->
  <link rel="icon" href="LOTOF√ÅCIL.png" sizes="192x192" type="image/png">
  <link rel="icon" href="LOTOF√ÅCIL.png" sizes="512x512" type="image/png">

  <!-- Evita cache -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- Fonte futurista -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">

  <!-- Estilos visuais -->
  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

  @keyframes fadeOutSplash {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    visibility: hidden;
    transform: scale(0.95);
    display: none;
  }
}



    @keyframes fadeInMain {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .jogo-comparativo {
      animation: fadeIn 0.6s ease-in-out;
    }

    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      background-color: #000000;
      color: #ffd700;
      font-family: 'Orbitron', Arial, sans-serif;
      text-align: center;
      overflow-x: hidden;
    }

    h1 {
      font-size: 20px;
      margin-bottom: 16px;
      color: #00ffd5;
    }

    #splash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #121212;
      color: #00ffd5;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      font-size: 24px;
     animation: fadeOutSplash 0.5s ease-in-out 0.2s forwards;




    }

    #conteudo-principal {
      display: none;
      animation: fadeInMain 1s ease forwards;
    }

    #entradaTopo {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
      margin: 20px auto;
      max-width: 400px;
      text-align: center;
      font-size: 16px;
      width: 100%;
      padding: 6px;
      box-sizing: border-box;
    }

    #entrada input {
      width: 40px;
      height: 30px;
      text-align: center;
      margin: 4px;
      font-size: 14px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    #entrada input[type="text"] {
      background-color: #000000;
      color: #FFD700;
      font-weight: bold;
      font-family: 'Arial', sans-serif;
      border: 1px solid #FFD700;
      text-align: center;
    }

    input[type="number"] {
      width: 100%;
      padding: 6px;
      border-radius: 6px;
      border: none;
      background-color: #303030;
      color: #ffffff;
      font-size: 15px;
      font-weight: bold;
      box-shadow: 0 0 5px #00ffd5;
      text-align: center;
    }

    input[type="number"]:focus {
      outline: none;
      box-shadow: 0 0 8px #00ffd5;
    }

    button {
      background-color: rgba(0, 255, 213, 0.1);
      color: #00ffd5;
      border: 1px solid #00ffd5;
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: bold;
      font-size: 13px;
      cursor: pointer;
      margin: 5px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      backdrop-filter: blur(6px);
      box-shadow: 0 0 12px #00ffd5;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    button:hover {
      background-color: rgba(0, 255, 213, 0.2);
      box-shadow: 0 0 20px #00ffd5;
      transform: scale(1.05);
    }

    button:active {
      transform: scale(0.95);
      box-shadow: 0 0 10px #00ff80;
    }

    .label {
      display: inline-block;
      margin: 4px;
      padding: 5px 8px;
      border-radius: 6px;
      background-color: #2196f3;
      color: white;
      font-size: 13px;
      font-weight: bold;
      box-shadow: 0 0 4px rgba(0, 255, 213, 0.3);
    }

    .sorteado {
      background-color: #ffd700 !important;
      color: #000;
      box-shadow: 0 0 6px #ffeb3b;
    }

    .jogo-comparativo {
      margin-bottom: 10px;
      padding: 8px;
      border-radius: 8px;
      background-color: black;
      box-shadow: 0 0 6px rgba(0, 255, 213, 0.2);
    }

    #jogosGerados {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #statusImportacao {
      margin-bottom: 10px;
      color: #00ffd5;
      font-weight: bold;
      font-size: 15px;
    }

    .grupo-controle {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }

    .painel-tech {
      margin: 20px auto;
      max-width: 480px;
      padding: 10px;
      background-color: #1a1a1a;
      border-radius: 8px;
      box-shadow: 0 0 6px #00ffd5;
    }

    #barraProgressoContainer {
      margin: 10px auto;
      height: 10px;
      background: #eee;
      border-radius: 5px;
      overflow: hidden;
      width: 400px;
      box-shadow: 0 0 6px #00ffd5;
    }

    #barraProgresso {
      height: 100%;
      background: linear-gradient(to right, #00ffd5, #00aa88);
      width: 0%;
      transition: width 0.3s ease;
    }

    #cronometroRetro {
      position: absolute;
      top: 10px;
      right: 20px;
      font-family: 'Courier New', monospace;
      font-size: 16px;
      color: #00ffd5;
      background-color: #202020;
      padding: 6px 10px;
      border-radius: 8px;
      box-shadow: 0 0 8px #00ffd5;
    }
	
	#conteudo-principal {
  max-width: 100%;
  padding: 10px;
}


	
	
	
	

    @media (max-width: 400px) {
      #entradaTopo {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .grupo-jogo {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 6px;
      margin-bottom: 16px;
    }
	
	
	
	
	.painel-botoes,
.grupo-controle {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  margin: 20px auto;
  max-width: 100%;
  padding: 0 10px;
}



@media (max-width: 480px) {
  button {
    width: 100%;
    max-width: 280px;
    font-size: 14px;
  }
}



    input.input-jogo {
      width: 48px !important;
      height: 48px !important;
      font-size: 20px !important;
      font-weight: bold;
      text-align: center;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-shadow: 0 0 4px #00ffd5;
      background-color: #303030;
      color: #ffffff;
      padding: 0 !important;
      box-sizing: border-box;
    }
  </style>
</head>

<body>
  <!-- Tela de boas-vindas -->
  <div id="splash">
    <h2>Sorteio Inteligente</h2>
    <p>Bem-vindo!</p>
  </div>

  <!-- Conte√∫do principal -->
  <div id="conteudo-principal">
    <!-- T√≠tulo e Inputs fixos -->
    <h1 style="margin-top: 20px;">Digite at√© 15 n√∫meros de 1 a 25</h1>
    <div id="entradaTopo"></div>

    <!-- N√∫meros digitados como etiquetas -->
    <div id="topoNumeros"></div>

    <!-- Etiquetas de dezenas digitadas -->
    <div id="labelsTopo" style="display: flex; flex-wrap: wrap; gap: 6px; justify-content: center;"></div>

    <!-- Bot√µes principais -->
    <div class="painel-botoes">
      <button onclick="importarUltimos()">üì• Importar √öltimos Concursos</button>
      <button onclick="buscarConcursoEspecifico()">üîç Buscar Concursos</button>
      <button onclick="jogosInversosALogica()">üß™ Jogos Inversos √† L√≥gica</button>
      <button onclick="sorteioBitcoin()">üèÜ Ganhador estilo Bitcoin</button>
	  <button onclick="limparTudo()">üîÑ Novo sorteio</button>
      <button onclick="avaliarConjuntoPython()">üß† Avaliar Py</button>
    </div>

    <!-- Grupo de bot√µes secund√°rios -->
    <div class="grupo-controle">
      <button onclick="logicaGanhadorBitcoin()">üîÑ Ganhador da Bitcoin</button>
      <button onclick="verTriosMaisComuns()">üìä Ver trios mais comuns</button>
      <button onclick="prepararPromissor()">üéØ Jogos Promissores</button>
      <button onclick="gerarJogosPromissores(10)">üìà Estrat√©gias Otimizadas</button>
      <button onclick="sortearComFrequencia()">üìä Probabilidade Hist√≥rica</button>
      <button id="btnSortear">üéØ Sortear com L√≥gica</button>
    </div>

    <!-- Inputs de entrada -->
    <div id="entrada" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 6px; margin: 20px auto; max-width: 400px;">
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
      <input type="text" />
    </div>
	
	



    <!-- Painel t√©cnico e resultados -->
    <div id="entradaTopo"></div>
    <div id="resultadoBitcoin" style="margin-top: 10px;"></div>
    <div id="statusImportacao"></div>
    <div id="jogosGerados"></div>
    <div id="analiseEstatistica"></div>
    <div id="listaConcursos"></div>
    <div id="ultimoConcursoTopo"></div>
	<div id="jogosInversosContainer"></div>



    <!-- Jogos in√©ditos -->
    <div id="jogosIneditosContainer" style="margin-top: 30px;">
      <h3 style="color: #00ff88;">üü¢ Jogos 100% In√©ditos</h3>
    </div>

    <!-- Resultado final -->
    <div class="resultado" id="resultado"></div>
    <pre id="output"></pre>
  </div>
	  
	  
	  
  <!-- Script para transi√ß√£o da tela de boas-vindas -->
  <script>
    window.addEventListener("load", () => {
      setTimeout(() => {
        const splash = document.getElementById("splash");
        const principal = document.getElementById("conteudo-principal");
        if (splash) splash.style.display = "none";
        if (principal) principal.style.display = "block";
      }, 700); // um segundo

    });
  </script>
</body>


<script>
// ‚úÖ Gera os 15 inputs fixos no topo ao carregar
document.addEventListener("DOMContentLoaded", () => {
  gerarInputsFixos();
});

function gerarInputsFixos() {
  const container = document.getElementById("entradaTopo");
  container.innerHTML = "";

  for (let i = 0; i < 15; i++) {
    const input = document.createElement("input");
    input.type = "number";
    input.min = 1;
    input.max = 25;
    input.placeholder = `#${i + 1}`;
    input.id = `topo${i + 1}`;
    container.appendChild(input);
  }
}

// ‚úÖ Atualiza os n√∫meros digitados como etiquetas no topo
function atualizarTopo(numeros) {
  const labelsTopo = document.getElementById("labelsTopo");
  labelsTopo.innerHTML = "";

  numeros.forEach(num => {
    const span = document.createElement("span");
    span.className = "label";
    span.textContent = num;
    labelsTopo.appendChild(span);
  });
}

// ‚úÖ Exibe os n√∫meros sorteados na √°rea de resultado
function exibirResultado(numeros) {
  const resultadoDiv = document.getElementById("resultado");
  resultadoDiv.innerHTML = "";
  numeros.sort((a, b) => a - b).forEach(num => {
    const div = document.createElement("div");
    div.className = "label";
    div.textContent = num;
    resultadoDiv.appendChild(div);
  });
  atualizarTopo(numeros);
}

async function sortearComFrequencia() {
  try {
    const status = document.getElementById("statusProbabilidade");
    if (status) {
      status.innerText = "üîç Analisando concursos hist√≥ricos...";
      status.style.color = "#4682b4";
    }

    const res = await fetch("http://localhost/SorteioApp/lotofacil_combinacoes_convertido.json", {
      cache: "no-store"
    });

    if (!res.ok) throw new Error("‚ùå Erro ao acessar o JSON.");

    const concursos = await res.json();

    const corrigidos = {};
    for (const [num, dezenas] of Object.entries(concursos)) {
      const limpas = dezenas.map(d => parseInt(String(d).replace(/\D/g, ""), 10)).filter(n => !isNaN(n));
      if (limpas.length === 15) {
        corrigidos[num] = limpas;
      }
    }

    const frequencia = {};
    for (const dezenas of Object.values(corrigidos)) {
      dezenas.forEach(n => {
        frequencia[n] = (frequencia[n] || 0) + 1;
      });
    }

    const ordenadosPorMenor = Object.entries(frequencia)
      .sort((a, b) => a[1] - b[1])
      .map(([n]) => parseInt(n, 10));

    const ordenadosPorMaior = Object.entries(frequencia)
      .sort((a, b) => b[1] - a[1])
      .map(([n]) => parseInt(n, 10));

    const menosFrequentes = ordenadosPorMenor.slice(0, 20);
    const maisFrequentes = ordenadosPorMaior.slice(0, 20);

    const coordenadas = n => {
      const x = ((n - 1) % 5) + 1;
      const y = Math.floor((n - 1) / 5) + 1;
      return { x, y };
    };

    const gerarJogoMesclado = () => {
      const selecionadosMenos = [];
      const selecionadosMais = [];

      while (selecionadosMenos.length < 10) {
        const n = menosFrequentes[Math.floor(Math.random() * menosFrequentes.length)];
        if (!selecionadosMenos.includes(n)) selecionadosMenos.push(n);
      }

      while (selecionadosMais.length < 5) {
        const n = maisFrequentes[Math.floor(Math.random() * maisFrequentes.length)];
        if (!selecionadosMais.includes(n) && !selecionadosMenos.includes(n)) selecionadosMais.push(n);
      }

      return [...selecionadosMenos, ...selecionadosMais].sort((a, b) => a - b);
    };

    const calcularDistanciaMedia = (jogo) => {
      let somaDistancia = 0;
      for (let i = 0; i < jogo.length; i++) {
        for (let j = i + 1; j < jogo.length; j++) {
          const a = coordenadas(jogo[i]);
          const b = coordenadas(jogo[j]);
          const dx = b.x - a.x;
          const dy = b.y - a.y;
          somaDistancia += Math.sqrt(dx * dx + dy * dy);
        }
      }
      return somaDistancia / 105;
    };

    let jogoFixo = [];
    let mediaDistancia = 0;
    let tentativas = 0;

    do {
      tentativas++;
      jogoFixo = gerarJogoMesclado();
      mediaDistancia = calcularDistanciaMedia(jogoFixo);
    } while ((mediaDistancia < 4.5 || mediaDistancia > 6.5) && tentativas < 50);

    // üß© Preencher inputs fixos dinamicamente
   const entradaTopo = document.getElementById("entradaTopo");
entradaTopo.innerHTML = "";

jogoFixo.forEach((num, i) => {
  const input = document.createElement("input");
  input.type = "number";
  input.value = num;
  input.className = "input-fixo";
  input.min = 1;
  input.max = 25;
  input.style.width = "68px";
  input.style.height = "38px";
  input.style.textAlign = "center";
  input.style.fontWeight = "bold";
  input.style.fontSize = "18px";
  input.style.borderRadius = "6px";
  input.style.border = "1px solid #ccc";
  input.style.boxShadow = "0 0 4px #00ffd5";
  input.style.backgroundColor = "#222";
  input.style.color = "#00ffd5";
  input.style.marginRight = "4px";
  entradaTopo.appendChild(input);
});
    // üé® Exibir no painel lateral
    const painel = document.getElementById("painelHistorico");
    if (painel) {
      painel.innerHTML = "";

      jogoFixo.forEach((n, i) => {
        const label = document.createElement("div");
        label.textContent = `#${i + 1}: ${n}`;
        label.style.backgroundColor = "#303030";
        label.style.color = "#00ffd5";
        label.style.padding = "4px";
        label.style.margin = "2px";
        label.style.fontFamily = "'Orbitron', sans-serif";
        label.style.fontWeight = "bold";
        painel.appendChild(label);
      });

      const distLabel = document.createElement("div");
      distLabel.textContent = `üìê Dist√¢ncia m√©dia entre dezenas: ${mediaDistancia.toFixed(2)} (tentativas: ${tentativas})`;
      distLabel.style.backgroundColor = "#202020";
      distLabel.style.color = "#ffd700";
      distLabel.style.padding = "6px";
      distLabel.style.marginTop = "8px";
      distLabel.style.fontWeight = "bold";
      painel.appendChild(distLabel);
    }
	    // üìà Filtro econom√©trico inercial
    const pesoInercial = {};
    for (let i = 1; i <= 25; i++) {
      const freq = frequencia[i] || 0;
      const atraso = Object.values(corrigidos).reverse().findIndex(j => j.includes(i));
      pesoInercial[i] = (freq * 1.5) - (atraso * 0.7);
    }

    const scoreInercial = jogoFixo.reduce((soma, n) => soma + (pesoInercial[n] || 0), 0);

    const inercialLabel = document.createElement("div");
    inercialLabel.textContent = `üìà Score econom√©trico inercial: ${scoreInercial.toFixed(2)}`;
    inercialLabel.style.backgroundColor = "#202020";
    inercialLabel.style.color = "#00ffcc";
    inercialLabel.style.padding = "6px";
    inercialLabel.style.marginTop = "8px";
    inercialLabel.style.fontWeight = "bold";
    painel.appendChild(inercialLabel);

    // üé≤ Gerar e exibir 6 jogos vari√°veis
    const container = document.getElementById("jogosGerados");
    container.innerHTML = "<h3>üé≤ Jogos Vari√°veis Gerados:</h3>";

    for (let j = 0; j < 6; j++) {
      let jogo = [];
      let distancia = 0;
      let tentativas = 0;

      do {
        tentativas++;
        jogo = gerarJogoMesclado();
        distancia = calcularDistanciaMedia(jogo);
      } while ((distancia < 4.5 || distancia > 6.5) && tentativas < 50);

      const grupo = document.createElement("div");
      grupo.className = "grupo-jogo";
      grupo.style.marginBottom = "12px";

      const titulo = document.createElement("div");
      titulo.textContent = `üîπ Jogo ${j + 1} ‚Äî Dist√¢ncia: ${distancia.toFixed(2)}`;
      titulo.style.fontWeight = "bold";
      titulo.style.marginBottom = "4px";
      titulo.style.color = "#00ffd5";
      grupo.appendChild(titulo);

      jogo.forEach(num => {
        const input = document.createElement("input");
        input.type = "number";
        input.value = num;
        input.className = "input-jogo";
        input.min = 1;
        input.max = 25;
        input.style.width = "48px";
        input.style.height = "48px";
        input.style.textAlign = "center";
        input.style.fontWeight = "bold";
        input.style.fontSize = "18px";
        input.style.borderRadius = "6px";
        input.style.border = "1px solid #ccc";
        input.style.boxShadow = "0 0 4px #00ffd5";
        input.style.backgroundColor = "#303030";
        input.style.color = "#ffffff";
        input.style.marginRight = "4px";
        grupo.appendChild(input);
      });

      container.appendChild(grupo);
    }

    // ‚úÖ Finaliza com status
    if (status) {
      status.innerText = "‚úÖ Jogo fixo + 6 vari√°veis gerados com filtro inercial!";
      status.style.color = "#00ffd5";
    }

    console.log("üìä Jogo fixo:", jogoFixo);
    console.log("üìê Dist√¢ncia m√©dia:", mediaDistancia.toFixed(2));
    console.log("üìà Score inercial:", scoreInercial.toFixed(2));

  } catch (erro) {
    console.error("Erro na an√°lise hist√≥rica:", erro);
    const status = document.getElementById("statusProbabilidade");
    if (status) {
      status.innerText = "‚ùå Falha na an√°lise hist√≥rica.";
      status.style.color = "#ff6347";
    }
  }
}

async function jogosInversosALogica() {
  try {
    const container = document.getElementById("jogosInversosContainer");
    container.innerHTML = ""; // limpa apenas os jogos inversos

    const res = await fetch("lotofacil_combinacoes_convertido.json");
    const dados = await res.json();

    const jogosSalvos = Object.values(dados).map(arr =>
      arr.slice().sort((a, b) => a - b).join(",")
    );

    // üìä Frequ√™ncia hist√≥rica
    const contagem = {};
    for (let i = 1; i <= 25; i++) contagem[i] = 0;
    Object.values(dados).forEach(jogo => {
      jogo.forEach(num => contagem[num]++);
    });

    const topFrequentes = Object.entries(contagem)
      .sort((a, b) => b[1] - a[1])
      .map(([num]) => parseInt(num));

    const top5 = topFrequentes.slice(0, 5);
    const top10 = topFrequentes.slice(5, 10);

    for (let j = 0; j < 9; j++) {
      const titulo = document.createElement("div");
      titulo.textContent = `üéØ Jogo ${j + 1}:`;
      titulo.style.color = "#00ffd5";
      titulo.style.fontWeight = "bold";
      titulo.style.margin = "12px 0 6px";
      titulo.style.fontSize = "16px";
      container.appendChild(titulo);

      const jogo = [];

      const inicio = Math.floor(Math.random() * 16) + 1;
      for (let i = 0; i < 5; i++) {
        const n = inicio + i;
        if (n <= 25 && !jogo.includes(n)) jogo.push(n);
      }

      if (!jogo.includes(1)) jogo.push(1);
      if (!jogo.includes(25)) jogo.push(25);

      let candidato = 1;
      while (jogo.length < 13) {
        if (candidato % 2 !== 0 && !jogo.includes(candidato)) {
          jogo.push(candidato);
        }
        candidato++;
      }

      const raras = [11, 18, 22, 13, 2];
      for (let r of raras) {
        if (jogo.length < 15 && !jogo.includes(r)) {
          jogo.push(r);
        }
      }

      const final = jogo.slice(0, 15).sort((a, b) => a - b);
      const jogoString = final.join(",");
      const existeNoJson = jogosSalvos.includes(jogoString);

      const linha = document.createElement("div");
      linha.style.display = "flex";
      linha.style.flexWrap = "wrap";
      linha.style.gap = "6px";
      linha.style.marginBottom = "10px";

      final.forEach(dezena => {
        const span = document.createElement("span");
        span.textContent = String(dezena).padStart(2, '0');
        span.style.fontWeight = "bold";
        span.style.textAlign = "center";
        span.style.width = "48px";
        span.style.height = "48px";
        span.style.lineHeight = "48px";
        span.style.fontSize = "18px";
        span.style.borderRadius = "6px";
        span.style.display = "inline-block";
        span.style.boxShadow = "0 0 4px #888";
        span.style.marginRight = "4px";

        // üé® Cores por frequ√™ncia
        if (top5.includes(dezena)) {
          span.style.backgroundColor = "#ff4d4d"; // vermelho
          span.style.color = "#fff";
        } else if (top10.includes(dezena)) {
          span.style.backgroundColor = "#ffa500"; // laranja
          span.style.color = "#fff";
        } else {
          span.style.backgroundColor = "#333"; // preto/cinza
          span.style.color = "#fff";
        }

        linha.appendChild(span);
      });

      container.appendChild(linha);

      // üìÅ Status do jogo
      const status = document.createElement("div");
      status.innerHTML = existeNoJson
        ? "<span style='color:green;'>‚úÖ J√° existe no hist√≥rico</span>"
        : "<span style='color:red;'>üÜï In√©dito</span>";
      status.style.marginBottom = "6px";
      container.appendChild(status);
    }

    // üé® Legenda explicativa (uma vez s√≥)
    const legenda = document.createElement("div");
    legenda.style.fontSize = "13px";
    legenda.style.marginTop = "20px";
    legenda.innerHTML = `
      <strong>üé® Legenda de cores:</strong><br>
      üî¥ <span style="color:red; font-weight:bold;">Vermelho</span>: n√∫meros mais frequentemente sorteados (top 5)<br>
      üü† <span style="color:orange; font-weight:bold;">Laranja</span>: n√∫meros medianamente sorteados (top 6‚Äì10)<br>
      ‚ö´Ô∏è <span style="color:#333; font-weight:bold;">Preto</span>: n√∫meros menos sorteados (fora do top 10)
    `;
    container.appendChild(legenda);

    atualizarStatus("‚úÖ 9 jogos gerados com destaque por frequ√™ncia!", "#00ffd5");
  } catch (error) {
    console.error("Erro ao carregar ou processar o JSON:", error);
    alert("‚ùå Falha ao gerar os jogos. Verifique o caminho do JSON ou o formato dos dados.");
  }
}
	
// ‚úÖ Preenche os inputs fixos com um array de 15 n√∫meros, mantendo a ordem original
function preencherInputs(numeros) {
  const inputs = document.querySelectorAll("#entradaTopo input");

  // Garante que o array seja v√°lido e preserve a ordem
  const conjuntoCorrigido = Array.isArray(numeros) ? numeros.slice(0, 15) : [];

  // Preenche os inputs na ordem exata recebida
  for (let i = 0; i < inputs.length; i++) {
    const valor = conjuntoCorrigido[i];
    inputs[i].value = Number.isInteger(valor) && valor >= 1 && valor <= 25 ? valor : "";
  }

  // Atualiza o topo visual com os n√∫meros originais
  atualizarTopo(conjuntoCorrigido);
}
function gerarJogoPromissor(historicoConcursos) {
  const frequencia = {};
  const triosRepetidos = new Set();
  const dezenasRecentes = new Set();

  // üîÅ Calcula frequ√™ncia de cada dezena
  Object.values(historicoConcursos).forEach(dezenas => {
    dezenas.forEach(n => {
      frequencia[n] = (frequencia[n] || 0) + 1;
    });

    // üîó Extrai trios recorrentes
    for (let i = 0; i < dezenas.length - 2; i++) {
      const trio = [dezenas[i], dezenas[i + 1], dezenas[i + 2]].sort((a, b) => a - b).join("-");
      triosRepetidos.add(trio);
    }
  });

  // üîç Define dezenas frias (menos frequentes)
  const todasDezenas = Array.from({ length: 25 }, (_, i) => i + 1);
  const frias = todasDezenas
    .filter(n => !frequencia[n] || frequencia[n] < 5); // ajuste o limiar conforme necess√°rio

  // üß† Define dezenas quentes (mais frequentes)
  const quentes = todasDezenas
    .filter(n => frequencia[n] >= 10) // ajuste o limiar conforme necess√°rio
    .sort((a, b) => frequencia[b] - frequencia[a]);

  // üìä Distribui√ß√£o por faixa
  const faixaBaixa = todasDezenas.filter(n => n >= 1 && n <= 8 && !frias.includes(n));
  const faixaMedia = todasDezenas.filter(n => n >= 9 && n <= 17 && !frias.includes(n));
  const faixaAlta = todasDezenas.filter(n => n >= 18 && n <= 25 && !frias.includes(n));

  // üî¢ Seleciona 5 de cada faixa
  const jogo = [];

  function sortearDezenas(faixa, qtd) {
    const selecionadas = [];
    const candidatos = faixa.slice();
    while (selecionadas.length < qtd && candidatos.length > 0) {
      const idx = Math.floor(Math.random() * candidatos.length);
      selecionadas.push(candidatos.splice(idx, 1)[0]);
    }
    return selecionadas;
  }

  jogo.push(...sortearDezenas(faixaBaixa, 5));
  jogo.push(...sortearDezenas(faixaMedia, 5));
  jogo.push(...sortearDezenas(faixaAlta, 5));

  // üîó Tenta incluir um trio recorrente
  const trioArray = Array.from(triosRepetidos);
  if (trioArray.length > 0) {
    const trio = trioArray[Math.floor(Math.random() * trioArray.length)]
      .split("-")
      .map(n => parseInt(n, 10));

    trio.forEach(n => {
      if (!jogo.includes(n) && jogo.length < 15) jogo.push(n);
    });
  }

  // üîÅ Completa at√© 15 dezenas se necess√°rio
  while (jogo.length < 15) {
    const candidatos = quentes.filter(n => !jogo.includes(n));
    const n = candidatos[Math.floor(Math.random() * candidatos.length)];
    if (n) jogo.push(n);
  }

  return jogo.slice(0, 15).sort((a, b) => a - b);
}

// ‚úÖ Busca os trios mais comuns via PHP
async function verTriosMaisComuns() {
  const resultado = document.getElementById("resultadoBitcoin");
  if (!resultado) return;

  atualizarStatus("üîç Buscando trios mais comuns...", "#4682b4");

  try {
    const res = await fetch("trios_comuns.php", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ acao: "buscar_trios" }) // pode ser vazio, mas ajuda a validar
    });

    if (!res.ok) {
      throw new Error(`HTTP ${res.status}`);
    }

    const dados = await res.json();

    if (dados.erro) {
      atualizarStatus("‚ö†Ô∏è Erro do servidor.", "#ff9900");
      resultado.innerHTML = `<p style="color: orange;">‚ö†Ô∏è ${dados.erro}</p>`;
      return;
    }

    if (!Array.isArray(dados.trios_comuns) || dados.trios_comuns.length === 0) {
      atualizarStatus("‚ö†Ô∏è Nenhum trio encontrado.", "#ff9900");
      resultado.innerHTML = `<p style="color: orange;">‚ö†Ô∏è Nenhum trio encontrado com os crit√©rios atuais.</p>`;
      return;
    }

    const trios = dados.trios_comuns.slice(0, 30);
    let html = `<strong>üìä Trios mais comuns:</strong><br><ul style="list-style:none; padding-left:0;">`;

    trios.forEach((item, index) => {
      const trioStr = Array.isArray(item.trio) ? item.trio.join(" - ") : "Trio inv√°lido";
      const ocorrencias = item.ocorrencias ?? "‚Äî";
      const porcentagem = item.porcentagem ?? "‚Äî";
      html += `<li>üî¢ <strong>${trioStr}</strong> ‚Äî ${ocorrencias}x (${porcentagem}%)</li>`;
      if ((index + 1) % 3 === 0) html += `<hr>`;
    });

    html += `</ul>`;
    resultado.innerHTML = html;
    atualizarStatus("‚úÖ Trios mais comuns carregados!", "#00ffd5");

  } catch (err) {
    console.error("Erro ao buscar trios:", err);
    atualizarStatus("‚ùå Falha ao buscar trios.", "#ff6347");
    resultado.innerHTML = `<p style="color: red;">‚ö†Ô∏è N√£o foi poss√≠vel carregar os trios. Verifique o servidor.</p>`;
  }
}

 function limparTudo() {
  // üîÑ Limpa todos os inputs num√©ricos da p√°gina
  const inputsNumericos = document.querySelectorAll('input[type="number"]');
  inputsNumericos.forEach(input => {
    input.value = "";
    input.style.backgroundColor = "";
    input.style.color = "";
    input.style.fontWeight = "";
    input.style.fontFamily = "";
    input.classList.remove("highlight", "error");
  });

  // üîÑ Limpa todos os inputs de texto dentro da div #entrada
  const inputsTexto = document.querySelectorAll('#entrada input[type="text"]');
  inputsTexto.forEach(input => {
    input.value = "";
    input.style.backgroundColor = "";
    input.style.color = "";
    input.style.fontWeight = "";
    input.style.fontFamily = "";
    input.classList.remove("highlight", "error");
  });

  // üßπ Limpa etiquetas de n√∫meros digitados
  const labelsTopo = document.getElementById("labelsTopo");
  if (labelsTopo) labelsTopo.innerHTML = "";

  // üßπ Limpa resultado final
  const resultado = document.getElementById("resultado");
  if (resultado) resultado.innerHTML = "";

  // üßπ Limpa campo de sa√≠da
  const output = document.getElementById("output");
  if (output) output.textContent = "";

  // üßπ Limpa status
  atualizarStatus("üßπ Interface limpa com sucesso!", "#00ffd5");

  // üßπ Limpa painel de Bitcoin (se existir)
  const resultadoBitcoin = document.getElementById("resultadoBitcoin");
  if (resultadoBitcoin) resultadoBitcoin.innerHTML = "";

  // üßπ Limpa painel do √∫ltimo concurso
  const topo = document.getElementById("ultimoConcursoTopo");
  if (topo) topo.innerHTML = "";

  // üßπ Limpa vari√°veis globais
  window.jogoFixo = [];
  window.maisFrequentes = [];
  window.previstosEconometricamente = [];

  // üßπ Limpa jogos gerados
  const container = document.getElementById("jogosGerados");
  if (container) container.innerHTML = "";

  // üßπ Limpa an√°lise estat√≠stica
  const analise = document.getElementById("analiseEstatistica");
  if (analise) analise.innerHTML = "";

  // üßπ Limpa lista de concursos
  const lista = document.getElementById("listaConcursos");
  if (lista) lista.innerHTML = "";

  // üßπ Limpa barra de progresso
  const barra = document.getElementById("barraProgresso");
  if (barra) {
    barra.style.transition = "width 0.3s ease";
    barra.style.width = "0%";
  }

  // üßπ Limpa qualquer outro painel de concursos (se existir)
  const painelConcursos = document.getElementById("painelConcursos");
  if (painelConcursos) painelConcursos.innerHTML = "";

  // üßπ Limpa hist√≥rico de concursos (se armazenado localmente)
  localStorage.removeItem("ultimosConcursos");

  // üßπ Limpa tabela de concursos (se existir)
  const tabela = document.querySelector("#tabelaConcursos tbody");
  if (tabela) tabela.innerHTML = "";

  // üßπ Limpa alertas ou mensagens extras
  const alertas = document.getElementById("alertas");
  if (alertas) alertas.innerHTML = "";

  // üßπ Limpa os jogos inversos √† l√≥gica
  const jogosInversos = document.getElementById("jogosInversosContainer");
  if (jogosInversos) jogosInversos.innerHTML = "";
}
 function avaliarConjuntoPython() {
  const inputs = document.querySelectorAll('#entradaTopo input');
  const numeros = [];

  // Coleta os valores na ordem exata dos inputs
  inputs.forEach(input => {
    let valor = parseInt(input.value);
    if (isNaN(valor)) {
      const limpo = input.value.replace(/\D/g, '');
      valor = parseInt(limpo);
    }

    // Mant√©m a posi√ß√£o original, mesmo que o valor seja inv√°lido
    numeros.push(Number.isInteger(valor) && valor >= 1 && valor <= 25 ? valor : null);
  });

  // Remove apenas os nulos, sem alterar a ordem
  const conjuntoCorrigido = numeros.filter(n => n !== null);

  // Valida√ß√£o: precisa ter exatamente 15 n√∫meros v√°lidos
  if (conjuntoCorrigido.length !== 15) {
    atualizarStatus(`‚ö†Ô∏è Conjunto inv√°lido: ${conjuntoCorrigido.length}/15 n√∫meros √∫nicos v√°lidos.`, "#ff9900");
    return;
  }

  // Atualiza o topo visual com o conjunto original
  atualizarTopo(conjuntoCorrigido);

  // Prepara o payload para envio ao backend
  const payload = "numeros=" + encodeURIComponent(JSON.stringify(conjuntoCorrigido));

  fetch("avaliar_conjunto.php", {
    method: "POST",
    headers: {
      "Content-Type": "application/x-www-form-urlencoded"
    },
    body: payload
  })
    .then(res => res.text())
    .then(texto => {
      try {
        const dados = JSON.parse(texto);
        if (dados.erro) {
          atualizarStatus(`‚ùå Erro: ${dados.erro}`, "#ff6347");
          return;
        }

        const resultado = document.getElementById("resultadoBitcoin");
        if (!resultado || !dados.avaliacao) return;

        const av = dados.avaliacao;
        let html = `
          <strong>üìä Avalia√ß√£o Python:</strong><br>
          <ul style="list-style:none; padding-left:0;">
            <li>üßÆ Nota: <strong>${av.nota}</strong></li>
            <li>üéØ Chance de 15 acertos: <strong>${av.chance_15}%</strong></li>
            <li>üéØ Chance de 14 acertos: <strong>${av.chance_14}%</strong></li>
            <li>üèÜ Concursos com 15 acertos: <strong>${av.concursos_iguais}</strong></li>
            <li>üèÖ Concursos com 14 acertos: <strong>${av.concursos_parciais}</strong></li>
            <li>üîç Trios comuns detectados: <strong>${av.sequencias_comuns.length}</strong></li>
          </ul>
        `;

        if (av.alertas?.length) {
          html += `<p><strong>üì¢ Alertas:</strong><br>${av.alertas.join("<br>")}</p>`;
        }

        // ‚ûï Soma total
        if (dados.soma_total !== undefined) {
          html += `<p>‚ûï Soma total: <strong>${dados.soma_total}</strong></p>`;
        }

        // ‚öñÔ∏è Pares e √≠mpares
        if (dados.pares_impares) {
          html += `<p>‚öñÔ∏è Pares: <strong>${dados.pares_impares.pares}</strong> | √çmpares: <strong>${dados.pares_impares.impares}</strong></p>`;
        }

        // üß© Distribui√ß√£o por linha e coluna
        if (dados.distribuicao) {
          const linhas = Object.entries(dados.distribuicao.linhas).map(([l, q]) => `L${l}: ${q}`).join(" | ");
          const colunas = Object.entries(dados.distribuicao.colunas).map(([c, q]) => `C${c}: ${q}`).join(" | ");
          html += `<p>üß© Distribui√ß√£o:<br><strong>${linhas}</strong><br><strong>${colunas}</strong></p>`;
        }

        // üé∞ Sugest√µes de jogos
        if (dados.sugestoes?.length) {
          html += `<p>üé∞ Sugest√µes de jogos:</p><ul>`;
          dados.sugestoes.forEach((jogo, i) => {
            html += `<li>Jogo ${i + 1}: <strong>${jogo.join(", ")}</strong></li>`;
          });
          html += `</ul>`;
        }

        resultado.innerHTML = html;
        atualizarStatus("‚úÖ Avalia√ß√£o conclu√≠da com sucesso!", "#00ffd5");
      } catch (e) {
        console.error("‚ùå JSON inv√°lido:", e);
        atualizarStatus("‚ö†Ô∏è Retorno inv√°lido do servidor.", "#ff9900");
      }
    })
    .catch(err => {
      console.error("‚ùå Erro na requisi√ß√£o:", err);
      atualizarStatus("‚ö†Ô∏è Falha ao conectar com o servidor.", "#ff6347");
    });
}


  // ‚úÖ Limpa toda a interface visual e dados
  function limparInterfaceCompleta() {
    const campos = [
      "resultadoBitcoin", "jogosGerados", "analiseEstatistica",
      "statusImportacao", "labelsTopo", "ultimoConcursoTopo", "infoUltimoConcurso",
      "tabelaTrios", "listaConcursos", "resultado", "output"
    ];
    campos.forEach(id => {
      const el = document.getElementById(id);
      if (el) el.innerHTML = "";
    });

    const concursoInput = document.getElementById("numeroConcurso");
    if (concursoInput) concursoInput.value = "";

    document.querySelectorAll("input").forEach(input => {
      input.value = "";
      input.style.backgroundColor = "";
      input.style.color = "";
      input.style.fontWeight = "";
      input.style.fontFamily = "";
    });

    window.jogoFixo = [];
    atualizarStatus("üßπ Interface limpa com sucesso!", "#00ffd5");
  }
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const botao = document.getElementById("btnSortear");
  if (botao) {
    botao.addEventListener("click", sortearComLogica);
  }
});

async function sortearComLogica() {
  try {
    const res = await fetch("lotofacil_combinacoes_convertido.json");
    const dados = await res.json();

    const chaves = Object.keys(dados).map(k => parseInt(k)).sort((a, b) => a - b);
    const ultimaChave = chaves[chaves.length - 1].toString();
    const concursoReferencia = dados[ultimaChave];
    const jogosOrdenados = Object.entries(dados).sort((a, b) => parseInt(a[0]) - parseInt(b[0]));

    if (!Array.isArray(jogosOrdenados) || jogosOrdenados.length === 0) {
      atualizarStatus("‚ùå Nenhum jogo encontrado no JSON local.", "#ff0000");
      return;
    }

    const container = document.getElementById("jogosGerados");
    container.innerHTML = "";

    const estatisticas = {};
    for (let i = 1; i <= 25; i++) {
      estatisticas[i] = { freq: 0, freqRecente: 0, atraso: 0, simulado: 0 };
    }

    const totalJogos = jogosOrdenados.length;
    const recentes = jogosOrdenados.slice(-50);

    jogosOrdenados.forEach(([_, jogo], index) => {
      jogo.forEach(num => {
        estatisticas[num].freq++;
        estatisticas[num].atraso = totalJogos - index;
      });
    });

    recentes.forEach(([_, jogo]) => {
      jogo.forEach(num => {
        estatisticas[num].freqRecente++;
      });
    });

    const simulados = [];
    for (let s = 0; s < 1000; s++) {
      const jogoSimulado = [];
      let score = 0;

      while (jogoSimulado.length < 15) {
        const n = Math.floor(Math.random() * 25) + 1;
        const e = estatisticas[n];
        const peso = e.freq * 1.2 + e.freqRecente * 2 - e.atraso * 0.5;
        if (Math.random() < peso / 100 && !jogoSimulado.includes(n)) {
          jogoSimulado.push(n);
          estatisticas[n].simulado++;
          score += peso;
        }
      }

      simulados.push({ jogo: jogoSimulado, score });
    }

    const top9Simulados = simulados.sort((a, b) => b.score - a.score).slice(0, 9);

    top9Simulados.forEach((item, i) => {
      const grupo = document.createElement("div");
      grupo.className = "grupo-jogo";
      grupo.style.marginBottom = "12px";

      const titulo = document.createElement("div");
      titulo.textContent = `üîÆ Simulado ${i + 1} ‚Äî Score: ${item.score.toFixed(2)}`;
      titulo.style.fontWeight = "bold";
      titulo.style.marginBottom = "4px";
      titulo.style.color = "#00ffcc";
      titulo.style.textShadow = "0 0 6px #00ffd5";
      grupo.appendChild(titulo);

      item.jogo.sort((a, b) => a - b).forEach(num => {
        const span = document.createElement("span");
        span.textContent = String(num).padStart(2, '0');
        span.style.display = "inline-block";
        span.style.width = "48px";
        span.style.height = "48px";
        span.style.lineHeight = "48px";
        span.style.textAlign = "center";
        span.style.fontWeight = "bold";
        span.style.fontSize = "18px";
        span.style.borderRadius = "6px";
        span.style.marginRight = "4px";
        span.style.boxShadow = "0 0 4px #ffd700";
        span.style.backgroundColor = concursoReferencia.includes(num) ? "#ffff66" : "#202020";
        span.style.color = concursoReferencia.includes(num) ? "#000000" : "#ffffff";
        grupo.appendChild(span);
      });

      container.appendChild(grupo);
    });

    // üß† Avalia√ß√£o dos jogos reais
    let melhorJogoChave = "";
    let maiorAcerto = 0;
    let totalAcima12 = 0;
    const destaques = [];

    jogosOrdenados.forEach(([chave, jogo]) => {
      let score = 0, soma = 0, acertos = 0;
      let quadrantes = [0, 0, 0, 0];
      let seq = 1, penalidadeSeq = 0;

      const ordenado = [...jogo].sort((a, b) => a - b);
      for (let i = 1; i < ordenado.length; i++) {
        if (ordenado[i] === ordenado[i - 1] + 1) {
          seq++;
          if (seq >= 5) penalidadeSeq = 5;
        } else {
          seq = 1;
        }
      }

      jogo.forEach(n => {
        const e = estatisticas[n];
        score += e.freq * 1.2 + e.freqRecente * 2 + e.simulado * 1.5 - e.atraso * 0.5;
        soma += n;
        if (n <= 6) quadrantes[0]++;
        else if (n <= 12) quadrantes[1]++;
        else if (n <= 18) quadrantes[2]++;
        else quadrantes[3]++;
        if (concursoReferencia.includes(n)) acertos++;
      });

      const penalidadeSoma = (soma < 180 || soma > 210) ? 3 : 0;
      const penalidadeQuadrantes = quadrantes.filter(q => q < 2).length >= 2 ? 3 : 0;
      const relevancia = score - penalidadeSeq - penalidadeSoma - penalidadeQuadrantes;

      const grupo = document.createElement("div");
      grupo.className = "grupo-jogo";
      grupo.style.marginBottom = "12px";

      const titulo = document.createElement("div");
      titulo.textContent = `Jogo ${chave} ‚Äî ${acertos} acertos ‚Äî Relev√¢ncia: ${relevancia.toFixed(2)}`;
      titulo.style.fontWeight = "bold";
      titulo.style.marginBottom = "4px";
      titulo.style.color = acertos >= 12 ? "#ffeb3b" : "#ffffff";
      titulo.style.textShadow = acertos >= 12 ? "0 0 6px #ffff66" : "none";
      grupo.appendChild(titulo);

      ordenado.forEach(num => {
        const span = document.createElement("span");
        span.textContent = String(num).padStart(2, '0');
        span.style.display = "inline-block";
        span.style.width = "48px";
        span.style.height = "48px";
        span.style.lineHeight = "48px";
        span.style.textAlign = "center";
        span.style.fontWeight = "bold";
        span.style.fontSize = "18px";
        span.style.borderRadius = "6px";
        span.style.marginRight = "4px";
        span.style.boxShadow = "0 0 4px #00ffd5";
        span.style.backgroundColor = concursoReferencia.includes(num) ? "#ffff66" : "#303030";
        span.style.color = concursoReferencia.includes(num) ? "#000000" : "#ffffff";
        grupo.appendChild(span);
      });

      if (acertos > maiorAcerto) {
        maiorAcerto = acertos;
        melhorJogoChave = chave;
      }

      if (chave !== ultimaChave && acertos >= 13) {
        totalAcima12++;
        destaques.push(grupo);
      } else {
        container.appendChild(grupo);
      }
    });

    // üü® Exibe os destaques no topo
    if (destaques.length > 0) {
      const tituloDestaque = document.createElement("div");
      tituloDestaque.textContent = `üåü Esses concursos anteriores acertaram entre 12 e 15 n√∫meros do concurso ${ultimaChave}:`;
      tituloDestaque.style.fontWeight = "bold";
      tituloDestaque.style.color = "#ffeb3b";
      tituloDestaque.style.marginBottom = "12px";
      container.prepend(tituloDestaque);

      destaques.reverse().forEach(grupo => {
        container.prepend(grupo);
      });
    }

    // ‚úÖ Mensagem final
    atualizarStatus(`üîç Jogo ${melhorJogoChave} teve ${maiorAcerto} acertos com base no concurso ${ultimaChave}!`, "#00ff80");

    // üìä Resumo adicional
    const resumo = document.createElement("div");
    resumo.textContent = `üìä ${totalAcima12} concursos anteriores tiveram entre 12 e 15 acertos com rela√ß√£o ao concurso ${ultimaChave}.`;
    resumo.style.fontWeight = "bold";
    resumo.style.color = "#00bfff";
    resumo.style.marginTop = "16px";
    container.appendChild(resumo);

    } catch (erro) {
    console.error("‚ùå Erro ao acessar o arquivo JSON:", erro);
    atualizarStatus("‚ùå Falha ao acessar lotofacil_combinacoes_convertido.json. Verifique se o formato est√° correto.", "#ff6347");
  }
}

function atualizarStatus(texto, cor) {
  const status = document.getElementById("statusImportacao");
  if (status) {
    status.innerText = texto;
    status.style.color = cor;
  }
}
</script>
	
	
<script>
  async function gerarBloco() {
  for (let i = 0; i < JOGOS_POR_BLOCO; i++) {
    const jogo = gerarJogoAleatorio();
    const acertos = jogo.filter(n => window.jogoFixo.includes(n)).length;
    const frequentesNoJogo = jogo.filter(n => window.maisFrequentes.includes(n)).length;
    const previstosNoJogo = jogo.filter(n => window.previstosEconometricamente.includes(n)).length;

    const progressoTotal = blocoAtual * JOGOS_POR_BLOCO + i;
    const progressoPercentual = (progressoTotal / TOTAL_JOGOS) * 100;
    atualizarBarra(progressoPercentual);

    if (acertos >= 12 || (frequentesNoJogo >= 8 && previstosNoJogo >= 6)) {
      const div = document.createElement("div");
      div.className = "jogo-comparativo";

      const grupo = document.createElement("div");
      grupo.style.display = "flex";
      grupo.style.flexWrap = "wrap";
      grupo.style.gap = "4px";

      jogo.forEach(num => {
        const el = document.createElement("div");
        el.className = "label";
        el.textContent = num;
        if (window.jogoFixo.includes(num)) {
          el.classList.add("sorteado");
        }
        grupo.appendChild(el);
      });

      const status = await verificarRepeticaoHistorica(jogo);
      const contador = document.createElement("div");
      const origem = acertos >= 12 ? "üéØ por acertos" : "üìà por tend√™ncia";
      contador.textContent = `Acertos: ${acertos} ${origem} ${status}`;
      contador.style.marginTop = "8px";
      contador.style.fontWeight = "bold";
      div.appendChild(grupo);
      div.appendChild(contador);

      if (status.includes("üü¢")) {
        document.getElementById("jogosIneditosContainer").appendChild(div);
      } else {
        document.getElementById("jogosGerados").appendChild(div);
      }

      jogosComAcertos++;
    }
  }

  blocoAtual++;

  if (blocoAtual < BLOCOS) {
    setTimeout(() => gerarBloco(), 50);
  } else {
    pararCronometro();
    finalizarBarra();

    atualizarStatus(
      jogosComAcertos === 0
        ? "üîÅ Nenhum jogo relevante encontrado."
        : `üìä Foram encontrados ${jogosComAcertos} jogos com alto potencial!`,
      jogosComAcertos === 0 ? "#ff4500" : "#228B22"
    );
  }
}

  function sortearAleatorios(array, quantidade) {
    const embaralhado = [...array];
    for (let i = embaralhado.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [embaralhado[i], embaralhado[j]] = [embaralhado[j], embaralhado[i]];
    }
    return embaralhado.slice(0, quantidade);
  }

  function carregarCombinacoesReais() {
    atualizarStatus("‚ö†Ô∏è Fun√ß√£o 'carregarCombinacoesReais' ainda n√£o implementada.", "#ff9900");
  }

  async function prepararPromissor() {
    try {
      const response = await fetch("https://loteriascaixa-api.herokuapp.com/api/lotofacil");
      if (!response.ok) throw new Error("API indispon√≠vel");

      const concursos = await response.json();
      if (!Array.isArray(concursos) || concursos.length === 0) {
        throw new Error("Hist√≥rico vazio ou inv√°lido");
      }

      const frequencia = Array(26).fill(0);
      concursos.forEach(concurso => {
        if (Array.isArray(concurso.dezenas)) {
          concurso.dezenas.forEach(numStr => {
            const numero = parseInt(numStr, 10);
            if (!isNaN(numero) && numero >= 1 && numero <= 25) {
              frequencia[numero]++;
            }
          });
        }
      });

      const numerosComFrequencia = [];
      for (let i = 1; i <= 25; i++) {
        numerosComFrequencia.push({ numero: i, freq: frequencia[i] });
      }

      numerosComFrequencia.sort((a, b) => a.freq - b.freq);

      const menosFrequentes = numerosComFrequencia.slice(0, 18).map(n => n.numero);
      const maisFrequentes = numerosComFrequencia.slice(-7).map(n => n.numero);

      const selecionados = [
        ...sortearAleatorios(menosFrequentes, 11),
        ...sortearAleatorios(maisFrequentes, 4)
      ];

      const promissor = selecionados.sort((a, b) => a - b);

      window.jogoFixo = promissor;
      preencherInputs(promissor);
      exibirResultado(promissor);

      const inputsTopo = document.querySelectorAll('#entrada input');
      promissor.forEach((numero, index) => {
        if (inputsTopo[index]) {
          inputsTopo[index].value = String(numero).padStart(2, '0');
          inputsTopo[index].style.backgroundColor =
            maisFrequentes.includes(numero)
              ? "#ffd700"
              : menosFrequentes.includes(numero)
                ? "#87cefa"
                : "#90ee90";

          inputsTopo[index].style.fontWeight = "bold";
          inputsTopo[index].style.fontFamily = "'Orbitron', Arial, sans-serif";
          inputsTopo[index].style.color = "#000";
        }
      });

      atualizarStatus("üéØ Jogo promissor pronto!", "#00ffd5");
    } catch (error) {
      console.error("‚ùå Erro ao preparar jogo promissor:", error);
      atualizarStatus("‚ùå Erro ao gerar jogo promissor.", "#ff0000");
    }
  }
</script>

<script>
  function temSequenciaLonga(jogo) {
    const ordenado = [...jogo].sort((a, b) => a - b);
    let count = 1;
    for (let i = 1; i < ordenado.length; i++) {
      if (ordenado[i] === ordenado[i - 1] + 1) {
        count++;
        if (count >= 4) return true;
      } else {
        count = 1;
      }
    }
    return false;
  }

  function distribuicaoLinhaColuna(jogo) {
    const linhas = [[], [], [], [], []];
    const colunas = [[], [], [], [], []];
    jogo.forEach(n => {
      const linha = Math.floor((n - 1) / 5);
      const coluna = (n - 1) % 5;
      linhas[linha].push(n);
      colunas[coluna].push(n);
    });
    return {
      linhasOK: linhas.filter(l => l.length >= 2 && l.length <= 4).length >= 3,
      colunasOK: colunas.filter(c => c.length >= 2 && c.length <= 4).length >= 3
    };
  }

  function analisarJogo(jogo) {
    const molduraBase = [1, 2, 3, 4, 5, 6, 10, 15, 20, 21, 22, 23, 24, 25];
    const moldura = molduraBase.filter(() => Math.random() > 0.3);
    const numerosMoldura = jogo.filter(n => moldura.includes(n)).length;
    const pares = jogo.filter(n => n % 2 === 0).length;
    const soma = jogo.reduce((a, b) => a + b, 0);
    return { moldura: numerosMoldura, pares, soma };
  }
  
  
async function buscarConcursoEspecifico() {
  const numero = prompt("Digite o n√∫mero do concurso que deseja buscar:");
  const concursoInt = parseInt(numero);

  if (!numero || isNaN(concursoInt) || concursoInt < 1) {
    alert("‚ö†Ô∏è N√∫mero de concurso inv√°lido.");
    return;
  }

  const concursoStr = String(concursoInt);

  try {
    // 1Ô∏è‚É£ Tenta buscar no JSON local
    const resJson = await fetch("lotofacil_combinacoes_convertido.json", { cache: "no-store" });
    const concursos = await resJson.json();
    let dezenas = concursos[concursoStr];

    // 2Ô∏è‚É£ Se n√£o encontrar ou estiver incompleto, chama o PHP
    if (!Array.isArray(dezenas) || dezenas.length !== 15) {
      const resPhp = await fetch(`lotofacil.php?concurso=${concursoStr}`);
      const dados = await resPhp.json();

      if (dados.error || !Array.isArray(dados.dezenas) || dados.dezenas.length !== 15) {
        alert(`‚ùå Concurso ${concursoStr} n√£o encontrado ou incompleto na API.`);
        return;
      }

      dezenas = dados.dezenas;
    }

    // 3Ô∏è‚É£ Preenche os inputs do topo com estilo visual
    const inputsTopo = document.querySelectorAll('#entradaTopo input');
    dezenas.forEach((num, index) => {
      if (inputsTopo[index]) {
        inputsTopo[index].value = String(num).padStart(2, '0');
        inputsTopo[index].style.backgroundColor = "#f0f8ff";
        inputsTopo[index].style.fontWeight = "bold";
        inputsTopo[index].style.fontFamily = "'Orbitron', Arial, sans-serif";
        inputsTopo[index].style.color = "#000";
        inputsTopo[index].style.textAlign = "center";
      }
    });

    // 4Ô∏è‚É£ Exibe alerta formatado
    const formatadas = dezenas.map(n => String(n).padStart(2, '0'));
    alert(`‚úÖ Concurso ${concursoStr} carregado:\n${formatadas.join(" - ")}`);
  } catch (error) {
    alert("‚ùå Erro ao buscar o concurso.");
    console.error("Erro ao buscar concurso espec√≠fico:", error);
  }
}

async function logicaGanhadorBitcoin() {
  try {
    console.log("üöÄ Fun√ß√£o logicaGanhadorBitcoin foi chamada");

    const resultado = document.getElementById("resultadoBitcoin");
    const status = document.getElementById("statusImportacao");
    const inputs = document.querySelectorAll("#entrada input");

    if (!resultado || !status || inputs.length === 0) {
      console.warn("‚ö†Ô∏è Elementos essenciais n√£o encontrados.");
      return;
    }

    resultado.innerHTML = "";
    status.innerText = "";
    inputs.forEach(input => {
      input.value = "";
      input.style.backgroundColor = "";
      input.style.color = "";
    });

    atualizarStatus("üîÑ Buscando concursos...", "#4682b4");

    let concursosAPI = {};
    let concursosJSON = {};

    try {
      const resAPI = await fetch("https://loteriascaixa-api.herokuapp.com/api/lotofacil");
      if (resAPI.ok) {
        concursosAPI = await resAPI.json();
        console.log("‚úÖ API carregada:", Object.keys(concursosAPI).length);
      } else {
        console.warn("‚ö†Ô∏è API indispon√≠vel");
      }
    } catch (e) {
      console.warn("‚ö†Ô∏è Erro ao acessar API:", e);
    }

    try {
      const resJSON = await fetch("entrada.json");
      if (resJSON.ok) {
        concursosJSON = await resJSON.json();
        console.log("‚úÖ JSON local carregado:", Object.keys(concursosJSON).length);
      } else {
        console.warn("‚ö†Ô∏è JSON local n√£o encontrado");
      }
    } catch (e) {
      console.warn("‚ö†Ô∏è Erro ao acessar JSON local:", e);
    }

    const concursosUnificados = { ...concursosJSON, ...concursosAPI };

    const todasDezenas = Object.values(concursosUnificados)
      .map(lista => {
        if (Array.isArray(lista)) {
          return lista
            .map(n => {
              if (typeof n === "string") n = n.replace(/[^\d]/g, "");
              return parseInt(n, 10);
            })
            .filter(n => !isNaN(n) && n >= 1 && n <= 25);
        }
        return [];
      })
      .filter(arr => arr.length === 15);

    if (todasDezenas.length === 0) {
      throw new Error("Nenhum concurso v√°lido encontrado.");
    }

    const frequencia = Array(26).fill(0);
    const trioContador = {};

    todasDezenas.forEach(dezenas => {
      dezenas.forEach(num => {
        if (num >= 1 && num <= 25) frequencia[num]++;
      });

      for (let i = 0; i < dezenas.length - 2; i++) {
        const trio = dezenas.slice(i, i + 3).sort((a, b) => a - b).join("-");
        trioContador[trio] = (trioContador[trio] || 0) + 1;
      }
    });

    const ultimoJogo = todasDezenas[todasDezenas.length - 1];
    const candidatos = Array.from({ length: 25 }, (_, i) => i + 1);
    const jogosGerados = [];

    for (let j = 0; j < 9; j++) {
      let sorteioFinal = [];
      let tentativa = 0;
      let estatisticas = null;
      let temSequencia = false;
      let distrib = { linhasOK: true, colunasOK: true };
      let entropia = 0;

      do {
        sorteioFinal = [];
        tentativa++;

        while (sorteioFinal.length < 15) {
          const candidato = candidatos[Math.floor(Math.random() * candidatos.length)];
          const chance = Math.random();
          const repetidas = sorteioFinal.filter(n => ultimoJogo.includes(n)).length;
          const podeRepetir = !ultimoJogo.includes(candidato) || repetidas < 5;

          if (chance < 0.5 && !sorteioFinal.includes(candidato) && podeRepetir) {
            sorteioFinal.push(candidato);
          }
        }

        estatisticas = analisarJogo(sorteioFinal);
        temSequencia = temSequenciaLonga(sorteioFinal);
        distrib = distribuicaoLinhaColuna(sorteioFinal);

        estatisticas.mediaFreq = sorteioFinal.reduce((acc, num) => acc + frequencia[num], 0) / 15;
        estatisticas.raridadeBitcoin = sorteioFinal.filter(n => frequencia[n] <= 2).length;
        estatisticas.chanceBitcoin = estatisticas.raridadeBitcoin / 15;

        const grupos = {
          A: sorteioFinal.filter(n => n >= 1 && n <= 5).length,
          B: sorteioFinal.filter(n => n >= 6 && n <= 10).length,
          C: sorteioFinal.filter(n => n >= 11 && n <= 15).length,
          D: sorteioFinal.filter(n => n >= 16 && n <= 20).length,
          E: sorteioFinal.filter(n => n >= 21 && n <= 25).length,
        };

        entropia = 0;
        Object.values(grupos).forEach(qtd => {
          if (qtd > 0) {
            const p = qtd / 15;
            entropia -= p * Math.log2(p);
          }
        });
        estatisticas.entropia = entropia;

        estatisticas.pontuacao = (
          estatisticas.chanceBitcoin * 100 +
          (2.3 - Math.abs(2.1 - estatisticas.entropia)) * 10 +
          (7 - Math.abs(5.5 - estatisticas.mediaFreq)) * 5 +
          (estatisticas.moldura >= 6 && estatisticas.moldura <= 9 ? 5 : 0) +
          (estatisticas.pares >= 6 && estatisticas.pares <= 9 ? 5 : 0)
        );

      } while (
        (estatisticas.moldura < 6 || estatisticas.moldura > 9 ||
         temSequencia || !distrib.linhasOK || !distrib.colunasOK ||
         estatisticas.entropia < 1.8 || estatisticas.entropia > 2.3)
        && tentativa < 5000
      );

      jogosGerados.push({ dezenas: sorteioFinal, estatisticas, tentativa });
    }
	    // Seleciona o melhor jogo
    const melhorJogo = jogosGerados.reduce((melhor, atual) => {
      return atual.estatisticas.pontuacao > melhor.estatisticas.pontuacao ? atual : melhor;
    }, jogosGerados[0]);

    // Exibe os jogos principais
    resultado.innerHTML = "<h3>üß† Jogos principais gerados:</h3>" + jogosGerados.map((jogo, index) => {
      const sinais = [...jogo.dezenas].sort((a, b) => a - b).map(num => {
        if (ultimoJogo.includes(num)) return `<span style="color: orange;">${num} üîÅ</span>`;
        if (frequencia[num] >= 1) return `<span style="color: green;">${num} üìà</span>`;
        return `<span style="color: blue;">${num} ‚úÖ</span>`;
      });

      const triosDoJogo = [];
      for (let i = 0; i < jogo.dezenas.length - 2; i++) {
        const trio = jogo.dezenas.slice(i, i + 3).sort((a, b) => a - b).join("-");
        if (trioContador[trio]) {
          triosDoJogo.push(`${trio} (${trioContador[trio]}x)`);
        }
      }

      return `
        <div style="margin-bottom: 20px; border: 1px solid #ccc; padding: 10px; border-radius: 8px;">
          <strong>üé≤ Jogo ${index + 1}:</strong> ${sinais.join(", ")}<br><br>
          <strong>üìä Estat√≠sticas:</strong><br>
          Moldura: ${jogo.estatisticas.moldura}<br>
          Pares: ${jogo.estatisticas.pares}<br>
          Soma: ${jogo.estatisticas.soma}<br>
          M√©dia de frequ√™ncia: ${jogo.estatisticas.mediaFreq.toFixed(2)}<br>
          Repetidos do √∫ltimo concurso: ${jogo.dezenas.filter(n => ultimoJogo.includes(n)).length}<br>
          Entropia combinat√≥ria: ${jogo.estatisticas.entropia.toFixed(2)}<br>
          Pontua√ß√£o l√≥gica: ${jogo.estatisticas.pontuacao.toFixed(2)}<br><br>
          <strong>üß† Perfil estilo Bitcoin:</strong><br>
          Dezenas raras (‚â§2 ocorr√™ncias): ${jogo.estatisticas.raridadeBitcoin}<br>
          Chance estilo Bitcoin: ${(jogo.estatisticas.chanceBitcoin * 100).toFixed(2)}%<br>
          ${jogo.estatisticas.chanceBitcoin >= 0.4 ? "<span style='color:#ffd700;'>üíé Raridade extrema ‚Äî estilo minerador solo</span><br>" : ""}
          ${jogo === melhorJogo ? "<span style='color:#00bfff; font-weight:bold;'>üîù Jogo Priorit√°rio</span><br>" : ""}
          <br>
          <strong>üì° Trios orbitais:</strong><br>
          ${triosDoJogo.slice(0, 10).join("<br>")}
        </div>
      `;
    }).join("");

    atualizarStatus(`‚úÖ Estrat√©gia Bitcoin aplicada com ${jogosGerados.length} jogos!`, "#00ffd5");

    // Mensagem inspiradora
    const inspiracao = document.createElement("div");
    inspiracao.innerHTML = `
      <p style="color: #ffd700; font-style: italic; margin-top: 20px;">
        üí° Em janeiro de 2023, um minerador solo com apenas 49 TH/s encontrou sozinho o bloco 907283 do Bitcoin.
        Chance estimada: <strong>1 em 130 mil por dia</strong>. Recompensa: <strong>3,154 BTC</strong> (~R$ 2 milh√µes).
        <br><br>
        Cada jogo aqui carrega esse esp√≠rito: uma chance rara, mas real, de romper a l√≥gica e surpreender.
      </p>
    `;
    resultado.appendChild(inspiracao);

    // Fun√ß√£o auxiliar para sortear
    function sortear(array, quantidade) {
      const copia = [...array];
      const resultado = [];
      while (resultado.length < quantidade && copia.length > 0) {
        const i = Math.floor(Math.random() * copia.length);
        resultado.push(copia.splice(i, 1)[0]);
      }
      return resultado;
    }

    // Sugest√£o extra com 8 a 10 dezenas do √∫ltimo concurso
    const paresUltimo = ultimoJogo.filter(n => n % 2 === 0);
    const imparesUltimo = ultimoJogo.filter(n => n % 2 !== 0);
    const qtdTotal = 8 + Math.floor(Math.random() * 3); // 8 a 10
    const qtdPares = Math.floor(qtdTotal / 2);
    const qtdImpares = qtdTotal - qtdPares;

    const baseSugestao = [...sortear(paresUltimo, qtdPares), ...sortear(imparesUltimo, qtdImpares)];

    const blocoSugestao = document.createElement("div");
    blocoSugestao.innerHTML = `
      <div style="margin-top: 30px; padding: 15px; border: 2px dashed #ffd700; border-radius: 10px;">
        <strong>‚ú® Sugest√£o extra baseada no √∫ltimo concurso:</strong><br>
        ${baseSugestao.sort((a, b) => a - b).map(n => `<span style="color:#ff8c00; font-weight:bold;">${String(n).padStart(2, '0')}</span>`).join(", ")}
        <br><br>
        <em>Equil√≠brio entre pares e √≠mpares mantido. Essa sugest√£o serve como base para novos jogos.</em>
      </div>
    `;
    resultado.appendChild(blocoSugestao);

    // Gera 9 jogos derivados da sugest√£o
    const jogosDerivados = [];
    for (let i = 0; i < 9; i++) {
      let jogo = [...baseSugestao];
      const restantes = candidatos.filter(n => !jogo.includes(n));
      while (jogo.length < 15) {
        const n = restantes[Math.floor(Math.random() * restantes.length)];
        if (!jogo.includes(n)) jogo.push(n);
      }
      jogo.sort((a, b) => a - b);
      jogosDerivados.push(jogo);
    }

    // Exibe os jogos derivados
    const blocoDerivados = document.createElement("div");
    blocoDerivados.innerHTML = "<h3 style='margin-top:30px;'>üß† Jogos derivados da sugest√£o:</h3>" + jogosDerivados.map((jogo, index) => {
      return `
        <div style="margin-bottom: 15px; border: 1px dashed #ccc; padding: 10px; border-radius: 8px;">
          <strong>üéØ Jogo derivado ${index + 1}:</strong> ${jogo.map(n => `<span style="color:#4682b4;">${String(n).padStart(2, '0')}</span>`).join(", ")}
        </div>
      `;
    }).join("");
    resultado.appendChild(blocoDerivados);

  } catch (erro) {
    console.error("Erro na l√≥gica Bitcoin:", erro);
    atualizarStatus("‚ùå Falha na estrat√©gia Bitcoin.", "#ff6347");
    if (resultado) {
      resultado.innerHTML = `<p style="color: red;">‚ö†Ô∏è N√£o foi poss√≠vel acessar os concursos. Verifique a conex√£o ou o arquivo local.</p>`;
    }
  }
}


  // ‚úÖ Cron√¥metro retr√¥ + barra sincronizada
  let cronometroInterval;
  let segundosDecorridos = 0;
  const DURACAO_ESTIMADA_SEGUNDOS = 250;

  function iniciarCronometro() {
    const cronometro = document.getElementById("cronometroRetro");
    if (!cronometro) return;

    segundosDecorridos = 0;
    cronometro.textContent = "‚è±Ô∏è 00:00";

    clearInterval(cronometroInterval);
    cronometroInterval = setInterval(() => {
      segundosDecorridos++;
      const minutos = String(Math.floor(segundosDecorridos / 60)).padStart(2, '0');
      const segundos = String(segundosDecorridos % 60).padStart(2, '0');
      cronometro.textContent = `‚è±Ô∏è ${minutos}:${segundos}`;

      const progressoPercentual = Math.min((segundosDecorridos / DURACAO_ESTIMADA_SEGUNDOS) * 100, 100);
      atualizarBarra(progressoPercentual);
    }, 1000);
  }

  function pararCronometro() {
    clearInterval(cronometroInterval);
  }

  function reiniciarBarra() {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = "0%";
      barra.style.display = "block";
    }
  }

  function atualizarBarra(progressoPercentual) {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = `${progressoPercentual}%`;
    }
  }

  function finalizarBarra() {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = "100%";
      setTimeout(() => {
        barra.style.display = "none";
      }, 1000);
    }
  }
  
 async function importarUltimos() {
  const status = document.getElementById("statusImportacao");

  // Inputs internos (resultados)
  const camposInternos = document.querySelectorAll('#entrada input');

  // Inputs do topo (onde voc√™ quer que os n√∫meros apare√ßam)
  const inputsTopo = document.querySelectorAll('#entradaTopo input');

  try {
    const response = await fetch("lotofacil.php");
    const data = await response.json();

    if (data.error || !Array.isArray(data.dezenas)) {
      status.textContent = "Erro ao importar os √∫ltimos resultados.";
      return;
    }

    // Preenche os inputs internos
    camposInternos.forEach((campo, index) => {
      campo.value = data.dezenas[index] || "";
    });

    // Atualiza o jogo fixo global
    window.jogoFixo = [...data.dezenas];

    // Preenche os inputs do topo com estilo visual
    data.dezenas.forEach((numero, index) => {
      if (inputsTopo[index]) {
        inputsTopo[index].value = String(numero).padStart(2, '0');
        inputsTopo[index].style.backgroundColor = "#f0f8ff";
        inputsTopo[index].style.fontWeight = "bold";
        inputsTopo[index].style.fontFamily = "'Orbitron', Arial, sans-serif";
        inputsTopo[index].style.color = "#000";
      }
    });

    // Exibe alerta formatado
    const formatadas = data.dezenas.map(n => String(Math.floor(n)).padStart(2, '0'));
    alert(`‚úÖ Concurso ${data.numero} carregado:\n${formatadas.join(" - ")}`);

    status.textContent = `Concurso ${data.numero} carregado com sucesso.`;
    setTimeout(() => {
      status.textContent = "";
    }, 8000);
  } catch (error) {
    status.textContent = "Erro ao importar os resultados.";
    console.error(error);
  }
}

async function sorteioBitcoin() {
  const entradaTopo = document.querySelectorAll('#entrada input');
  const resultado = document.getElementById("resultadoBitcoin");

  if (!entradaTopo || entradaTopo.length !== 15 || !resultado) {
    resultado.innerHTML = "‚ö†Ô∏è Preencha 15 dezenas v√°lidas no topo antes de sortear.";
    return;
  }

  const numerosOriginais = [];
  entradaTopo.forEach(input => {
    const val = parseInt(input.value);
    if (!isNaN(val) && val >= 1 && val <= 25 && !numerosOriginais.includes(val)) {
      numerosOriginais.push(val);
    }
  });

  if (numerosOriginais.length !== 15) {
    resultado.innerHTML = "‚ö†Ô∏è Os n√∫meros devem ser √∫nicos e entre 1 e 25.";
    return;
  }

  const universo = Array.from({ length: 25 }, (_, i) => i + 1);
  const response = await fetch("lotofacil_combinacoes_convertido.json");
  const jogosAnteriores = await response.json();

  const contagem = {};
  for (let i = 1; i <= 25; i++) contagem[i] = 0;
  Object.values(jogosAnteriores).forEach(jogo => {
    jogo.forEach(num => contagem[num]++);
  });

  const melhores13 = Object.entries(contagem)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 13)
    .map(([num]) => parseInt(num));

  const jogosComIPE = [];

  function calcularIPE(jogo, soma, pares, moldura, filtrados) {
    let pontos = 0;
    if (soma >= 180 && soma <= 210) pontos++;
    if (pares >= 6 && pares <= 9) pontos++;
    if (moldura >= 8 && moldura <= 11) pontos++;
    if (filtrados.length >= 8) pontos++;

    let seq = 1;
    for (let i = 1; i < jogo.length; i++) {
      if (jogo[i] === jogo[i - 1] + 1) {
        seq++;
        if (seq > 2) break;
      } else {
        seq = 1;
      }
    }
    if (seq <= 2) pontos++;
    return pontos;
  }

  function gerarJogoForcadoIPE5() {
    let tentativa = 0;
    while (tentativa < 1000) {
      const jogo = [];
      while (jogo.length < 15) {
        const n = Math.floor(Math.random() * 25) + 1;
        if (!jogo.includes(n)) jogo.push(n);
      }
      jogo.sort((a, b) => a - b);
      const soma = jogo.reduce((acc, n) => acc + n, 0);
      const pares = jogo.filter(n => n % 2 === 0).length;
      const moldura = jogo.filter(n => [1,2,3,4,5,6,10,11,15,16,20,21,25].includes(n)).length;
      const filtrados = jogo.filter(n => melhores13.includes(n));
      const ipe = calcularIPE(jogo, soma, pares, moldura, filtrados);
      if (ipe === 5) return { jogo, soma, pares, moldura, filtrados };
      tentativa++;
    }
    return null;
  }

  let html = `<strong>üèÜ Ganhador estilo Bitcoin:</strong><br><br>`;

  for (let j = 1; j <= 9; j++) {
    const reaproveitados = [];
    while (reaproveitados.length < 9) {
      const n = numerosOriginais[Math.floor(Math.random() * numerosOriginais.length)];
      if (!reaproveitados.includes(n)) reaproveitados.push(n);
    }

    const restantes = universo.filter(n => !reaproveitados.includes(n));
    const novos = [];
    while (novos.length < 6) {
      const n = restantes[Math.floor(Math.random() * restantes.length)];
      if (!novos.includes(n)) novos.push(n);
    }

    const jogoFinal = [...reaproveitados, ...novos].sort((a, b) => a - b);
    const soma = jogoFinal.reduce((acc, n) => acc + n, 0);
    const pares = jogoFinal.filter(n => n % 2 === 0).length;
    const moldura = jogoFinal.filter(n => [1,2,3,4,5,6,10,11,15,16,20,21,25].includes(n)).length;
    const filtrados = jogoFinal.filter(n => melhores13.includes(n));
    const ipe = calcularIPE(jogoFinal, soma, pares, moldura, filtrados);

    jogosComIPE.push({ jogo: jogoFinal, ipe, reaproveitados, novos, soma, pares, moldura, filtrados });
  }

  // Preencher os inputs com o primeiro jogo gerado
  if (jogosComIPE.length > 0) {
    jogosComIPE[0].jogo.forEach((num, i) => {
      if (entradaTopo[i]) entradaTopo[i].value = num;
    });
  }

  jogosComIPE.forEach((jogoObj, index) => {
    const cor = jogoObj.ipe === 5 ? "#00ff80" : jogoObj.ipe === 4 ? "#ffd700" : "#999";
    const bg = jogoObj.ipe === 5 ? "#003322" : jogoObj.ipe === 4 ? "#332900" : "#1a1a1a";
    const emoji = jogoObj.ipe === 5 ? "üíé" : jogoObj.ipe === 4 ? "‚≠ê" : "üé≤";

    html += `
      <div style="margin-bottom: 18px; border: 2px solid ${cor}; background-color:${bg}; padding: 10px; border-radius: 8px;">
        <strong style="color:${cor};">${emoji} Jogo ${index + 1} (IPE ${jogoObj.ipe}/5):</strong><br>
        <div style="margin: 6px 0; display: flex; flex-wrap: wrap; gap: 6px;">
          ${jogoObj.jogo.map(n => `
            <span style="
              display:inline-block;
              width:48px;
              height:48px;
              line-height:48px;
              text-align:center;
              font-weight:bold;
              font-size:18px;
              border-radius:6px;
              background-color:#202020;
              color:#fff;
              box-shadow:0 0 4px ${cor};
            ">${String(n).padStart(2, '0')}</span>
          `).join("")}
        </div>
        üîÅ Reaproveitados: ${jogoObj.reaproveitados.join(", ")}<br>
        ‚ú® Novos: ${jogoObj.novos.join(", ")}<br>
        üìä Soma: ${jogoObj.soma} | ‚öñÔ∏è Pares: ${jogoObj.pares} | √çmpares: ${15 - jogoObj.pares} | üß© Moldura: ${jogoObj.moldura}<br>
        üîç Frequentes: ${jogoObj.filtrados.join(", ")}<br>
        <strong style="color:${cor};">üåü IPE: ${jogoObj.ipe}/5</strong>
      </div>
    `;
  });

  if (!jogosComIPE.some(j => j.ipe === 5)) {
    const jogoExtra = gerarJogoForcadoIPE5();
    if (jogoExtra) {
      jogoExtra.jogo.forEach((num, i) => {
        if (entradaTopo[i]) entradaTopo[i].value = num;
      });

      html += `
        <div style="margin-bottom: 18px; border: 2px solid #00ff80; background-color:#003322; padding: 10px; border-radius: 8px;">
          <strong style="color:#00ff80;">üíé Complemento Estrat√©gico (IPE 5/5):</strong><br>
          <div style="margin: 6px 0; display: flex; flex-wrap: wrap; gap: 6px;">
            ${jogoExtra.jogo.map(n => `
              <span style="
                display:inline-block;
                width:48px;
                height:48px;
                line-height:48px;
                text-align:center;
                font-weight:bold;
                font-size:18px;
                border-radius:6px;
                background-color:#202020;
                color:#fff;
                box-shadow:0 0 4px #00ff80;
              ">${String(n).padStart(2, '0')}</span>
            `).join("")}
          </div>
                    üìä Soma: ${jogoExtra.soma} | ‚öñÔ∏è Pares: ${jogoExtra.pares} | √çmpares: ${15 - jogoExtra.pares} | üß© Moldura: ${jogoExtra.moldura}<br>
          üîç Frequentes: ${jogoExtra.filtrados.join(", ")}<br>
          <strong style="color:#00ff80;">üåü IPE: 5/5</strong>
        </div>
      `;
    }
  }

  resultado.innerHTML = html;
}

  function gerarJogosPromissores() {
  const qtd = 6; // for√ßa gera√ß√£o de apenas 5 jogos

  fetch("lotofacil_combinacoes_convertido.json")
    .then(res => res.json())
    .then(historicoConcursos => {
      const container = document.getElementById("jogosGerados");
      container.innerHTML = "<h3>üìà Estrat√©gias Otimizadas (12 a 14 pts):</h3>";

      const candidatos = [];
      const frequenciaReal = {};
      const todas = Array.from({ length: 25 }, (_, i) => i + 1);

      // üß† Frequ√™ncia real dos concursos
      Object.values(historicoConcursos).forEach(dezenas => {
        dezenas.forEach(n => {
          frequenciaReal[n] = (frequenciaReal[n] || 0) + 1;
        });
      });

      // üé≤ Simula√ß√£o estat√≠stica: 1000 sorteios fict√≠cios
      const frequenciaSimulada = Array(25).fill(0);
      for (let i = 0; i < 1000; i++) {
        const sorteados = [];
        while (sorteados.length < 15) {
          const n = Math.floor(Math.random() * 25) + 1;
          if (!sorteados.includes(n)) sorteados.push(n);
        }
        sorteados.forEach(n => frequenciaSimulada[n - 1]++);
      }

      // üîó Combina as duas frequ√™ncias com pesos
      const pesoFinal = {};
      for (let i = 1; i <= 25; i++) {
        const real = frequenciaReal[i] || 0;
        const simulado = frequenciaSimulada[i - 1] || 0;
        pesoFinal[i] = (real * 0.5) + (simulado * 0.5);
      }

      // üîÅ Gera 100 jogos candidatos
      for (let i = 0; i < 100; i++) {
        const jogo = [];

        while (jogo.length < 15) {
          const n = Math.floor(Math.random() * 25) + 1;
          if (!jogo.includes(n)) jogo.push(n);
        }

        jogo.sort((a, b) => a - b);

        // üìä Calcula nota com base no peso final
        const nota = jogo.reduce((soma, n) => soma + (pesoFinal[n] || 0), 0);

        // üìà Conta quantas vezes o jogo fez entre 12 e 14 pontos
        let vezesEntre12e14 = 0;
        Object.values(historicoConcursos).forEach(concurso => {
          const acertos = jogo.filter(n => concurso.includes(n)).length;
          if (acertos >= 12 && acertos <= 14) vezesEntre12e14++;
        });

        candidatos.push({ jogo, nota, vezesEntre12e14 });
      }

      // üèÜ Seleciona os que mais se parecem com 12 a 14 pontos
      candidatos.sort((a, b) => b.vezesEntre12e14 - a.vezesEntre12e14);
      const melhores = candidatos.slice(0, qtd);

      // ‚úÖ Preenche os inputs fixos no topo
      const melhorJogo = melhores[0].jogo;
      preencherInputs(melhorJogo);

      // üñºÔ∏è Exibe os jogos gerados
      melhores.forEach(({ jogo, vezesEntre12e14 }) => {
        const div = document.createElement("div");
        div.className = "jogo-comparativo";

        jogo.forEach(num => {
          const span = document.createElement("span");
          span.className = "label";
          span.textContent = String(num).padStart(2, '0');
          div.appendChild(span);
        });

        const info = document.createElement("div");
        info.className = "score-info";
        info.textContent = `üéØ Frequ√™ncia entre 12‚Äì14 pts: ${vezesEntre12e14}`;
        div.appendChild(info);

        container.appendChild(div);
      });

      atualizarStatus(`${qtd} jogos com maior recorr√™ncia entre 12 e 14 pontos gerados! üß†`, "#00ffd5");
    })
    .catch(err => {
      console.error("‚ùå Erro ao carregar hist√≥rico:", err);
      atualizarStatus("‚ùå Falha ao gerar jogos promissores.", "#ff0000");
    });
}
  // ‚úÖ Registro global de fun√ß√µes
  document.addEventListener("DOMContentLoaded", () => {
    window.sortearComLogica = sortearComLogica;
    window.gerarJogosPromissores = gerarJogosPromissores;
    window.importarUltimos = importarUltimos;
    window.verTriosMaisComuns = verTriosMaisComuns;
    window.avaliarConjuntoPython = avaliarConjuntoPython;
    window.gerarSugestao = gerarSugestao;
	window.jogoFixo
	
    window.sortearComFrequencia = sortearComFrequencia;
	
    window.prepararPromissor = prepararPromissor;
    window.logicaGanhadorBitcoin = logicaGanhadorBitcoin;
    window.buscarConcursoEspecifico = buscarConcursoEspecifico;

    // Fun√ß√µes auxiliares
    window.limparInterfaceCompleta = limparInterfaceCompleta;
    window.limparJogoFixo = limparJogoFixo;
    window.carregarCombinacoesReais = carregarCombinacoesReais;
    window.atualizarConcursos = atualizarConcursos;
    window.exibirResultado = exibirResultado;
    window.preencherInputs = preencherInputs;
    window.atualizarStatus = atualizarStatus;
    window.atualizarTopo = atualizarTopo;

    // Cron√¥metro e barra
    window.iniciarCronometro = iniciarCronometro;
    window.pararCronometro = pararCronometro;
    window.reiniciarBarra = reiniciarBarra;
    window.atualizarBarra = atualizarBarra;
    window.finalizarBarra = finalizarBarra;
	window.sortearComFrequencia = sortearComFrequencia;

    // ‚úÖ Inicializa√ß√µes seguras
    //atualizarConcursos(); // mant√©m apenas o que √© necess√°rio
  });

</script>

</body>

</html>














