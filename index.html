<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sorteio Inteligente</title>

  <link rel="icon" href="LOTOF√ÅCIL.png" sizes="192x192" type="image/png">
  <link rel="icon" href="LOTOF√ÅCIL.png" sizes="512x512" type="image/png">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">


	
  <style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap');

  /* T√≠tulo principal com efeito neon animado */
  .neon-titulo {
    font-family: 'Orbitron', sans-serif;
    font-size: 48px;
    text-align: center;
    margin-top: 30px;
    letter-spacing: 2px;
    background: linear-gradient(90deg, #ff00cc, #00ffff, #ffcc00, #ff00cc);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: neonColor 6s ease infinite, brilhoFlash 2s infinite alternate;
    text-shadow:
      0 0 5px #fff,
      0 0 10px #ff00cc,
      0 0 15px #00ffff,
      0 0 20px #ffcc00;
  }

  @keyframes neonColor {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  @keyframes brilhoFlash {
    0% {
      text-shadow:
        0 0 5px #00ffd5,
        0 0 10px #00ffd5,
        0 0 20px #00ffd5,
        0 0 40px #00ff88;
    }
    100% {
      text-shadow:
        0 0 10px #ff00ff,
        0 0 20px #ff00ff,
        0 0 40px #ff00ff,
        0 0 60px #ff00ff;
    }
  }

  /* Subt√≠tulo com brilho sutil */
  #subtituloPrincipal {
    font-family: 'Orbitron', sans-serif;
    font-size: 18px;
    color: #ffffff;
    text-shadow: 0 0 3px #00ffff;
    text-align: center;
    margin-bottom: 20px;
  }

  /* Fundo escuro para destacar o neon */
  body {
    background-color: #000;
    color: #ffd700;
    font-family: 'Orbitron', Arial, sans-serif;
    text-align: center;
    overflow-x: hidden;
    margin: 0;
    padding: 0;
  }

  * { box-sizing: border-box; }

  /* Splash com gradiente animado */
  #splash {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: linear-gradient(135deg, #0a0a0a, #1a1a1a, #000);
    background-size: 200% 200%;
    animation: bgMove 8s ease infinite;
    color: #00ffd5;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    font-size: 24px;
  }

  @keyframes bgMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

 input[type="text"],
input[type="password"] {
  width: 290px;
  padding: 12px;
  margin: 10px 0;
  border: none;
  border-radius: 8px;
  background: #121212; /* fundo escuro */
  color: #00ffd5;      /* texto neon */
  font-family: 'Orbitron', sans-serif;
  font-size: 16px;
  text-align: center;

  /* efeito neon */
  box-shadow: 0 0 10px #00ffd5, 0 0 20px #00ff88;
  outline: none;
  transition: box-shadow 0.3s ease, transform 0.2s ease;
}

/* efeito ao focar */
input[type="text"]:focus,
input[type="password"]:focus {
  box-shadow: 0 0 15px #ff00ff, 0 0 30px #00ffff;
  transform: scale(1.05);
}

  #conteudo-principal {
    display: none;
    animation: fadeInMain 1s ease forwards;
    max-width: 100%;
    padding: 10px;
  }

  @keyframes fadeInMain {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  #entradaTopo {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    margin: 20px auto;
    width: 100%;
    max-width: 600px;
    padding: 10px;
  }

  #entradaTopo input {
    width: 100%;
    height: 56px;
    font-size: 20px;
    font-weight: bold;
    border-radius: 6px;
    background-color: #303030;
    color: #fff;
    box-shadow: 0 0 4px #00ffd5;
    border: 1px solid #00ffd5;
    text-align: center;
  }

  button {
    background-color: rgba(0, 255, 213, 0.1);
    color: #00ffd5;
    border: 1px solid #00ffd5;
    padding: 14px;
    border-radius: 8px;
    font-weight: bold;
    font-size: 16px;
    cursor: pointer;
    margin: 5px;
    width: 100%;
    max-width: 280px;
    box-shadow: 0 0 12px #00ffd5;
    text-transform: uppercase;
    letter-spacing: 1px;
    backdrop-filter: blur(6px); /* efeito glassmorphism */
  }

  button:hover {
    background-color: rgba(0, 255, 213, 0.2);
    box-shadow: 0 0 20px #00ffd5;
    transform: scale(1.05);
  }

  .painel-botoes,
  .grupo-controle {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin: 20px auto;
    width: 100%;
    max-width: 600px;
    padding: 0 10px;
  }

  #infoConcursoContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    margin-top: 12px;
  }

  #infoConcurso {
    display: block;
    width: 100%;
    max-width: 400px;
    margin: 0 auto;
    padding: 8px 0;
    font-size: clamp(1.4rem, 2vw, 2rem);
    font-weight: 600;
    text-align: center;
    color: #00ffd5;
    border-bottom: 2px solid #00ffd5;
    transition: all 0.3s ease-in-out;
  }

  @media (max-width: 480px) {
    #infoConcursoContainer { padding-top: 20vh; }
    #infoConcurso { font-size: 1.4rem; }
    h1 { font-size: 18px; }
    #entradaTopo {
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      padding: 10px;
    }
  }
  
  .botao-3d {
  background: linear-gradient(135deg, #00ffd5, #0088ff);
  color: #000;
  font-weight: bold;
  padding: 12px 24px;
  border: none;
  border-radius: 10px;
  font-size: 18px;
  cursor: pointer;
  margin-top: 20px;
  text-transform: uppercase;
  letter-spacing: 1px;

  /* efeito 3D */
  box-shadow: 
    0 6px 0 #006666,   /* sombra s√≥lida para efeito de profundidade */
    0 6px 15px rgba(0, 255, 213, 0.6); /* brilho */
  transition: all 0.2s ease;
}

.botao-3d:hover {
  background: linear-gradient(135deg, #00ffd5, #00ff88);
  transform: translateY(-3px);
  box-shadow: 
    0 9px 0 #006666,
    0 12px 20px rgba(0, 255, 213, 0.8);
}

.botao-3d:active {
  transform: translateY(3px);
  box-shadow: 
    0 3px 0 #006666,
    0 6px 10px rgba(0, 255, 213, 0.6);
}

#cadastro {
  width: 90%;
  max-width: 420px;
  margin: 40px auto;
  padding: 30px;
  border-radius: 12px;

  /* Moldura neon */
  border: 2px solid #00ffd5;
  box-shadow: 0 0 20px #00ffd5, inset 0 0 10px #00ffd5;

  background: linear-gradient(145deg, #0a0a0a, #1a1a1a);
  color: #ffffff;
  font-family: 'Orbitron', sans-serif;
  text-align: center;
  animation: fadeInMain 1s ease forwards;
}




  
  
</style>
</head>

<body>
 <div id="splash">
    <h2>"Mega-Sena" Inteligente</h2>
    <p>Bem-vindo!</p>
  </div>

  <div id="cadastro" style="display: none;">
    <h2>Cadastro R√°pido</h2>
    <input type="text" placeholder="Nome completo" id="nome" /><br><br>
    <input type="text" placeholder="CPF" id="cpf" /><br><br>
   <p class="senha-info">
  üîí A senha deve ter no m√≠nimo 8 caracteres, come√ßando com 3 letras seguidas de n√∫meros e pelo menos uma letra mai√∫scula
</p>

	
	<input type="password" placeholder="Senha" id="senha" /><br><br>
    <button onclick="finalizarCadastro()">Continuar</button>
  </div>

  <div id="pagamento" style="display: none;">
  <h2>Pagar Pix R$ 9,80</h2>
  <button onclick="copiarPix()">üí∏ Copiar Pix</button>
  <p id="mensagemPix" style="color: green; font-weight: bold;"></p>
</div>

  

  <div id="conteudo-principal">
<h1 id="tituloPrincipal" class="neon-titulo">‚ö° "MEGA-SENA" - SORTEIO L√ìGICO</h1>
	<p id="subtituloPrincipal" style="position: relative; top: -9px;">
  Sua "SORTE" com L√≥gica!!!
</p>
<h1 style="font-size: 18px; margin-top: 4px;">
  Digite manual ou pelos bot√µes at√© 15 n√∫meros de 1 a 60
</h1>
<div id="infoConcursoContainer">
    <div id="infoConcurso"></div>
  </div>



   <div id="entradaTopo">
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
</div>

		

    <div class="painel-botoes">
      <button onclick="importarUltimos()">üì• Importar √öltimo Concurso</button>
      <button onclick="buscarConcursoEspecifico()">üîç Buscar Concursos</button>
      <button onclick="jogosInversosALogica()">üß™ Jogos Inversos √† L√≥gica</button>
      <button onclick="sorteioBitcoin()">üèÜ Ganhador estilo Bitcoin</button>
      <button onclick="avaliarConjuntoPython()">üß† Avaliar jogo</button>
          
      <button onclick="verTriosMaisComuns()">üìä Ver trios mais comuns</button>
      <button onclick="prepararPromissor()">üéØ Jogos Promissores</button>
      <button onclick="gerarJogosPromissores(10)">üìà Estrat√©gias Otimizadas</button>
      <button onclick="sortearComFrequencia()">üìä Probabilidade Hist√≥rica</button>
	  <button onclick="montarJogosMega()">üìä Combina√ß√£o</button>
      <button id="btnSortear">üéØ Sortear L√≥gico</button>
	  <button onclick="limparTudo()">üîÑ Apagar</button>
	 
    </div>
	
	<button onclick="atualizarTodosConcursos()" class="botao-3d">
  Atualizar Concursos
</button>

<div id="statusAtualizacao" style="margin-top: 10px; font-weight: bold;"></div>


 
 
  üîÑ Atualizar Lotof√°cil </button>
    <div id="resultadoBitcoin" style="margin-top: 10px;"></div>
    <div id="statusImportacao"></div>
    <div id="jogosGerados"></div>
    <div id="analiseEstatistica"></div>
    <div id="listaConcursos"></div>
    <div id="ultimoConcursoTopo"></div>
    <div id="jogosInversosContainer"></div>
    <div id="jogosIneditosContainer" style="margin-top: 30px;">
      <h3 style="color: #00ff88;">üü¢ Jogos 100% In√©ditos</h3>
    </div>
    <div class="resultado" id="resultado"></div>
    <pre id="output"></pre>
  </div>
  <!-- Status da probabilidade -->
<div id="statusProbabilidade"></div>

<!-- Jogo fixo no topo -->
<div id="entradaTopo"></div>

<!-- Painel hist√≥rico lateral -->
<div id="painelHistorico"></div>


  
  </body>

  <script>
    window.addEventListener("load", () => {
      setTimeout(() => {
        document.getElementById("splash").style.display = "none";
               document.getElementById("cadastro").style.display = "block";
      }, 2500); // 2.5 segundos
    });

    function finalizarCadastro() {
  const nome = document.getElementById("nome").value.trim();
  const cpf = document.getElementById("cpf").value.trim();
  const senha = document.getElementById("senha").value;

  if (!nome || !cpf || !senha) {
    alert("Preencha todos os campos.");
    return;
  }

  if (!validarSenha(senha)) {
    alert("‚ö†Ô∏è Senha inv√°lida.\nEla deve ter no m√≠nimo 8 caracteres, come√ßar com 3 letras seguidas de n√∫meros e conter pelo menos uma letra mai√∫scula.");
    return;
  }

  // Exibe a √°rea de pagamento e o bot√£o Pix
  document.getElementById("cadastro").style.display = "none";
  document.getElementById("pagamento").style.display = "block";
  document.getElementById("botaoPix").style.display = "block";
}
function validarSenha(senha) {
  if (senha.length < 8) return false;

  const letrasIniciais = senha.slice(0, 3);
  if (!/^[a-zA-Z]{3}$/.test(letrasIniciais)) return false;

  const resto = senha.slice(3);
  if (!/\d/.test(resto)) return false;

  if (!/[A-Z]/.test(senha)) return false;

  return true;
}

function mostrarPix() {
  document.getElementById("pixInfo").style.display = "block";
  
  document.getElementById("pagamento").style.display = "none";
  document.getElementById("conteudo-principal").style.display = "block";
}

function copiarPix() {
  const chavePix = "19997161717";

  // Copia a chave Pix
  const tempInput = document.createElement("input");
  tempInput.value = chavePix;
  document.body.appendChild(tempInput);
  tempInput.select();
  document.execCommand("copy");
  document.body.removeChild(tempInput);

  // Mostra mensagem de sucesso
  const mensagem = document.getElementById("mensagemPix");
  mensagem.textContent = "‚úÖ Pix copiado com sucesso!";

  // Vai para a tela principal
  document.getElementById("pagamento").style.display = "none";
  document.getElementById("conteudo-principal").style.display = "block";
}

// Fun√ß√£o para gerar combina√ß√µes de k elementos dentro de um array
function gerarCombinacoes(array, k) {
  const resultados = [];

  function backtrack(inicio, atual) {
    if (atual.length === k) {
      resultados.push([...atual]);
      return;
    }
    for (let i = inicio; i < array.length; i++) {
      atual.push(array[i]);
      backtrack(i + 1, atual);
      atual.pop();
    }
  }

  backtrack(0, []);
  return resultados;
}

// Fun√ß√£o auxiliar para gerar combina√ß√µes √∫nicas de k elementos
function gerarCombinacoes(array, k) {
  const resultados = [];

  function backtrack(inicio, atual) {
    if (atual.length === k) {
      resultados.push([...atual]);
      return;
    }
    for (let i = inicio; i < array.length; i++) {
      atual.push(array[i]);
      backtrack(i + 1, atual);
      atual.pop();
    }
  }

  backtrack(0, []);
  return resultados;
}

// Fun√ß√£o auxiliar para gerar combina√ß√µes √∫nicas de k elementos
function gerarCombinacoes(array, k) {
  const resultados = [];

  function backtrack(inicio, atual) {
    if (atual.length === k) {
      resultados.push([...atual]);
      return;
    }
    for (let i = inicio; i < array.length; i++) {
      atual.push(array[i]);
      backtrack(i + 1, atual);
      atual.pop();
    }
  }

  backtrack(0, []);
  return resultados;
}

// Fun√ß√£o auxiliar para gerar combina√ß√µes √∫nicas de k elementos
function gerarCombinacoes(array, k) {
  const resultados = [];

  function backtrack(inicio, atual) {
    if (atual.length === k) {
      resultados.push([...atual]);
      return;
    }
    for (let i = inicio; i < array.length; i++) {
      atual.push(array[i]);
      backtrack(i + 1, atual);
      atual.pop();
    }
  }

  backtrack(0, []);
  return resultados;
}

// Fun√ß√£o principal: l√™ de 7 a 15 n√∫meros dos inputs do topo e monta os jogos de 6 dezenas
function montarJogosMega() {
  const inputsTopo = document.querySelectorAll("#entradaTopo input");
  const numerosEscolhidos = [];

  // L√™ os valores dos inputs
  inputsTopo.forEach(input => {
    const val = parseInt(input.value, 10);
    if (!isNaN(val) && val >= 1 && val <= 60) {
      numerosEscolhidos.push(val);
    }
  });

  // Verifica se foram digitados entre 7 e 15 n√∫meros v√°lidos
  if (numerosEscolhidos.length < 7 || numerosEscolhidos.length > 15) {
    alert("Voc√™ deve inserir entre 7 e 15 n√∫meros v√°lidos (entre 1 e 60).");
    return;
  }

  // Ordena os n√∫meros para consist√™ncia
  const ordenados = [...numerosEscolhidos].sort((a, b) => a - b);

  // Gera todas as combina√ß√µes poss√≠veis de 6 dezenas dentro dos escolhidos
  let jogos = gerarCombinacoes(ordenados, 6);

  // Remove duplicados (garantia extra)
  const vistos = new Set();
  jogos = jogos.filter(jogo => {
    const chave = jogo.join("-");
    if (vistos.has(chave)) return false;
    vistos.add(chave);
    return true;
  });

  // Exibe os jogos dinamicamente na p√°gina
  const container = document.getElementById("jogosGerados");
  container.innerHTML = "";

  const titulo = document.createElement("div");
  titulo.textContent = `üìä Foram gerados ${jogos.length} jogos de 6 dezenas a partir dos ${ordenados.length} escolhidos:`;
  titulo.style.fontWeight = "bold";
  titulo.style.color = "#00ffd5";
  titulo.style.marginBottom = "12px";
  container.appendChild(titulo);

  jogos.forEach((jogo, idx) => {
    const grupo = document.createElement("div");
    grupo.className = "grupo-jogo";
    grupo.style.marginBottom = "12px";

    // Exibe o jogo j√° formatado com h√≠fen (para copiar/colar)
    const tituloJogo = document.createElement("div");
    tituloJogo.textContent = `Jogo ${idx + 1}: ${jogo.map(n => String(n).padStart(2, '0')).join("-")}`;
    tituloJogo.style.fontWeight = "bold";
    tituloJogo.style.color = "#ffcc00";
    tituloJogo.style.marginBottom = "6px";
    grupo.appendChild(tituloJogo);

    container.appendChild(grupo);
  });

  // Mensagem final
  const finalMsg = document.createElement("div");
  finalMsg.textContent = "üü¢ Jogos 100% In√©ditos";
  finalMsg.style.color = "#00ff00";
  finalMsg.style.fontWeight = "bold";
  finalMsg.style.marginTop = "20px";
  container.appendChild(finalMsg);
}

  </script>
  
  
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const cpfInput = document.getElementById("cpf");

    cpfInput.addEventListener("input", function () {
      let valor = cpfInput.value.replace(/\D/g, ""); // Remove tudo que n√£o for n√∫mero

      if (valor.length > 11) valor = valor.slice(0, 11); // Limita a 11 d√≠gitos

      // Aplica a m√°scara: 000.000.000-00
      let formatado = valor;
      if (valor.length > 9) {
        formatado = valor.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
      } else if (valor.length > 6) {
        formatado = valor.replace(/(\d{3})(\d{3})(\d{0,3})/, "$1.$2.$3");
      } else if (valor.length > 3) {
        formatado = valor.replace(/(\d{3})(\d{0,3})/, "$1.$2");
      }

      cpfInput.value = formatado;
    });
  });
</script>
  
  
</body>


<script>
// ‚úÖ Gera os 15 inputs fixos no topo ao carregar
document.addEventListener("DOMContentLoaded", () => {
  gerarInputsFixos();
});

function gerarInputsFixos() {
  const container = document.getElementById("entradaTopo");
  container.innerHTML = "";

  for (let i = 0; i < 15; i++) {
    const input = document.createElement("input");
    input.type = "number";
    input.min = 1;
    input.max = 25;
    input.placeholder = `#${i + 1}`;
    input.id = `topo${i + 1}`;
    container.appendChild(input);
  }
}

// ‚úÖ Atualiza os n√∫meros digitados como etiquetas no topo
function atualizarTopo(numeros) {
  const labelsTopo = document.getElementById("labelsTopo");
  labelsTopo.innerHTML = "";

  numeros.forEach(num => {
    const span = document.createElement("span");
    span.className = "label";
    span.textContent = num;
    labelsTopo.appendChild(span);
  });
}

// ‚úÖ Exibe os n√∫meros sorteados na √°rea de resultado
function exibirResultado(numeros) {
  const resultadoDiv = document.getElementById("resultado");
  resultadoDiv.innerHTML = "";
  numeros.sort((a, b) => a - b).forEach(num => {
    const div = document.createElement("div");
    div.className = "label";
    div.textContent = num;
    resultadoDiv.appendChild(div);
  });
  atualizarTopo(numeros);
}

async function sortearComFrequencia() {
  const status = document.getElementById("statusProbabilidade");
  const container = document.getElementById("jogosGerados");
  const entradaTopo = document.getElementById("entradaTopo");

  let qtdJogos = 0;
  const entrada = prompt("Digite a quantidade de jogos vari√°veis (1 a 2000):");
  if (entrada !== null) {
    const n = parseInt(entrada, 10);
    if (!isNaN(n) && n >= 1 && n <= 2000) {
      qtdJogos = n;
    } else {
      alert("Valor inv√°lido. Digite um n√∫mero entre 1 e 2000.");
      return;
    }
  }

  try {
    if (status) {
      status.innerText = "‚è≥ Analisando hist√≥rico e gerando jogos...";
      status.style.color = "#ffd700";
    }

    const url = "http://localhost/MEGASENA/MegaSena1.json";
    const response = await fetch(url, { cache: "no-store" });

    if (!response.ok) throw new Error(`HTTP ${response.status} ${response.statusText}`);

    const dados = await response.json();

    // Frequ√™ncias e pesos
    const frequencia = {};
    const pesoInercial = {};
    const entradas = Object.entries(dados);

    entradas.forEach(([concursoId, numeros]) => {
      if (!Array.isArray(numeros)) return;
      numeros.forEach(num => {
        frequencia[num] = (frequencia[num] || 0) + 1;
        pesoInercial[num] = (pesoInercial[num] || 0) + parseInt(concursoId, 10);
      });
    });

    // Ranking
    const ranking = Object.entries(frequencia)
      .sort((a, b) => b[1] - a[1])
      .map(([num]) => Number(num));

    const top5 = new Set(ranking.slice(0, 5));
    const top10 = new Set(ranking.slice(5, 15));

    // Helpers
    function calcularDistanciaMedia(jogo) {
      const s = [...jogo].sort((a, b) => a - b);
      let soma = 0;
      for (let i = 1; i < s.length; i++) soma += (s[i] - s[i - 1]);
      const mediaGaps = soma / (s.length - 1);
      const dispersaoCentro = s.reduce((acc, n) => acc + Math.abs(n - 30), 0) / s.length;
      return (mediaGaps * 0.6) + (dispersaoCentro * 0.4);
    }

    function gerarJogoMesclado() {
      const universe = Array.from({ length: 60 }, (_, i) => i + 1);
      const maxFreq = Math.max(...universe.map(n => frequencia[n] || 0), 1);
      const pesos = universe.map(n => 1 + ((frequencia[n] || 0) / maxFreq) * 2);

      const escolhidos = [];
      const disponiveis = [...universe];
      const pesosAtuais = [...pesos];

      for (let k = 0; k < 6; k++) {
        const somaPesos = pesosAtuais.reduce((a, b) => a + b, 0);
        if (somaPesos <= 0) break;

        let r = Math.random() * somaPesos;
        let idx = 0;
        for (; idx < pesosAtuais.length; idx++) {
          r -= pesosAtuais[idx];
          if (r <= 0) break;
        }

        const escolhido = disponiveis[idx];
        escolhidos.push(escolhido);
        disponiveis.splice(idx, 1);
        pesosAtuais.splice(idx, 1);
      }

      while (escolhidos.length < 6) {
        const n = Math.floor(Math.random() * 60) + 1;
        if (!escolhidos.includes(n)) escolhidos.push(n);
      }

      return escolhidos.sort((a, b) => a - b);
    }

    // Jogo fixo (6 mais frequentes) ‚Äî apenas preenche os primeiros 6 inputs j√° existentes
    const jogoFixo = Object.keys(frequencia)
      .sort((a, b) => frequencia[b] - frequencia[a])
      .slice(0, 6)
      .map(Number);

    const inputsTopo = entradaTopo.querySelectorAll("input");
    jogoFixo.forEach((num, idx) => {
      if (inputsTopo[idx]) {
        inputsTopo[idx].value = num;
        inputsTopo[idx].style.backgroundColor = "#004d33";
        inputsTopo[idx].style.color = "#fff";
        inputsTopo[idx].style.fontWeight = "bold";
      }
    });

    const mediaDistancia = calcularDistanciaMedia(jogoFixo);
    const scoreInercial = jogoFixo.reduce((s, n) => s + (pesoInercial[n] || 0), 0);

    const SCORE_MINIMO = 500;
    const MIN_DIST = 5, MAX_DIST = 20;
    const MAX_TRIES = 1500;

    container.innerHTML = "";
    const jogosValidos = [];

    if (qtdJogos > 0) {
      for (let j = 0; j < qtdJogos; j++) {
        let jogo, distancia, score;
        let tries = 0;

        while (true) {
          tries++;
          jogo = gerarJogoMesclado();
          if (!Array.isArray(jogo) || jogo.length !== 6) {
            if (tries > MAX_TRIES) break;
            continue;
          }

          distancia = calcularDistanciaMedia(jogo);
          score = jogo.reduce((s, n) => s + (pesoInercial[n] || 0), 0);

          if (score >= SCORE_MINIMO || (distancia >= MIN_DIST && distancia <= MAX_DIST)) {
            break;
          }
          if (tries > MAX_TRIES) break;
        }

        if (!jogo || jogo.length !== 6) continue;
        jogosValidos.push({ jogo, distancia, score, tries });
      }

      jogosValidos.sort((a, b) => b.score - a.score);

      jogosValidos.forEach((item, idx) => {
        const grupo = document.createElement("div");
        grupo.className = "grupo-jogo";
        grupo.style.marginBottom = "12px";

        const titulo = document.createElement("div");
        titulo.textContent = `üîπ Jogo ${idx + 1} ‚Äî Dist√¢ncia: ${item.distancia?.toFixed(2)} | Score: ${Math.round(item.score)} (tentativas: ${item.tries})`;
        titulo.style.fontWeight = "bold";
        titulo.style.marginBottom = "6px";
        titulo.style.color = "#00ffd5";
        grupo.appendChild(titulo);

        item.jogo.forEach(num => {
          const input = document.createElement("input");
          input.type = "number";
          input.value = num;
          input.className = "input-jogo";
          input.min = 1;
          input.max = 60;

          if (top5.has(num)) {
            input.style.backgroundColor = "#ff4500";
            input.style.color = "#fff";
            input.style.boxShadow = "0 0 6px #ff0000";
          } else if (top10.has(num)) {
            input.style.backgroundColor = "#ffa500";
            input.style.color = "#000";
            input.style.boxShadow = "0 0 6px #ffae42";
          } else {
            input.style.backgroundColor = "#303030";
            input.style.color = "#ffffff";
            input.style.boxShadow = "0 0 4px #00ffd5";
          }

          input.style.width = "48px";
          input.style.height = "48px";
          input.style.textAlign = "center";
          input.style.fontWeight = "bold";
          input.style.fontSize = "18px";
          input.style.borderRadius = "6px";
          input.style.border = "1px solid #3a3a3a";
          input.style.marginRight = "4px";

          grupo.appendChild(input);
        });

        container.appendChild(grupo);
      });
    }

    if (status) {
      status.innerText = "‚úÖ Jogos peneirados: todos os slots foram preenchidos com jogos v√°lidos!";
      status.style.color = "#00ffd5";
    }

    console.log("üìä Jogo fixo:", jogoFixo);
    console.log("üìê Dist√¢ncia m√©dia:", mediaDistancia?.toFixed(2));
    console.log("üìà Score inercial:", Math.round(scoreInercial));

  } catch (erro) {
    console.error("‚ùå Erro na an√°lise hist√≥rica:", erro);
    if (status) {
      status.innerText = `‚ùå Falha na an√°lise hist√≥rica: ${erro.message}`;
      status.style.color = "#ff6347";
    }
  }
}


async function jogosInversosALogica() {
  try {
    const qtd = parseInt(prompt("Quantos jogos deseja gerar? (1 a 100)", ""));
    if (isNaN(qtd) || qtd < 1 || qtd > 100) {
      alert("‚ùå Por favor, digite um n√∫mero entre 1 e 100.");
      return;
    }

    const container = document.getElementById("jogosInversosContainer");
    container.innerHTML = "";
    Object.assign(container.style, {
      display: "flex",
      flexDirection: "column",
      alignItems: "center"
    });

    const res = await fetch("MegaSena1.json");
    const dados = await res.json();

    const jogosSalvos = Object.values(dados).map(jogo => {
      const dezenas = Array.isArray(jogo)
        ? jogo
        : Array.isArray(jogo.dezenas)
          ? jogo.dezenas
          : [];
      return dezenas.slice().sort((a, b) => a - b).join(",");
    });

    // üîÅ contagem de frequ√™ncia (1‚Äì60)
    const contagem = {};
    for (let i = 1; i <= 60; i++) contagem[i] = 0;

    Object.values(dados).forEach(jogo => {
      const dezenas = Array.isArray(jogo)
        ? jogo
        : Array.isArray(jogo.dezenas)
          ? jogo.dezenas
          : [];
      dezenas.forEach(num => contagem[num]++);
    });

    const topFrequentes = Object.entries(contagem)
      .sort((a, b) => b[1] - a[1])
      .map(([num]) => parseInt(num));

    const top5 = topFrequentes.slice(0, 5);
    const top10 = topFrequentes.slice(5, 10);

    const criarSpan = (dezena) => {
      const span = document.createElement("span");
      span.textContent = String(dezena).padStart(2, '0');
      Object.assign(span.style, {
        fontWeight: "bold",
        textAlign: "center",
        width: "48px",
        height: "48px",
        lineHeight: "48px",
        fontSize: "18px",
        borderRadius: "6px",
        display: "inline-block",
        boxShadow: "0 0 4px #888",
        marginRight: "4px",
        backgroundColor: top5.includes(dezena)
          ? "#ff4d4d"
          : top10.includes(dezena)
            ? "#ffa500"
            : "#333",
        color: "#fff"
      });
      return span;
    };

    for (let j = 0; j < qtd; j++) {
      const titulo = document.createElement("div");
      titulo.textContent = `üéØ Jogo ${j + 1}:`;
      Object.assign(titulo.style, {
        color: "#00ffd5",
        fontWeight: "bold",
        margin: "12px 0 6px",
        fontSize: "16px"
      });
      container.appendChild(titulo);

      const jogo = [];

      // üîÅ l√≥gica inversa: escolhe dezenas menos frequentes
      const menosFrequentes = topFrequentes.slice(20); // pega do 21¬∫ em diante
      while (jogo.length < 6) {
        const idx = Math.floor(Math.random() * menosFrequentes.length);
        const n = menosFrequentes[idx];
        if (!jogo.includes(n)) jogo.push(n);
      }

      const final = jogo.slice(0, 6).sort((a, b) => a - b);
      const jogoString = final.join(",");
      const existeNoJson = jogosSalvos.includes(jogoString);

      const linha = document.createElement("div");
      Object.assign(linha.style, {
        display: "flex",
        flexWrap: "wrap",
        gap: "6px",
        marginBottom: "10px",
        justifyContent: "center"
      });

      final.forEach(dezena => linha.appendChild(criarSpan(dezena)));
      container.appendChild(linha);

      const status = document.createElement("div");
      status.innerHTML = existeNoJson
        ? "<span style='color:green;'>‚úÖ J√° existe no hist√≥rico</span>"
        : "<span style='color:red;'>üÜï In√©dito</span>";
      status.style.marginBottom = "6px";
      container.appendChild(status);
    }

    const legenda = document.createElement("div");
    legenda.style.fontSize = "13px";
    legenda.style.marginTop = "20px";
    legenda.innerHTML = `
      <strong>üé® Legenda de cores:</strong><br>
      üî¥ <span style="color:red; font-weight:bold;">Vermelho</span>: n√∫meros mais frequentemente sorteados (top 5)<br>
      üü† <span style="color:orange; font-weight:bold;">Laranja</span>: n√∫meros medianamente sorteados (top 6‚Äì10)<br>
      ‚ö´Ô∏è <span style="color:#333; font-weight:bold;">Preto</span>: n√∫meros menos sorteados (fora do top 10)
    `;
    container.appendChild(legenda);

    atualizarStatus(`‚úÖ ${qtd} jogo(s) gerado(s) com destaque por frequ√™ncia!`, "#00ffd5");
  } catch (error) {
    console.error("Erro ao carregar ou processar o JSON:", error);
    alert("‚ùå Falha ao gerar os jogos. Verifique o caminho do JSON ou o formato dos dados.");
  }
}

// ‚úÖ Preenche os inputs fixos com um array de 15 n√∫meros, mantendo a ordem original
function preencherInputs(numeros) {
  const inputs = document.querySelectorAll("#entradaTopo input");

  // Garante que o array seja v√°lido e preserve a ordem
  const conjuntoCorrigido = Array.isArray(numeros) ? numeros.slice(0, 15) : [];

  // Preenche os inputs na ordem exata recebida
  for (let i = 0; i < inputs.length; i++) {
    const valor = conjuntoCorrigido[i];
    inputs[i].value = Number.isInteger(valor) && valor >= 1 && valor <= 25 ? valor : "";
  }

  // Atualiza o topo visual com os n√∫meros originais
  atualizarTopo(conjuntoCorrigido);
}
function gerarJogoPromissor(historicoConcursos) {
  const frequencia = {};
  const triosRepetidos = new Set();
  const dezenasRecentes = new Set();

  // üîÅ Calcula frequ√™ncia de cada dezena
  Object.values(historicoConcursos).forEach(dezenas => {
    dezenas.forEach(n => {
      frequencia[n] = (frequencia[n] || 0) + 1;
    });

    // üîó Extrai trios recorrentes
    for (let i = 0; i < dezenas.length - 2; i++) {
      const trio = [dezenas[i], dezenas[i + 1], dezenas[i + 2]].sort((a, b) => a - b).join("-");
      triosRepetidos.add(trio);
    }
  });

  // üîç Define dezenas frias (menos frequentes)
  const todasDezenas = Array.from({ length: 25 }, (_, i) => i + 1);
  const frias = todasDezenas
    .filter(n => !frequencia[n] || frequencia[n] < 5); // ajuste o limiar conforme necess√°rio

  // üß† Define dezenas quentes (mais frequentes)
  const quentes = todasDezenas
    .filter(n => frequencia[n] >= 10) // ajuste o limiar conforme necess√°rio
    .sort((a, b) => frequencia[b] - frequencia[a]);

  // üìä Distribui√ß√£o por faixa
  const faixaBaixa = todasDezenas.filter(n => n >= 1 && n <= 8 && !frias.includes(n));
  const faixaMedia = todasDezenas.filter(n => n >= 9 && n <= 17 && !frias.includes(n));
  const faixaAlta = todasDezenas.filter(n => n >= 18 && n <= 25 && !frias.includes(n));

  // üî¢ Seleciona 5 de cada faixa
  const jogo = [];

  function sortearDezenas(faixa, qtd) {
    const selecionadas = [];
    const candidatos = faixa.slice();
    while (selecionadas.length < qtd && candidatos.length > 0) {
      const idx = Math.floor(Math.random() * candidatos.length);
      selecionadas.push(candidatos.splice(idx, 1)[0]);
    }
    return selecionadas;
  }

  jogo.push(...sortearDezenas(faixaBaixa, 5));
  jogo.push(...sortearDezenas(faixaMedia, 5));
  jogo.push(...sortearDezenas(faixaAlta, 5));

  // üîó Tenta incluir um trio recorrente
  const trioArray = Array.from(triosRepetidos);
  if (trioArray.length > 0) {
    const trio = trioArray[Math.floor(Math.random() * trioArray.length)]
      .split("-")
      .map(n => parseInt(n, 10));

    trio.forEach(n => {
      if (!jogo.includes(n) && jogo.length < 15) jogo.push(n);
    });
  }

  // üîÅ Completa at√© 15 dezenas se necess√°rio
  while (jogo.length < 15) {
    const candidatos = quentes.filter(n => !jogo.includes(n));
    const n = candidatos[Math.floor(Math.random() * candidatos.length)];
    if (n) jogo.push(n);
  }

  return jogo.slice(0, 15).sort((a, b) => a - b);
}

// ‚úÖ Busca os trios mais comuns via PHP
async function verTriosMaisComuns() {
  const resultado = document.getElementById("resultadoBitcoin");
  if (!resultado) return;

  atualizarStatus("üîç Lendo JSON e calculando trios mais comuns da Mega-Sena...", "#4682b4");

  try {
    // L√™ o JSON gerado pelo Python
    const res = await fetch("MegaSena1.json");
    if (!res.ok) throw new Error(`Erro HTTP ${res.status}`);

    const concursos = await res.json();

    // Mapear todos os trios
    const contadorTrios = {};

    Object.values(concursos).forEach(dezenas => {
      if (Array.isArray(dezenas) && dezenas.length === 6) {
        // Gera todas combina√ß√µes de 3 dezenas dentro das 6
        for (let i = 0; i < dezenas.length - 2; i++) {
          for (let j = i + 1; j < dezenas.length - 1; j++) {
            for (let k = j + 1; k < dezenas.length; k++) {
              const trio = [dezenas[i], dezenas[j], dezenas[k]].sort((a, b) => a - b);
              const chave = trio.join("-");
              contadorTrios[chave] = (contadorTrios[chave] || 0) + 1;
            }
          }
        }
      }
    });

    // Ordena por frequ√™ncia
    const triosOrdenados = Object.entries(contadorTrios)
      .map(([trio, ocorrencias]) => ({
        trio: trio.split("-").map(Number),
        ocorrencias,
        porcentagem: ((ocorrencias / Object.keys(concursos).length) * 100).toFixed(2)
      }))
      .sort((a, b) => b.ocorrencias - a.ocorrencias);

    if (triosOrdenados.length === 0) {
      atualizarStatus("‚ö†Ô∏è Nenhum trio encontrado.", "#ff9900");
      resultado.innerHTML = `<p style="color: orange;">‚ö†Ô∏è Nenhum trio encontrado.</p>`;
      return;
    }

    // Monta resultado
    let html = `<strong>üìä Trios mais comuns da Mega-Sena:</strong><br><ul style="list-style:none; padding-left:0;">`;

    triosOrdenados.slice(0, 30).forEach((item, index) => {
      const trioStr = item.trio.join(" - ");
      html += `<li>üî¢ <strong>${trioStr}</strong> ‚Äî ${item.ocorrencias}x (${item.porcentagem}%)</li>`;
      if ((index + 1) % 3 === 0) html += `<hr>`;
    });

    html += `</ul>`;
    resultado.innerHTML = html;
    atualizarStatus("‚úÖ Trios mais comuns da Mega-Sena calculados!", "#00ffd5");

  } catch (err) {
    console.error("Erro ao processar JSON:", err);
    atualizarStatus("‚ùå Falha ao processar JSON.", "#ff6347");
    resultado.innerHTML = `
      <p style="color: red;">‚ö†Ô∏è N√£o foi poss√≠vel calcular os trios. Verifique o arquivo JSON.</p>
    `;
  }
}
 function limparTudo() {
  // üîÑ Limpa todos os inputs num√©ricos da p√°gina
  document.getElementById("infoConcurso").textContent = "";
  const inputsNumericos = document.querySelectorAll('input[type="number"]');
  inputsNumericos.forEach(input => {
    input.value = "";
    input.style.backgroundColor = "";
    input.style.color = "";
    input.style.fontWeight = "";
    input.style.fontFamily = "";
    input.classList.remove("highlight", "error");
  });

  // üîÑ Limpa todos os inputs de texto dentro da div #entrada
  const inputsTexto = document.querySelectorAll('#entrada input[type="text"]');
  inputsTexto.forEach(input => {
    input.value = "";
    input.style.backgroundColor = "";
    input.style.color = "";
    input.style.fontWeight = "";
    input.style.fontFamily = "";
    input.classList.remove("highlight", "error");
  });

  // üßπ Limpa etiquetas de n√∫meros digitados
  const labelsTopo = document.getElementById("labelsTopo");
  if (labelsTopo) labelsTopo.innerHTML = "";

  // üßπ Limpa resultado final
  const resultado = document.getElementById("resultado");
  if (resultado) resultado.innerHTML = "";

  // üßπ Limpa campo de sa√≠da
  const output = document.getElementById("output");
  if (output) output.textContent = "";

  // üßπ Limpa status
  atualizarStatus("üßπ Interface limpa com sucesso!", "#00ffd5");

  // üßπ Limpa painel de Bitcoin (se existir)
  const resultadoBitcoin = document.getElementById("resultadoBitcoin");
  if (resultadoBitcoin) resultadoBitcoin.innerHTML = "";

  // üßπ Limpa painel do √∫ltimo concurso
  const topo = document.getElementById("ultimoConcursoTopo");
  if (topo) topo.innerHTML = "";

  // üßπ Limpa vari√°veis globais
  window.jogoFixo = [];
  window.maisFrequentes = [];
  window.previstosEconometricamente = [];

  // üßπ Limpa jogos gerados
  const container = document.getElementById("jogosGerados");
  if (container) container.innerHTML = "";

  // üßπ Limpa an√°lise estat√≠stica
  const analise = document.getElementById("analiseEstatistica");
  if (analise) analise.innerHTML = "";

  // üßπ Limpa lista de concursos
  const lista = document.getElementById("listaConcursos");
  if (lista) lista.innerHTML = "";

  // üßπ Limpa barra de progresso
  const barra = document.getElementById("barraProgresso");
  if (barra) {
    barra.style.transition = "width 0.3s ease";
    barra.style.width = "0%";
  }

  // üßπ Limpa qualquer outro painel de concursos (se existir)
  const painelConcursos = document.getElementById("painelConcursos");
  if (painelConcursos) painelConcursos.innerHTML = "";

  // üßπ Limpa hist√≥rico de concursos (se armazenado localmente)
  localStorage.removeItem("ultimosConcursos");

  // üßπ Limpa tabela de concursos (se existir)
  const tabela = document.querySelector("#tabelaConcursos tbody");
  if (tabela) tabela.innerHTML = "";

  // üßπ Limpa alertas ou mensagens extras
  const alertas = document.getElementById("alertas");
  if (alertas) alertas.innerHTML = "";

  // üßπ Limpa os jogos inversos √† l√≥gica
  const jogosInversos = document.getElementById("jogosInversosContainer");
  if (jogosInversos) jogosInversos.innerHTML = "";
}
 
 
 
 function atualizarStatus(msg, cor = "#333") {
  const status = document.getElementById("statusMsg");
  if (status) {
    status.textContent = msg;
    status.style.color = cor;
  }
}

function atualizarTopo(dezenas) {
  const inputs = document.querySelectorAll('#entradaTopo input');
  dezenas.forEach((n, i) => {
    if (inputs[i]) {
      inputs[i].value = String(n).padStart(2, '0');
      inputs[i].style = `
        background-color: #f0f8ff;
        font-weight: bold;
        font-family: 'Orbitron', Arial, sans-serif;
        color: #000;
        text-align: center;
      `;
    }
  });
}
 
 
 
 
function avaliarConjuntoPython() {
  const inputs = document.querySelectorAll('#entradaTopo input');
  const numeros = [];

  // Captura e valida os n√∫meros (1 a 60)
  inputs.forEach(input => {
    let valor = parseInt(input.value);
    if (isNaN(valor)) {
      const limpo = input.value.replace(/\D/g, '');
      valor = parseInt(limpo);
    }
    numeros.push(Number.isInteger(valor) && valor >= 1 && valor <= 60 ? valor : null);
  });

  const conjuntoCorrigido = numeros.filter(n => n !== null);

  // Verifica se tem 6 n√∫meros v√°lidos
  if (conjuntoCorrigido.length !== 6) {
    atualizarStatus(`‚ö†Ô∏è Conjunto inv√°lido: ${conjuntoCorrigido.length}/6 n√∫meros v√°lidos.`, "#ff9900");
    return;
  }

  // Verifica duplicados
  const conjuntoUnico = [...new Set(conjuntoCorrigido)];
  if (conjuntoUnico.length !== 6) {
    atualizarStatus("‚ö†Ô∏è Conjunto inv√°lido: n√∫meros repetidos detectados.", "#ff9900");
    return;
  }

  atualizarTopo(conjuntoUnico);

  // Estat√≠sticas
  const soma_total = conjuntoUnico.reduce((a, b) => a + b, 0);
  const pares = conjuntoUnico.filter(n => n % 2 === 0).length;
  const impares = 6 - pares;

  // Distribui√ß√£o por linhas e colunas (Mega-Sena: 10 linhas √ó 6 colunas)
  const distribuicao = { linhas: {}, colunas: {} };
  for (let i = 1; i <= 10; i++) distribuicao.linhas[i] = 0;
  for (let j = 1; j <= 6; j++) distribuicao.colunas[j] = 0;

  conjuntoUnico.forEach(n => {
    const linha = Math.floor((n - 1) / 6) + 1;
    const coluna = ((n - 1) % 6) + 1;
    distribuicao.linhas[linha]++;
    distribuicao.colunas[coluna]++;
  });

  // Detecta sequ√™ncias consecutivas
  const sequencias_comuns = [];
  const ordenado = [...conjuntoUnico].sort((a, b) => a - b);
  for (let i = 0; i < ordenado.length - 1; i++) {
    if (ordenado[i + 1] === ordenado[i] + 1) {
      sequencias_comuns.push([ordenado[i], ordenado[i + 1]]);
    }
  }

  // Monta resultado (mant√©m layout neon)
  const resultado = document.getElementById("resultadoBitcoin");
  let html = `
    <strong>üìä Avalia√ß√£o Mega-Sena:</strong><br>
    <ul style="list-style:none; padding-left:0;">
      <li>üßÆ Soma total: <strong>${soma_total}</strong></li>
      <li>‚öñÔ∏è Pares: <strong>${pares}</strong> | √çmpares: <strong>${impares}</strong></li>
      <li>üîç Sequ√™ncias consecutivas detectadas: <strong>${sequencias_comuns.length}</strong></li>
  `;

  if (sequencias_comuns.length) {
    html += `<li>üîó Sequ√™ncias encontradas: <strong>${sequencias_comuns.map(t => t.join("-")).join(", ")}</strong></li>`;
  }

  html += `</ul>`;

  const linhas = Object.entries(distribuicao.linhas).map(([l, q]) => `L${l}: ${q}`).join(" | ");
  const colunas = Object.entries(distribuicao.colunas).map(([c, q]) => `C${c}: ${q}`).join(" | ");
  html += `<p>üß© Distribui√ß√£o:<br><strong>${linhas}</strong><br><strong>${colunas}</strong></p>`;

  resultado.innerHTML = html;
  atualizarStatus("‚úÖ Avalia√ß√£o conclu√≠da com sucesso!", "#00ffd5");
}

  // ‚úÖ Limpa toda a interface visual e dados
  function limparInterfaceCompleta() {
    const campos = [
      "resultadoBitcoin", "jogosGerados", "analiseEstatistica",
      "statusImportacao", "labelsTopo", "ultimoConcursoTopo", "infoUltimoConcurso",
      "tabelaTrios", "listaConcursos", "resultado", "output"
    ];
    campos.forEach(id => {
      const el = document.getElementById(id);
      if (el) el.innerHTML = "";
    });

    const concursoInput = document.getElementById("numeroConcurso");
    if (concursoInput) concursoInput.value = "";

    document.querySelectorAll("input").forEach(input => {
      input.value = "";
      input.style.backgroundColor = "";
      input.style.color = "";
      input.style.fontWeight = "";
      input.style.fontFamily = "";
    });

    window.jogoFixo = [];
    atualizarStatus("üßπ Interface limpa com sucesso!", "#00ffd5");
  }
  
  
  
  
  
  
 document.addEventListener("DOMContentLoaded", () => {
  const botao = document.getElementById("btnSortear");
  if (botao) {
    botao.addEventListener("click", sortearComLogica);
  }
});

async function sortearComLogica() {
  atualizarStatus("‚è≥ Aguarde: Sorteando do concurso 1 at√© hoje...", "#ff00ff");

  try {
    const res = await fetch("MegaSena1.json");
    if (!res.ok) throw new Error(`HTTP ${res.status}`);
    const dados = await res.json();

    // √öltimo concurso
    const chaves = Object.keys(dados).sort((a, b) => Number(a) - Number(b));
    const ultimaChave = chaves[chaves.length - 1];
    const concursoReferencia = Array.isArray(dados[ultimaChave])
      ? dados[ultimaChave]
      : Array.isArray(dados[ultimaChave]?.dezenas)
        ? dados[ultimaChave].dezenas
        : [];

    const infoConcurso = document.getElementById("infoConcurso");
    if (infoConcurso) {
      infoConcurso.textContent = `√öltimo concurso: ${ultimaChave}`;
    }

    const jogosOrdenados = Object.entries(dados)
      .map(([chave, jogo]) => {
        const dezenas = Array.isArray(jogo)
          ? jogo
          : Array.isArray(jogo?.dezenas)
            ? jogo.dezenas
            : null;
        return Array.isArray(dezenas) ? [chave, dezenas] : null;
      })
      .filter(Boolean)
      .sort((a, b) => parseInt(a[0]) - parseInt(b[0]));

    if (!jogosOrdenados.length) {
      atualizarStatus("‚ùå Nenhum jogo encontrado no JSON local.", "#ff0000");
      return;
    }

    const container = document.getElementById("jogosGerados");
    container.innerHTML = "";

    // Estat√≠sticas
    const estatisticas = {};
    for (let i = 1; i <= 60; i++) {
      estatisticas[i] = { freq: 0, freqRecente: 0, atraso: 0 };
    }

    const totalJogos = jogosOrdenados.length;
    const recentes = jogosOrdenados.slice(-50);

    jogosOrdenados.forEach(([_, jogo], index) => {
      jogo.forEach(num => {
        estatisticas[num].freq++;
        estatisticas[num].atraso = totalJogos - index;
      });
    });

    recentes.forEach(([_, jogo]) => {
      jogo.forEach(num => {
        estatisticas[num].freqRecente++;
      });
    });

    // Simula√ß√µes
    const simulados = [];
    for (let s = 0; s < 1000; s++) {
      const jogoSimulado = [];
      let score = 0;

      while (jogoSimulado.length < 6) {
        const n = Math.floor(Math.random() * 60) + 1;
        const e = estatisticas[n];
        const peso = e.freq * 1.2 + e.freqRecente * 2 - e.atraso * 0.5;
        if (Math.random() < peso / 100 && !jogoSimulado.includes(n)) {
          jogoSimulado.push(n);
          score += peso;
        }
      }

      simulados.push({ jogo: jogoSimulado, score });
    }

    const top9Simulados = simulados.sort((a, b) => b.score - a.score).slice(0, 9);

    top9Simulados.forEach((item, i) => {
      const grupo = document.createElement("div");
      grupo.className = "grupo-jogo";
      grupo.style.marginBottom = "12px";

      const titulo = document.createElement("div");
      titulo.textContent = `üîÆ Simulado ${i + 1} ‚Äî Score: ${item.score.toFixed(2)}`;
      Object.assign(titulo.style, {
        fontWeight: "bold",
        marginBottom: "4px",
        color: "#00ffcc",
        textShadow: "0 0 6px #00ffd5"
      });
      grupo.appendChild(titulo);

      item.jogo.sort((a, b) => a - b).forEach(num => {
        const span = document.createElement("span");
        span.textContent = String(num).padStart(2, '0');
        Object.assign(span.style, {
          display: "inline-block",
          width: "48px",
          height: "48px",
          lineHeight: "48px",
          textAlign: "center",
          fontWeight: "bold",
          fontSize: "18px",
          borderRadius: "6px",
          marginRight: "4px",
          boxShadow: "0 0 4px #ffd700",
          backgroundColor: concursoReferencia.includes(num) ? "#ffff66" : "#202020",
          color: concursoReferencia.includes(num) ? "#000000" : "#ffffff"
        });
        grupo.appendChild(span);
      });

      container.appendChild(grupo);
    });

    // Compara√ß√£o com concursos anteriores
    let melhorJogoChave = "";
    let maiorAcerto = 0;
    let totalAcima4 = 0;
    const destaques = [];

    jogosOrdenados.forEach(([chave, jogo]) => {
      if (chave === ultimaChave) return;

      let score = 0, soma = 0, acertos = 0;
      let quadrantes = [0, 0, 0, 0];
      let seq = 1, penalidadeSeq = 0;

      const ordenado = [...jogo].sort((a, b) => a - b);
      for (let i = 1; i < ordenado.length; i++) {
        if (ordenado[i] === ordenado[i - 1] + 1) {
          seq++;
          if (seq >= 3) penalidadeSeq = 3;
        } else {
          seq = 1;
        }
      }

      jogo.forEach(n => {
        const e = estatisticas[n];
        score += e.freq * 1.2 + e.freqRecente * 2 - e.atraso * 0.5;
        soma += n;
        if (n <= 15) quadrantes[0]++;
        else if (n <= 30) quadrantes[1]++;
        else if (n <= 45) quadrantes[2]++;
        else quadrantes[3]++;
        if (concursoReferencia.includes(n)) acertos++;
      });

      const penalidadeSoma = (soma < 100 || soma > 210) ? 3 : 0;
      const penalidadeQuadrantes = quadrantes.filter(q => q === 0).length >= 2 ? 3 : 0;
      const relevancia = score - penalidadeSeq - penalidadeSoma - penalidadeQuadrantes;

      const grupo = document.createElement("div");
      grupo.className = "grupo-jogo";
      grupo.style.marginBottom = "12px";

      const titulo = document.createElement("div");
      titulo.textContent = `Jogo ${chave} ‚Äî ${acertos} acertos ‚Äî Relev√¢ncia: ${relevancia.toFixed(2)}`;
      Object.assign(titulo.style, {
        fontWeight: "bold",
        marginBottom: "4px",
        color: acertos >= 4 ? "#ffeb3b" : "#ffffff",
        textShadow: acertos >= 4 ? "0 0 6px #ffff66" : "none"
      });
      grupo.appendChild(titulo);

      ordenado.forEach(num => {
        const span = document.createElement("span");
        span.textContent = String(num).padStart(2, '0');
        Object.assign(span.style, {
          display: "inline-block",
          width: "48px",
          height: "48px",
          lineHeight: "48px",
          textAlign: "center",
          fontWeight: "bold",
          fontSize: "18px",
          borderRadius: "6px",
          marginRight: "4px",
          boxShadow: "0 0 4px #00ffd5",
          backgroundColor: concursoReferencia.includes(num) ? "#ffff66" : "#303030",
          color: concursoReferencia.includes(num) ? "#000000" : "#ffffff"
        });
        grupo.appendChild(span);
      });

      if (acertos > maiorAcerto) {
        maiorAcerto = acertos;
        melhorJogoChave = chave;
      }

      if (chave !== ultimaChave && acertos >= 4) {
        totalAcima4++;
        destaques.push(grupo);
      } else {
        container.appendChild(grupo);
      }
    });

       if (destaques.length > 0) {
      const tituloDestaque = document.createElement("div");
      tituloDestaque.textContent = `üåü Esses concursos anteriores acertaram 4 ou mais dezenas do concurso ${ultimaChave}:`;
      Object.assign(tituloDestaque.style, {
        fontWeight: "bold",
        color: "#ffeb3b",
        marginBottom: "12px"
      });
      container.prepend(tituloDestaque);
      destaques.reverse().forEach(grupo => container.prepend(grupo));
    }

    atualizarStatus(`üîç Jogo ${melhorJogoChave} teve ${maiorAcerto} acertos com base no concurso ${ultimaChave}!`, "#00ff80");

    const resumo = document.createElement("div");
    resumo.textContent = `üìä ${totalAcima4} concursos anteriores tiveram 4 ou mais acertos em rela√ß√£o ao concurso ${ultimaChave}.`;
    Object.assign(resumo.style, {
      fontWeight: "bold",
      color: "#00bfff",
      marginTop: "16px"
    });
    container.appendChild(resumo);

  } catch (erro) {
    console.error("‚ùå Erro ao acessar o arquivo JSON:", erro);
    atualizarStatus("‚ùå Falha ao acessar MegaSena1.json. Verifique se o formato est√° correto.", "#ff6347");
  }
}

function atualizarStatus(texto, cor) {
  const status = document.getElementById("statusImportacao");
  if (status) {
    status.innerText = texto;
    status.style.color = cor;
  }
}
		
		
		
</script>

   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

	
	
<script>
  async function gerarBloco() {
  for (let i = 0; i < JOGOS_POR_BLOCO; i++) {
    const jogo = gerarJogoAleatorio();
    const acertos = jogo.filter(n => window.jogoFixo.includes(n)).length;
    const frequentesNoJogo = jogo.filter(n => window.maisFrequentes.includes(n)).length;
    const previstosNoJogo = jogo.filter(n => window.previstosEconometricamente.includes(n)).length;

    const progressoTotal = blocoAtual * JOGOS_POR_BLOCO + i;
    const progressoPercentual = (progressoTotal / TOTAL_JOGOS) * 100;
    atualizarBarra(progressoPercentual);

    if (acertos >= 12 || (frequentesNoJogo >= 8 && previstosNoJogo >= 6)) {
      const div = document.createElement("div");
      div.className = "jogo-comparativo";

      const grupo = document.createElement("div");
      grupo.style.display = "flex";
      grupo.style.flexWrap = "wrap";
      grupo.style.gap = "4px";

      jogo.forEach(num => {
        const el = document.createElement("div");
        el.className = "label";
        el.textContent = num;
        if (window.jogoFixo.includes(num)) {
          el.classList.add("sorteado");
        }
        grupo.appendChild(el);
      });

      const status = await verificarRepeticaoHistorica(jogo);
      const contador = document.createElement("div");
      const origem = acertos >= 12 ? "üéØ por acertos" : "üìà por tend√™ncia";
      contador.textContent = `Acertos: ${acertos} ${origem} ${status}`;
      contador.style.marginTop = "8px";
      contador.style.fontWeight = "bold";
      div.appendChild(grupo);
      div.appendChild(contador);

      if (status.includes("üü¢")) {
        document.getElementById("jogosIneditosContainer").appendChild(div);
      } else {
        document.getElementById("jogosGerados").appendChild(div);
      }

      jogosComAcertos++;
    }
  }

  blocoAtual++;

  if (blocoAtual < BLOCOS) {
    setTimeout(() => gerarBloco(), 50);
  } else {
    pararCronometro();
    finalizarBarra();

    atualizarStatus(
      jogosComAcertos === 0
        ? "üîÅ Nenhum jogo relevante encontrado."
        : `üìä Foram encontrados ${jogosComAcertos} jogos com alto potencial!`,
      jogosComAcertos === 0 ? "#ff4500" : "#228B22"
    );
  }
}

  function sortearAleatorios(array, quantidade) {
    const embaralhado = [...array];
    for (let i = embaralhado.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [embaralhado[i], embaralhado[j]] = [embaralhado[j], embaralhado[i]];
    }
    return embaralhado.slice(0, quantidade);
  }

  function carregarCombinacoesReais() {
    atualizarStatus("‚ö†Ô∏è Fun√ß√£o 'carregarCombinacoesReais' ainda n√£o implementada.", "#ff9900");
  }

async function prepararPromissor() {
  if (window._promissorBusy) {
    atualizarStatus("‚è≥ Aguarde: gera√ß√£o em andamento.", "#ffcc00");
    return;
  }
  window._promissorBusy = true;

  const triggerBtn = document.getElementById("btnPromissor");
  if (triggerBtn) {
    triggerBtn.disabled = true;
    triggerBtn.style.opacity = "0.6";
    triggerBtn.style.cursor = "not-allowed";
  }

  try {
    // Carrega JSON local da Mega-Sena
    const response = await fetch("http://localhost/MEGASENA/MegaSena1.json");
    if (!response.ok) throw new Error("Arquivo local indispon√≠vel");

    const concursos = await response.json();
    if (!concursos || typeof concursos !== "object") {
      throw new Error("Hist√≥rico vazio ou inv√°lido");
    }

    // Frequ√™ncia dos n√∫meros (1‚Äì60)
    const frequencia = Array(61).fill(0);
    Object.values(concursos).forEach(dezenas => {
      if (Array.isArray(dezenas)) {
        dezenas.forEach(num => {
          const numero = Number(num);
          if (!isNaN(numero) && numero >= 1 && numero <= 60) {
            frequencia[numero]++;
          }
        });
      }
    });

    // Organiza por frequ√™ncia
    const numerosComFrequencia = [];
    for (let i = 1; i <= 60; i++) {
      numerosComFrequencia.push({ numero: i, freq: frequencia[i] });
    }
    numerosComFrequencia.sort((a, b) => a.freq - b.freq);

    // Sele√ß√£o principal: 3 menos + 3 mais
    const menosFrequentes = numerosComFrequencia.slice(0, 10).map(n => n.numero);
    const maisFrequentes = numerosComFrequencia.slice(-10).map(n => n.numero);

    function sortearAleatorios(array, quantidade) {
      const copia = [...array];
      const resultado = [];
      while (resultado.length < quantidade && copia.length > 0) {
        const idx = Math.floor(Math.random() * copia.length);
        resultado.push(copia.splice(idx, 1)[0]);
      }
      return resultado;
    }

    // Jogo promissor principal (Mega-Sena = 6 dezenas)
    const selecionados = [
      ...sortearAleatorios(menosFrequentes, 3),
      ...sortearAleatorios(maisFrequentes, 3)
    ];
    const promissor = selecionados.sort((a, b) => a - b);

    window.jogoFixo = promissor;

    // ‚úÖ Preenche apenas os primeiros inputs j√° existentes (n√£o recria nada)
    if (typeof preencherInputs === "function") preencherInputs(promissor);

    // Pergunta quantos extras
    const entrada = prompt("Quantos jogos adicionais deseja gerar?");
    const qtdJogos = parseInt(entrada ?? "", 10);

    if (!isNaN(qtdJogos) && qtdJogos > 0) {
      const limite = Math.min(qtdJogos, 20);
      const jogosExtras = [];
      for (let i = 0; i < limite; i++) {
        const jogo = [
          ...sortearAleatorios(menosFrequentes, 3),
          ...sortearAleatorios(maisFrequentes, 3)
        ].sort((a, b) => a - b);
        jogosExtras.push(jogo);
      }

      let resultadoExtras = document.getElementById("resultadoExtras");
      if (!resultadoExtras) {
        resultadoExtras = document.createElement("div");
        resultadoExtras.id = "resultadoExtras";
        resultadoExtras.style.marginTop = "30px";
        document.body.appendChild(resultadoExtras);
      }

      let html = `<p style="margin-top:20px; color:#ffcc00; font-weight:bold;">üé∞ Jogos adicionais (${limite}):</p><ul style="list-style:none; padding-left:0;">`;
      jogosExtras.forEach((jogo, i) => {
        html += `
          <li style="
            margin-top:20px;
            font-size:18px;
            font-family:'Orbitron', sans-serif;
            color:#ffffff;
            text-shadow:0 0 8px #00ffd5, 0 0 12px #00ffd5;
          ">
            <strong style="color:#ff00ff; text-shadow:0 0 6px #ff00ff;">Jogo ${i + 1}:</strong><br>
            <span style="color:#00ffd5; font-weight:bold; text-shadow:0 0 10px #00ffd5;">
              ${jogo.join(" ... ")}
            </span>
          </li>
        `;
      });
      html += `</ul>`;
      resultadoExtras.innerHTML = html;
    }

    atualizarStatus("üéØ Jogo promissor pronto (Mega-Sena)!", "#00ffd5");
  } catch (error) {
    console.error("‚ùå Erro ao preparar jogo promissor (local):", error);
    atualizarStatus("‚ùå Erro ao gerar jogo promissor com dados locais.", "#ff0000");
  } finally {
    window._promissorBusy = false;
    if (triggerBtn) {
      triggerBtn.disabled = false;
      triggerBtn.style.opacity = "1";
      triggerBtn.style.cursor = "pointer";
    }
  }
}
</script>

<script>
  function temSequenciaLonga(jogo) {
    const ordenado = [...jogo].sort((a, b) => a - b);
    let count = 1;
    for (let i = 1; i < ordenado.length; i++) {
      if (ordenado[i] === ordenado[i - 1] + 1) {
        count++;
        if (count >= 4) return true;
      } else {
        count = 1;
      }
    }
    return false;
  }

  function distribuicaoLinhaColuna(jogo) {
    const linhas = [[], [], [], [], []];
    const colunas = [[], [], [], [], []];
    jogo.forEach(n => {
      const linha = Math.floor((n - 1) / 5);
      const coluna = (n - 1) % 5;
      linhas[linha].push(n);
      colunas[coluna].push(n);
    });
    return {
      linhasOK: linhas.filter(l => l.length >= 2 && l.length <= 4).length >= 3,
      colunasOK: colunas.filter(c => c.length >= 2 && c.length <= 4).length >= 3
    };
  }

  function analisarJogo(jogo) {
    const molduraBase = [1, 2, 3, 4, 5, 6, 10, 15, 20, 21, 22, 23, 24, 25];
    const moldura = molduraBase.filter(() => Math.random() > 0.3);
    const numerosMoldura = jogo.filter(n => moldura.includes(n)).length;
    const pares = jogo.filter(n => n % 2 === 0).length;
    const soma = jogo.reduce((a, b) => a + b, 0);
    return { moldura: numerosMoldura, pares, soma };
  }
  
  
 
function registrarConcursoNaMemoria(concursoStr, dezenasArray) {
  if (!window.concursoCache) window.concursoCache = {};
  window.concursoCache[concursoStr] = dezenasArray;
}

async function buscarConcursoEspecifico() {
  const numero = prompt("Digite o n√∫mero do concurso que deseja buscar:");
  const concursoInt = parseInt(numero);
  if (!numero || isNaN(concursoInt) || concursoInt < 1) {
    return alert("‚ö†Ô∏è N√∫mero de concurso inv√°lido.");
  }

  const concursoStr = String(concursoInt);
  const infoConcurso = document.getElementById("infoConcurso");
  const inputsTopo = document.querySelectorAll('#entradaTopo input');

  infoConcurso.textContent = "üîÑ Buscando concurso...";
  infoConcurso.style.color = "#4682b4";

  let dezenas = null;

  // üîÅ 1. Busca no JSON local
  try {
    const res = await fetch("MegaSena1.json", { cache: "no-store" });
    const concursos = await res.json();
    const dados = concursos[concursoStr];
    if (Array.isArray(dados)) {
      dezenas = dados;
    } else if (dados && Array.isArray(dados.dezenas)) {
      dezenas = dados.dezenas;
    }
    if (dezenas) {
      console.log(`‚úÖ JSON local respondeu com o concurso ${concursoStr}`);
    }
  } catch (e) {
    console.warn("‚ùå Erro ao buscar do JSON local:", e);
  }

  // üåê 2. Fallback via backend PHP + Python
  if (!dezenas) {
    try {
      const res = await fetch(`buscar_concurso.php?concurso=${concursoStr}`);
      const dados = await res.json();
      if (Array.isArray(dados.dezenas) && dados.dezenas.length === 6) {
        dezenas = dados.dezenas;
        console.log(`‚úÖ Concurso ${concursoStr} carregado via PHP + Python`);
      } else {
        console.warn("‚ö†Ô∏è PHP respondeu, mas sem dezenas v√°lidas:", dados);
      }
    } catch (e) {
      console.warn("‚ùå Erro ao buscar concurso via backend PHP:", e);
    }
  }

  // üß† 3. Fallback via cache interno
  if (!dezenas && window.concursoCache && window.concursoCache[concursoStr]) {
    dezenas = window.concursoCache[concursoStr];
    console.log(`üß† Concurso ${concursoStr} recuperado do cache interno`);
  }

  // ‚ùå Valida√ß√£o final
  const dezenasNumeros = Array.isArray(dezenas)
    ? dezenas.map(n => parseInt(n)).filter(n => !isNaN(n) && n >= 1 && n <= 60)
    : [];

  if (dezenasNumeros.length !== 6) {
    infoConcurso.textContent = "‚ùå Concurso n√£o encontrado.";
    infoConcurso.style.color = "red";
    return alert(`‚ùå Concurso ${concursoStr} n√£o encontrado ou incompleto.`);
  }

  // ‚úÖ Preenche os inputs em ordem crescente
  const ordenadas = [...dezenasNumeros].sort((a, b) => a - b);
  const formatadas = ordenadas.map(n => String(n).padStart(2, '0'));
  formatadas.forEach((num, i) => {
    if (inputsTopo[i]) {
      inputsTopo[i].value = num;
      inputsTopo[i].style = `
        background-color: #f0f8ff;
        font-weight: bold;
        font-family: 'Orbitron', Arial, sans-serif;
        color: #000;
        text-align: center;
        border: 2px solid #00ffd5;
        border-radius: 6px;
        padding: 6px;
        font-size: 19px;
      `;
    }
  });

  infoConcurso.textContent = `Concurso n¬∫: ${concursoStr}`;
  infoConcurso.style.color = "#00ffd5";
  infoConcurso.style.fontSize = "24px";
  infoConcurso.style.borderBottom = "2px solid #00ffd5";

  window.jogoFixo = dezenasNumeros;
  if (!window.concursoCache) window.concursoCache = {};
  window.concursoCache[concursoStr] = dezenasNumeros;

  alert(`‚úÖ Concurso ${concursoStr} carregado:\n${formatadas.join(" - ")}`);
}

  // ‚úÖ Cron√¥metro retr√¥ + barra sincronizada
  let cronometroInterval;
  let segundosDecorridos = 0;
  const DURACAO_ESTIMADA_SEGUNDOS = 250;

  function iniciarCronometro() {
    const cronometro = document.getElementById("cronometroRetro");
    if (!cronometro) return;

    segundosDecorridos = 0;
    cronometro.textContent = "‚è±Ô∏è 00:00";

    clearInterval(cronometroInterval);
    cronometroInterval = setInterval(() => {
      segundosDecorridos++;
      const minutos = String(Math.floor(segundosDecorridos / 60)).padStart(2, '0');
      const segundos = String(segundosDecorridos % 60).padStart(2, '0');
      cronometro.textContent = `‚è±Ô∏è ${minutos}:${segundos}`;

      const progressoPercentual = Math.min((segundosDecorridos / DURACAO_ESTIMADA_SEGUNDOS) * 100, 100);
      atualizarBarra(progressoPercentual);
    }, 1000);
  }

  function pararCronometro() {
    clearInterval(cronometroInterval);
  }

  function reiniciarBarra() {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = "0%";
      barra.style.display = "block";
    }
  }

  function atualizarBarra(progressoPercentual) {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = `${progressoPercentual}%`;
    }
  }

  function finalizarBarra() {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = "100%";
      setTimeout(() => {
        barra.style.display = "none";
      }, 1000);
    }
  }
  
  
async function atualizarTodosConcursos() {
  const status = document.getElementById("statusAtualizacao");
  status.textContent = "‚è≥ Atualizando concursos...";
  status.style.color = "#4682b4";
  status.style.fontWeight = "bold";

  try {
    const res = await fetch("atualizar_megas.php");

    // Verifica se o PHP respondeu OK
    if (!res.ok) {
      throw new Error(`Resposta HTTP inv√°lida: ${res.status}`);
    }

    let dados;
    try {
      dados = await res.json();
    } catch (parseError) {
      throw new Error("Resposta n√£o est√° em formato JSON v√°lido");
    }

    // 1. Erro real do PHP/Python (quando 'erro' tem conte√∫do)
    if (dados.erro && dados.erro !== null && dados.erro !== "") {
      status.textContent = `üö´ Erro na atualiza√ß√£o: ${dados.erro}`;
      status.style.color = "#cc0000";
      status.style.fontSize = "16px";
      status.style.fontWeight = "bold";
      console.error("Log completo do erro:", dados.log);
      return;
    }

    // 2. Novos concursos adicionados
    if (dados.sucesso) {
      status.textContent = `üéâ ${dados.novos} concurso(s) atualizado(s) com sucesso!`;
      status.style.color = "#00aa00";
      status.style.fontSize = "18px";
      status.style.fontWeight = "bold";

      // Importa o √∫ltimo concurso atualizado
      if (typeof importarUltimos === "function") {
        await importarUltimos();
      }
      return;
    }

    // 3. Nenhum concurso novo (j√° atualizado)
    const numeroUltimo = (typeof dados.ultimoSalvo === "number") ? dados.ultimoSalvo : "n√£o identificado";
    const numeroDisponivel = (typeof dados.ultimoDisponivel === "number") ? dados.ultimoDisponivel : "n√£o identificado";

    status.textContent =
      `üìå Tudo atualizado! ` +
      `Aguarde o pr√≥ximo sorteio da Mega-Sena.`; // ‚úÖ Corrigido para Mega-Sena
    status.style.color = "#4682b4";
    status.style.fontSize = "16px";
    status.style.fontWeight = "bold";

  } catch (e) {
    // 4. Falha de comunica√ß√£o ou JSON inv√°lido
    status.textContent =
      "üö´ Ops! Tivemos um problema na atualiza√ß√£o. Por favor, tente novamente em alguns instantes.";
    status.style.color = "#cc0000";
    status.style.fontSize = "16px";
    status.style.fontWeight = "bold";
    console.error("Detalhes do erro:", e);
  }
}
   
  
async function importarUltimos() {
  const infoConcurso = document.getElementById("infoConcurso");
  const inputsTopo = document.querySelectorAll('#entradaTopo input');
  infoConcurso.textContent = "‚è≥ Buscando √∫ltimo concurso...";
  infoConcurso.style.color = "#4682b4";

  let ultimaChave = null;
  let dezenas = null;

  try {
    // for√ßa o navegador a buscar vers√£o nova do JSON (evita cache)
    const res = await fetch("MegaSena1.json?nocache=" + Date.now());
    const dados = await res.json();
    console.log("üîé JSON carregado:", dados);

    // pega todas as chaves num√©ricas
    const chaves = Object.keys(dados)
      .map(k => parseInt(k))
      .filter(n => !isNaN(n));

    const maiorConcurso = Math.max(...chaves);

    // acessa a chave como string
    let lista = dados[String(maiorConcurso)];

    // corrige dezenas: converte para n√∫mero e remove inv√°lidos
    if (Array.isArray(lista)) {
      dezenas = lista
        .map(n => parseInt(n))
        .filter(n => Number.isInteger(n) && n >= 1 && n <= 60);

      if (dezenas.length === 6) {
        ultimaChave = maiorConcurso;
      }
    }
  } catch (e) {
    console.warn("‚ùå Erro ao carregar JSON local:", e);
  }

  // valida√ß√£o final
  if (!dezenas || dezenas.length !== 6 || !ultimaChave) {
    infoConcurso.textContent = "‚ùå √öltimo concurso n√£o encontrado ou incompleto.";
    infoConcurso.style.color = "red";
    alert("‚ö†Ô∏è N√£o foi poss√≠vel carregar o √∫ltimo concurso.");
    return;
  }

  // formata dezenas em ordem crescente
  const formatadas = dezenas.sort((a, b) => a - b).map(n => String(n).padStart(2, '0'));

  // joga nos inputs do topo
  formatadas.forEach((num, i) => {
    if (inputsTopo[i]) {
      inputsTopo[i].value = num;
      Object.assign(inputsTopo[i].style, {
        backgroundColor: "#000000",
        fontWeight: "bold",
        fontFamily: "'Orbitron', Arial, sans-serif",
        color: "#FFA500",
        textAlign: "center",
        border: "2px solid #00ffd5",
        borderRadius: "6px",
        padding: "6px",
        fontSize: "19px"
      });
    }
  });

  // exibe info do concurso
  infoConcurso.textContent = `Concurso n¬∫ ${ultimaChave}`;
  Object.assign(infoConcurso.style, {
    color: "#00ffd5",
    fontSize: "24px",
    borderBottom: "2px solid #00ffd5"
  });

  // guarda em vari√°vel global para uso em outras fun√ß√µes
  window.jogoFixo = dezenas;

  alert(`‚úÖ √öltimo concurso ${ultimaChave} carregado:\n${formatadas.join(" - ")}`);
}


async function sorteioBitcoin() {
  const entradaTopo = document.querySelectorAll('#entradaTopo input');
const resultado = document.getElementById("resultadoBitcoin");

resultado.innerHTML = "";
resultado.style.display = "flex";
resultado.style.flexDirection = "column";
resultado.style.alignItems = "center";
resultado.style.padding = "20px";
resultado.style.boxSizing = "border-box";

// üîπ Agora n√£o importa quantos inputs existem no HTML
const numerosOriginais = Array.from(entradaTopo)
  .map(input => parseInt(input.value))
  .filter((val, idx, arr) => !isNaN(val) && val >= 1 && val <= 60 && arr.indexOf(val) === idx)
  .slice(0, 6); // ‚úÖ pega s√≥ os 6 primeiros v√°lidos

if (numerosOriginais.length !== 6) {
  resultado.innerHTML = "<p style='color:red; font-weight:bold;'>‚ö†Ô∏è Preencha pelo menos 6 dezenas v√°lidas no topo antes de sortear.</p>";
  return;
}

  // üîπ Prompt para escolher quantos jogos gerar
  let qtdJogos = parseInt(prompt("Quantos jogos deseja gerar? (1 a 100)"), 10);
  if (isNaN(qtdJogos) || qtdJogos < 1 || qtdJogos > 100) {
    alert("Valor inv√°lido! Ser√° usado o padr√£o de 9 jogos.");
    qtdJogos = 9;
  }

  const universo = Array.from({ length: 60 }, (_, i) => i + 1);
  const response = await fetch("MegaSena1.json");
  const jogosAnteriores = await response.json();

  const contagem = {};
  for (let i = 1; i <= 60; i++) contagem[i] = 0;

  Object.values(jogosAnteriores).forEach(item => {
    const dezenas = Array.isArray(item) ? item : Array.isArray(item.dezenas) ? item.dezenas : null;
    if (dezenas) {
      dezenas.forEach(num => {
        if (contagem[num] !== undefined) contagem[num]++;
      });
    }
  });

  const topFrequentes = Object.entries(contagem)
    .sort((a, b) => b[1] - a[1])
    .map(([num]) => parseInt(num));

  const melhores10 = topFrequentes.slice(0, 10);

  function validarJogo(jogo) {
    const soma = jogo.reduce((acc, n) => acc + n, 0);
    const pares = jogo.filter(n => n % 2 === 0).length;

    // Crit√©rios simples para Mega-Sena
    return (
      soma >= 100 && soma <= 210 && // soma razo√°vel
      pares >= 2 && pares <= 4 &&   // equil√≠brio pares/√≠mpares
      new Set(jogo).size === 6      // sem repeti√ß√£o
    );
  }

  function calcularIPE(jogo) {
    let pontos = 0;
    const soma = jogo.reduce((acc, n) => acc + n, 0);
    const pares = jogo.filter(n => n % 2 === 0).length;
    const frequentes = jogo.filter(n => melhores10.includes(n));

    if (soma >= 120 && soma <= 180) pontos++;
    if (pares >= 2 && pares <= 4) pontos++;
    if (frequentes.length >= 2) pontos++;
    if (!jogo.some((n, i, arr) => arr.includes(n + 1))) pontos++; // evita sequ√™ncia longa
    if (new Set(jogo).size === 6) pontos++;

    return pontos;
  }

  const jogosComIPE = [];

  for (let j = 1; j <= qtdJogos; j++) {
    let tentativa = 0;
    let jogoFinal = [];

    while (tentativa < 1000) {
      const jogo = [];
      while (jogo.length < 6) {
        const n = universo[Math.floor(Math.random() * universo.length)];
        if (!jogo.includes(n)) jogo.push(n);
      }
      jogoFinal = jogo.sort((a, b) => a - b);
      if (validarJogo(jogoFinal)) break;
      tentativa++;
    }

    const soma = jogoFinal.reduce((acc, n) => acc + n, 0);
    const pares = jogoFinal.filter(n => n % 2 === 0).length;
    const filtrados = jogoFinal.filter(n => melhores10.includes(n));
    const ipe = calcularIPE(jogoFinal);

    jogosComIPE.push({ jogo: jogoFinal, ipe, soma, pares, filtrados });
  }

  // Renderiza√ß√£o
  const container = document.createElement("div");
  container.style.display = "flex";
  container.style.flexDirection = "column";
  container.style.alignItems = "center";
  container.style.maxWidth = "600px";
  container.style.width = "100%";

  const titulo = document.createElement("h3");
  titulo.textContent = "üèÜ Ganhador estilo Bitcoin (Mega-Sena)";
  titulo.style.color = "#00ffd5";
  titulo.style.marginBottom = "20px";
  container.appendChild(titulo);

  jogosComIPE.forEach((jogoObj, index) => {
    const cor = jogoObj.ipe >= 4 ? "#00ff80" : jogoObj.ipe === 3 ? "#ffd700" : "#999";
    const bg = jogoObj.ipe >= 4 ? "#003322" : jogoObj.ipe === 3 ? "#332900" : "#1a1a1a";
    const emoji = jogoObj.ipe >= 4 ? "üíé" : jogoObj.ipe === 3 ? "‚≠ê" : "üé≤";

    const bloco = document.createElement("div");
    bloco.style.marginBottom = "18px";
    bloco.style.border = `2px solid ${cor}`;
    bloco.style.backgroundColor = bg;
    bloco.style.padding = "12px";
    bloco.style.borderRadius = "10px";
    bloco.style.width = "100%";
    bloco.style.boxSizing = "border-box";
    bloco.style.color = cor;

    const cabecalho = document.createElement("strong");
    cabecalho.innerHTML = `${emoji} Jogo ${index + 1} (IPE ${jogoObj.ipe}/5):`;
    bloco.appendChild(cabecalho);

    const linha = document.createElement("div");
    linha.style.margin = "10px 0";
    linha.style.display = "flex";
    linha.style.flexWrap = "wrap";
    linha.style.justifyContent = "center";
    linha.style.gap = "6px";

    jogoObj.jogo.forEach(n => {
  const span = document.createElement("span");
  span.textContent = String(n).padStart(2, '0');
  span.style.display = "inline-block";
  span.style.width = "48px";
  span.style.height = "48px";
  span.style.lineHeight = "48px";
  span.style.textAlign = "center";
  span.style.fontWeight = "bold";
  span.style.fontSize = "18px";
  span.style.borderRadius = "6px";
  span.style.color = "#ffffff";
  span.style.backgroundColor = numerosOriginais.includes(n) ? "#004d33" : "#00264d";
  span.style.boxShadow = `0 0 6px ${cor}`;
  linha.appendChild(span);
});

bloco.appendChild(linha);

const info = document.createElement("div");
info.innerHTML = `
  üìä Soma: ${jogoObj.soma} | ‚öñÔ∏è Pares: ${jogoObj.pares} | √çmpares: ${6 - jogoObj.pares}<br>
  üîç Frequentes: ${jogoObj.filtrados.join(", ")}<br>
  <strong style="color:${cor};">üåü √çndice de Performance Estrat√©gica: ${jogoObj.ipe}/5</strong>
`;
bloco.appendChild(info);
container.appendChild(bloco);
}); // fecha o forEach

resultado.appendChild(container);

// üîπ Bloco de inspira√ß√£o dentro da fun√ß√£o
const inspiracao = document.createElement("div");
inspiracao.innerHTML = `
  <p style="color: #ffd700; font-style: italic; margin-top: 20px;">
    üí° Em janeiro de 2023, um minerador solo com apenas <strong>49 TH/s</strong> encontrou sozinho o bloco <strong>907283</strong> do Bitcoin.
    <br>Chance estimada: <strong>1 em 130 mil por dia</strong>. Recompensa: <strong>3,154 BTC</strong> (~R$ 2 milh√µes).
    <br><br>
    Essa fa√ßanha n√£o foi sorte ‚Äî foi persist√™ncia, estrat√©gia e f√© na improbabilidade.
    <br><br>
    Cada jogo aqui carrega esse esp√≠rito: uma chance rara, mas real, de romper a l√≥gica e surpreender com uma combina√ß√£o improv√°vel, mas estatisticamente poss√≠vel.
    <br><br>
    Que a sorte esteja do seu lado na Mega-Sena. üçÄüöÄ
  </p>
`;
resultado.appendChild(inspiracao);
} // fecha a fun√ß√£o sorteioBitcoin corretamente

				
				
 function gerarJogosPromissores() {
  let qtd = prompt("üéØ Quantos jogos deseja gerar? (1 a 15)");
  qtd = parseInt(qtd, 10);

  if (isNaN(qtd) || qtd < 1 || qtd > 15) {
    alert("Por favor, insira um n√∫mero entre 1 e 15.");
    return;
  }

  fetch("MegaSena1.json")
    .then(res => res.json())
    .then(historicoConcursos => {
      const container = document.getElementById("jogosGerados");

      container.style.display = "flex";
      container.style.flexDirection = "column";
      container.style.alignItems = "center";
      container.style.justifyContent = "center";
      container.style.flexWrap = "wrap";
      container.style.gap = "16px";
      container.style.marginTop = "20px";

      container.innerHTML = "<h3 style='color:#00ffd5;'>üìà Estrat√©gias Otimizadas (4‚Äì5 acertos):</h3>";

      const candidatos = [];
      const frequenciaReal = {};
      const todas = Array.from({ length: 60 }, (_, i) => i + 1);

      // ‚úÖ Corrigido para aceitar novo formato do JSON
      const concursosFormatados = Object.values(historicoConcursos)
        .map(item => Array.isArray(item) ? item : Array.isArray(item.dezenas) ? item.dezenas : null)
        .filter(arr => Array.isArray(arr) && arr.length === 6);

      concursosFormatados.forEach(dezenas => {
        dezenas.forEach(n => {
          frequenciaReal[n] = (frequenciaReal[n] || 0) + 1;
        });
      });

      // Frequ√™ncia simulada
      const frequenciaSimulada = Array(60).fill(0);
      for (let i = 0; i < 1000; i++) {
        const sorteados = [];
        while (sorteados.length < 6) {
          const n = Math.floor(Math.random() * 60) + 1;
          if (!sorteados.includes(n)) sorteados.push(n);
        }
        sorteados.forEach(n => frequenciaSimulada[n - 1]++);
      }

      const pesoFinal = {};
      for (let i = 1; i <= 60; i++) {
        const real = frequenciaReal[i] || 0;
        const simulado = frequenciaSimulada[i - 1] || 0;
        pesoFinal[i] = (real * 0.5) + (simulado * 0.5);
      }

      // Gera 100 jogos candidatos
      for (let i = 0; i < 100; i++) {
        const jogo = [];
        while (jogo.length < 6) {
          const n = Math.floor(Math.random() * 60) + 1;
          if (!jogo.includes(n)) jogo.push(n);
        }
        jogo.sort((a, b) => a - b);

        const nota = jogo.reduce((soma, n) => soma + (pesoFinal[n] || 0), 0);

        let vezesEntre4e5 = 0;
        concursosFormatados.forEach(concurso => {
          const acertos = jogo.filter(n => concurso.includes(n)).length;
          if (acertos >= 4 && acertos <= 5) vezesEntre4e5++;
        });

        candidatos.push({ jogo, nota, vezesEntre4e5 });
      }

      candidatos.sort((a, b) => b.vezesEntre4e5 - a.vezesEntre4e5);
      const melhores = candidatos.slice(0, qtd);

      const melhorJogo = melhores[0].jogo;
      if (typeof preencherInputs === "function") {
        preencherInputs(melhorJogo);
      }

      melhores.forEach(({ jogo, vezesEntre4e5 }, index) => {
        const bloco = document.createElement("div");
        bloco.style.display = "flex";
        bloco.style.flexDirection = "column";
        bloco.style.alignItems = "center";
        bloco.style.justifyContent = "center";
        bloco.style.marginBottom = "20px";
        bloco.style.padding = "12px";
        bloco.style.border = "1px solid #888";
        bloco.style.borderRadius = "10px";
        bloco.style.backgroundColor = "#1e1e1e";
        bloco.style.color = "#f0f0f0";

        const titulo = document.createElement("h4");
        titulo.textContent = `üé≤ Jogo ${index + 1}`;
        titulo.style.marginBottom = "10px";
        titulo.style.color = "#00ffd5";
        bloco.appendChild(titulo);

        const dezenas = document.createElement("div");
        dezenas.style.display = "flex";
        dezenas.style.flexWrap = "wrap";
        dezenas.style.gap = "8px";
        dezenas.style.justifyContent = "center";

        jogo.forEach(num => {
          const span = document.createElement("span");
          span.textContent = String(num).padStart(2, '0');
          span.style.padding = "6px 10px";
          span.style.borderRadius = "6px";
          span.style.backgroundColor = "#333";
          span.style.color = "#ffd700";
          span.style.fontWeight = "bold";
          span.style.fontSize = "16px";
          span.style.boxShadow = "0 0 4px rgba(255, 255, 255, 0.2)";
          dezenas.appendChild(span);
        });

        bloco.appendChild(dezenas);

        const info = document.createElement("div");
        info.textContent = `üéØ Frequ√™ncia entre 4‚Äì5 acertos: ${vezesEntre4e5}`;
        info.style.marginTop = "12px";
        info.style.color = "#87cefa";
        bloco.appendChild(info);

        container.appendChild(bloco);
      });

      atualizarStatus(`${qtd} jogos com maior recorr√™ncia entre 4‚Äì5 acertos gerados! üß†`, "#00ffd5");
    })
    .catch(err => {
      console.error("‚ùå Erro ao carregar hist√≥rico:", err);
      atualizarStatus("‚ùå Falha ao gerar jogos promissores.", "#ff0000");
    });
}

  // ‚úÖ Registro global de fun√ß√µes
  document.addEventListener("DOMContentLoaded", () => {
    window.sortearComLogica = sortearComLogica;
    window.gerarJogosPromissores = gerarJogosPromissores;
    window.importarUltimos = importarUltimos;
    window.verTriosMaisComuns = verTriosMaisComuns;
    window.avaliarConjuntoPython = avaliarConjuntoPython;
    window.gerarSugestao = gerarSugestao;
	window.jogoFixo
	
    window.sortearComFrequencia = sortearComFrequencia;
	
    window.prepararPromissor = prepararPromissor;
    window.logicaGanhadorBitcoin = logicaGanhadorBitcoin;
    window.buscarConcursoEspecifico = buscarConcursoEspecifico;

    // Fun√ß√µes auxiliares
    window.limparInterfaceCompleta = limparInterfaceCompleta;
    window.limparJogoFixo = limparJogoFixo;
    window.carregarCombinacoesReais = carregarCombinacoesReais;
    window.atualizarConcursos = atualizarConcursos;
    window.exibirResultado = exibirResultado;
    window.preencherInputs = preencherInputs;
    window.atualizarStatus = atualizarStatus;
    window.atualizarTopo = atualizarTopo;

    // Cron√¥metro e barra
    window.iniciarCronometro = iniciarCronometro;
    window.pararCronometro = pararCronometro;
    window.reiniciarBarra = reiniciarBarra;
    window.atualizarBarra = atualizarBarra;
    window.finalizarBarra = finalizarBarra;
	window.sortearComFrequencia = sortearComFrequencia;

    // ‚úÖ Inicializa√ß√µes seguras
    //atualizarConcursos(); // mant√©m apenas o que √© necess√°rio
  });

</script>

</body>

</html>














