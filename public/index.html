<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sorteio Inteligente</title>

  <link rel="icon" href="LOTOF√ÅCIL.png" sizes="192x192" type="image/png">
  <link rel="icon" href="LOTOF√ÅCIL.png" sizes="512x512" type="image/png">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">


	
	
  <style>
 
#tituloPrincipal {
  font-family: 'Orbitron', sans-serif;
  font-size: 48px;
  text-align: center;
  margin-top: 30px;
  color: #fff;
  background: linear-gradient(90deg, #ff00cc, #00ffff, #ffcc00, #ff00cc);
  background-size: 400% 400%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: neonColor 6s ease infinite;
  text-shadow: 0 0 5px #fff, 0 0 10px #ff00cc, 0 0 15px #00ffff, 0 0 20px #ffcc00;
}

@keyframes neonColor {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.painel-logico {
  background: #0d0d0d;
  padding: 40px 20px;
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(0, 255, 213, 0.15);
  text-align: center;
  font-family: 'Segoe UI', 'Roboto', sans-serif;
  color: #f5f5f5;
  margin-bottom: 30px;
  border: 1px solid #1a1a1a;
}

#tituloPrincipal {
  font-size: 44px;
  margin-bottom: 12px;
  font-weight: 800;
  letter-spacing: 1px;
  color: #00ffe0;
  text-shadow: 0 0 4px #00ffe0, 0 0 10px #00ffe0;
}

.neon {
  color: #00ffe0;
  text-shadow: 0 0 6px #00ffe0, 0 0 12px #00ffe0;
}

#subtituloPrincipal {
  font-size: 20px;
  color: #cccccc;
  margin-top: 10px;
  line-height: 1.6;
  font-weight: 500;
}

.destaque {
  color: #ffd700;
  font-weight: bold;
  text-shadow: 0 0 4px #ffd700;
}
  

  #subtituloPrincipal {
    font-family: 'Orbitron', sans-serif;
    font-size: 18px;
    color: #ffffff;
    text-shadow: 0 0 3px #00ffff;
    text-align: center;
    margin-bottom: 20px;
  }

  body {
    background-color: #111; /* fundo escuro para destacar o neon */
  }

  
  
  
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      background-color: #000;
      color: #ffd700;
      font-family: 'Orbitron', Arial, sans-serif;
      text-align: center;
      overflow-x: hidden;
    }
    h1 { font-size: 20px; margin-bottom: 16px; color: #00ffd5; }
    #splash {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: #121212;
      color: #00ffd5;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      font-size: 24px;
    }
    #cadastro input {
      width: 80%; max-width: 300px;
      padding: 12px; font-size: 18px;
      border-radius: 6px; border: 1px solid #00ffd5;
      background-color: #303030; color: #fff;
      box-shadow: 0 0 4px #00ffd5;
    }
    #conteudo-principal {
      display: none;
      animation: fadeInMain 1s ease forwards;
      max-width: 100%; padding: 10px;
    }
    @keyframes fadeInMain {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    #entradaTopo {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin: 20px auto;
      width: 100%; max-width: 600px;
      padding: 10px;
    }
    #entradaTopo input {
      width: 100%; height: 56px;
      font-size: 20px; font-weight: bold;
      border-radius: 6px;
      background-color: #303030; color: #fff;
      box-shadow: 0 0 4px #00ffd5;
      border: 1px solid #00ffd5;
      text-align: center;
    }
    button {
      background-color: rgba(0, 255, 213, 0.1);
      color: #00ffd5;
      border: 1px solid #00ffd5;
      padding: 14px;
      border-radius: 8px;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      margin: 5px;
      width: 100%; max-width: 280px;
      box-shadow: 0 0 12px #00ffd5;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    button:hover {
      background-color: rgba(0, 255, 213, 0.2);
      box-shadow: 0 0 20px #00ffd5;
      transform: scale(1.05);
    }
    .painel-botoes, .grupo-controle {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin: 20px auto;
      width: 100%; max-width: 600px;
      padding: 0 10px;
    }
    @media (max-width: 480px) {
      h1 { font-size: 18px; }
      #entradaTopo {
        grid-template-columns: repeat(3, 1fr);
        gap: 10px; padding: 10px;
      }
    }
  </style>
</head>

<body>
  <div id="splash">
    <h2>Sorteio Inteligente</h2>
    <p>Bem-vindo!</p>
  </div>

  <div id="cadastro" style="display: none;">
    <h2>Cadastro R√°pido</h2>
    <input type="text" placeholder="Nome completo" id="nome" /><br><br>
    <input type="text" placeholder="CPF" id="cpf" /><br><br>
    <p id="obsSenha" style="color: #555; font-size: 14px;">
  üîí A senha deve ter no m√≠nimo 8 caracteres, come√ßando com 3 letras seguidas de n√∫meros e pelo menos uma letra mai√∫scula.
</p>

	
	<input type="password" placeholder="Senha" id="senha" /><br><br>
    <button onclick="finalizarCadastro()">Continuar</button>
  </div>

  <div id="pagamento" style="display: none;">
  <h2>Pagar Pix R$ 9,80</h2>
  <button onclick="copiarPix()">üí∏ Copiar Pix</button>
  <p id="mensagemPix" style="color: green; font-weight: bold;"></p>
</div>
  
 <div id="infoConcurso" style="margin-bottom: 10px; font-weight: bold; font-size: 16px;"></div>

<div id="conteudo-principal" class="painel-ouro">
  <h1 id="tituloPrincipal">‚ö° <span class="neon-ouro">SORTEIO L√ìGICO</span></h1>
  <p id="subtituloPrincipal">Sua <span class="destaque-ouro">"SORTE"</span> pode ser associada √† <span class="destaque-ouro">l√≥gica</span>!</p>






    <h1>Digite at√© 15 n√∫meros de 1 a 25</h1>
    <div id="entradaTopo">
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
</div>

	
	
	

    <div class="painel-botoes">
      <button onclick="importarUltimos()">üì• Importar √öltimo Concurso</button>
      <button onclick="buscarConcursoEspecifico()">üîç Buscar Concursos</button>
      <button onclick="jogosInversosALogica()">üß™ Jogos Inversos √† L√≥gica</button>
      <button onclick="sorteioBitcoin()">üèÜ Ganhador estilo Bitcoin</button>
      <button onclick="limparTudo()">üîÑ Novo sorteio</button>
      <button onclick="avaliarConjuntoPython()">üß† Avaliar Py</button>
    </div>

    <div class="grupo-controle">
      <button onclick="logicaGanhadorBitcoin()">üîÑ Ganhador da Bitcoin</button>
      <button onclick="verTriosMaisComuns()">üìä Ver trios mais comuns</button>
      <button onclick="prepararPromissor()">üéØ Jogos Promissores</button>
      <button onclick="gerarJogosPromissores(10)">üìà Estrat√©gias Otimizadas</button>
      <button onclick="sortearComFrequencia()">üìä Probabilidade Hist√≥rica</button>
      <button id="btnSortear">üéØ Sortear com L√≥gica</button>
    </div>

    <div id="resultadoBitcoin" style="margin-top: 10px;"></div>
    <div id="statusImportacao"></div>
    <div id="jogosGerados"></div>
    <div id="analiseEstatistica"></div>
    <div id="listaConcursos"></div>
    <div id="ultimoConcursoTopo"></div>
    <div id="jogosInversosContainer"></div>
    <div id="jogosIneditosContainer" style="margin-top: 30px;">
      <h3 style="color: #00ff88;">üü¢ Jogos 100% In√©ditos</h3>
    </div>
    <div class="resultado" id="resultado"></div>
    <pre id="output"></pre>
  </div>

  <script>
    window.addEventListener("load", () => {
      setTimeout(() => {
        document.getElementById("splash").style.display = "none";
               document.getElementById("cadastro").style.display = "block";
      }, 2500); // 2.5 segundos
    });

    function finalizarCadastro() {
  const nome = document.getElementById("nome").value.trim();
  const cpf = document.getElementById("cpf").value.trim();
  const senha = document.getElementById("senha").value;

  if (!nome || !cpf || !senha) {
    alert("Preencha todos os campos.");
    return;
  }

  if (!validarSenha(senha)) {
    alert("‚ö†Ô∏è Senha inv√°lida.\nEla deve ter no m√≠nimo 8 caracteres, come√ßar com 3 letras seguidas de n√∫meros e conter pelo menos uma letra mai√∫scula.");
    return;
  }

  // Exibe a √°rea de pagamento e o bot√£o Pix
  document.getElementById("cadastro").style.display = "none";
  document.getElementById("pagamento").style.display = "block";
  document.getElementById("botaoPix").style.display = "block";
}
function validarSenha(senha) {
  if (senha.length < 8) return false;

  const letrasIniciais = senha.slice(0, 3);
  if (!/^[a-zA-Z]{3}$/.test(letrasIniciais)) return false;

  const resto = senha.slice(3);
  if (!/\d/.test(resto)) return false;

  if (!/[A-Z]/.test(senha)) return false;

  return true;
}

function mostrarPix() {
  document.getElementById("pixInfo").style.display = "block";
  
  document.getElementById("pagamento").style.display = "none";
  document.getElementById("conteudo-principal").style.display = "block";
}

function copiarPix() {
  const chavePix = "19997161717";

  // Copia a chave Pix
  const tempInput = document.createElement("input");
  tempInput.value = chavePix;
  document.body.appendChild(tempInput);
  tempInput.select();
  document.execCommand("copy");
  document.body.removeChild(tempInput);

  // Mostra mensagem de sucesso
  const mensagem = document.getElementById("mensagemPix");
  mensagem.textContent = "‚úÖ Pix copiado com sucesso!";

  // Vai para a tela principal
  document.getElementById("pagamento").style.display = "none";
  document.getElementById("conteudo-principal").style.display = "block";
}



  </script>
  
  
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const cpfInput = document.getElementById("cpf");

    cpfInput.addEventListener("input", function () {
      let valor = cpfInput.value.replace(/\D/g, ""); // Remove tudo que n√£o for n√∫mero

      if (valor.length > 11) valor = valor.slice(0, 11); // Limita a 11 d√≠gitos

      // Aplica a m√°scara: 000.000.000-00
      let formatado = valor;
      if (valor.length > 9) {
        formatado = valor.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
      } else if (valor.length > 6) {
        formatado = valor.replace(/(\d{3})(\d{3})(\d{0,3})/, "$1.$2.$3");
      } else if (valor.length > 3) {
        formatado = valor.replace(/(\d{3})(\d{0,3})/, "$1.$2");
      }

      cpfInput.value = formatado;
    });
  });
</script>
  
  
</body>


<script>
// ‚úÖ Gera os 15 inputs fixos no topo ao carregar
document.addEventListener("DOMContentLoaded", () => {
  gerarInputsFixos();
});

function gerarInputsFixos() {
  const container = document.getElementById("entradaTopo");
  container.innerHTML = "";

  for (let i = 0; i < 15; i++) {
    const input = document.createElement("input");
    input.type = "number";
    input.min = 1;
    input.max = 25;
    input.placeholder = `#${i + 1}`;
    input.id = `topo${i + 1}`;
    container.appendChild(input);
  }
}

// ‚úÖ Atualiza os n√∫meros digitados como etiquetas no topo
function atualizarTopo(numeros) {
  const labelsTopo = document.getElementById("labelsTopo");
  labelsTopo.innerHTML = "";

  numeros.forEach(num => {
    const span = document.createElement("span");
    span.className = "label";
    span.textContent = num;
    labelsTopo.appendChild(span);
  });
}

// ‚úÖ Exibe os n√∫meros sorteados na √°rea de resultado
function exibirResultado(numeros) {
  const resultadoDiv = document.getElementById("resultado");
  resultadoDiv.innerHTML = "";
  numeros.sort((a, b) => a - b).forEach(num => {
    const div = document.createElement("div");
    div.className = "label";
    div.textContent = num;
    resultadoDiv.appendChild(div);
  });
  atualizarTopo(numeros);
}

async function sortearComFrequencia() {
  try {
    const status = document.getElementById("statusProbabilidade");
    if (status) {
      status.innerText = "üîç Analisando concursos hist√≥ricos...";
      status.style.color = "#4682b4";
    }

    const res = await fetch("http://localhost/SorteioApp/lotofacil_combinacoes_convertido.json", {
      cache: "no-store"
    });

    if (!res.ok) throw new Error("‚ùå Erro ao acessar o JSON.");

    const concursos = await res.json();

    const corrigidos = {};
    for (const [num, dezenas] of Object.entries(concursos)) {
      const limpas = dezenas.map(d => parseInt(String(d).replace(/\D/g, ""), 10)).filter(n => !isNaN(n));
      if (limpas.length === 15) {
        corrigidos[num] = limpas;
      }
    }

    const frequencia = {};
    for (const dezenas of Object.values(corrigidos)) {
      dezenas.forEach(n => {
        frequencia[n] = (frequencia[n] || 0) + 1;
      });
    }

    const ordenadosPorMenor = Object.entries(frequencia)
      .sort((a, b) => a[1] - b[1])
      .map(([n]) => parseInt(n, 10));

    const ordenadosPorMaior = Object.entries(frequencia)
      .sort((a, b) => b[1] - a[1])
      .map(([n]) => parseInt(n, 10));

    const menosFrequentes = ordenadosPorMenor.slice(0, 20);
    const maisFrequentes = ordenadosPorMaior.slice(0, 20);

    const coordenadas = n => {
      const x = ((n - 1) % 5) + 1;
      const y = Math.floor((n - 1) / 5) + 1;
      return { x, y };
    };

    const gerarJogoMesclado = () => {
      const selecionadosMenos = [];
      const selecionadosMais = [];

      while (selecionadosMenos.length < 10) {
        const n = menosFrequentes[Math.floor(Math.random() * menosFrequentes.length)];
        if (!selecionadosMenos.includes(n)) selecionadosMenos.push(n);
      }

      while (selecionadosMais.length < 5) {
        const n = maisFrequentes[Math.floor(Math.random() * maisFrequentes.length)];
        if (!selecionadosMais.includes(n) && !selecionadosMenos.includes(n)) selecionadosMais.push(n);
      }

      return [...selecionadosMenos, ...selecionadosMais].sort((a, b) => a - b);
    };

    const calcularDistanciaMedia = (jogo) => {
      let somaDistancia = 0;
      for (let i = 0; i < jogo.length; i++) {
        for (let j = i + 1; j < jogo.length; j++) {
          const a = coordenadas(jogo[i]);
          const b = coordenadas(jogo[j]);
          const dx = b.x - a.x;
          const dy = b.y - a.y;
          somaDistancia += Math.sqrt(dx * dx + dy * dy);
        }
      }
      return somaDistancia / 105;
    };

    let jogoFixo = [];
    let mediaDistancia = 0;
    let tentativas = 0;

    do {
      tentativas++;
      jogoFixo = gerarJogoMesclado();
      mediaDistancia = calcularDistanciaMedia(jogoFixo);
    } while ((mediaDistancia < 4.5 || mediaDistancia > 6.5) && tentativas < 50);

    // üß© Preencher inputs fixos dinamicamente
   const entradaTopo = document.getElementById("entradaTopo");
entradaTopo.innerHTML = "";

jogoFixo.forEach((num, i) => {
  const input = document.createElement("input");
  input.type = "number";
  input.value = num;
  input.className = "input-fixo";
  input.min = 1;
  input.max = 25;
  input.style.width = "68px";
  input.style.height = "38px";
  input.style.textAlign = "center";
  input.style.fontWeight = "bold";
  input.style.fontSize = "18px";
  input.style.borderRadius = "6px";
  input.style.border = "1px solid #ccc";
  input.style.boxShadow = "0 0 4px #00ffd5";
  input.style.backgroundColor = "#222";
  input.style.color = "#00ffd5";
  input.style.marginRight = "4px";
  entradaTopo.appendChild(input);
});
    // üé® Exibir no painel lateral
    const painel = document.getElementById("painelHistorico");
    if (painel) {
      painel.innerHTML = "";

      jogoFixo.forEach((n, i) => {
        const label = document.createElement("div");
        label.textContent = `#${i + 1}: ${n}`;
        label.style.backgroundColor = "#303030";
        label.style.color = "#00ffd5";
        label.style.padding = "4px";
        label.style.margin = "2px";
        label.style.fontFamily = "'Orbitron', sans-serif";
        label.style.fontWeight = "bold";
        painel.appendChild(label);
      });

      const distLabel = document.createElement("div");
      distLabel.textContent = `üìê Dist√¢ncia m√©dia entre dezenas: ${mediaDistancia.toFixed(2)} (tentativas: ${tentativas})`;
      distLabel.style.backgroundColor = "#202020";
      distLabel.style.color = "#ffd700";
      distLabel.style.padding = "6px";
      distLabel.style.marginTop = "8px";
      distLabel.style.fontWeight = "bold";
      painel.appendChild(distLabel);
    }
	    // üìà Filtro econom√©trico inercial
    const pesoInercial = {};
    for (let i = 1; i <= 25; i++) {
      const freq = frequencia[i] || 0;
      const atraso = Object.values(corrigidos).reverse().findIndex(j => j.includes(i));
      pesoInercial[i] = (freq * 1.5) - (atraso * 0.7);
    }

    const scoreInercial = jogoFixo.reduce((soma, n) => soma + (pesoInercial[n] || 0), 0);

    const inercialLabel = document.createElement("div");
    inercialLabel.textContent = `üìà Score econom√©trico inercial: ${scoreInercial.toFixed(2)}`;
    inercialLabel.style.backgroundColor = "#202020";
    inercialLabel.style.color = "#00ffcc";
    inercialLabel.style.padding = "6px";
    inercialLabel.style.marginTop = "8px";
    inercialLabel.style.fontWeight = "bold";
    painel.appendChild(inercialLabel);

    // üé≤ Gerar e exibir 6 jogos vari√°veis
    const container = document.getElementById("jogosGerados");
    container.innerHTML = "<h3>üé≤ Jogos Vari√°veis Gerados:</h3>";

    for (let j = 0; j < 6; j++) {
      let jogo = [];
      let distancia = 0;
      let tentativas = 0;

      do {
        tentativas++;
        jogo = gerarJogoMesclado();
        distancia = calcularDistanciaMedia(jogo);
      } while ((distancia < 4.5 || distancia > 6.5) && tentativas < 50);

      const grupo = document.createElement("div");
      grupo.className = "grupo-jogo";
      grupo.style.marginBottom = "12px";

      const titulo = document.createElement("div");
      titulo.textContent = `üîπ Jogo ${j + 1} ‚Äî Dist√¢ncia: ${distancia.toFixed(2)}`;
      titulo.style.fontWeight = "bold";
      titulo.style.marginBottom = "4px";
      titulo.style.color = "#00ffd5";
      grupo.appendChild(titulo);

      jogo.forEach(num => {
        const input = document.createElement("input");
        input.type = "number";
        input.value = num;
        input.className = "input-jogo";
        input.min = 1;
        input.max = 25;
        input.style.width = "48px";
        input.style.height = "48px";
        input.style.textAlign = "center";
        input.style.fontWeight = "bold";
        input.style.fontSize = "18px";
        input.style.borderRadius = "6px";
        input.style.border = "1px solid #ccc";
        input.style.boxShadow = "0 0 4px #00ffd5";
        input.style.backgroundColor = "#303030";
        input.style.color = "#ffffff";
        input.style.marginRight = "4px";
        grupo.appendChild(input);
      });

      container.appendChild(grupo);
    }

    // ‚úÖ Finaliza com status
    if (status) {
      status.innerText = "‚úÖ Jogo fixo + 6 vari√°veis gerados com filtro inercial!";
      status.style.color = "#00ffd5";
    }

    console.log("üìä Jogo fixo:", jogoFixo);
    console.log("üìê Dist√¢ncia m√©dia:", mediaDistancia.toFixed(2));
    console.log("üìà Score inercial:", scoreInercial.toFixed(2));

  } catch (erro) {
    console.error("Erro na an√°lise hist√≥rica:", erro);
    const status = document.getElementById("statusProbabilidade");
    if (status) {
      status.innerText = "‚ùå Falha na an√°lise hist√≥rica.";
      status.style.color = "#ff6347";
    }
  }
}

async function jogosInversosALogica() {
  try {
    const container = document.getElementById("jogosInversosContainer");
    container.innerHTML = ""; // limpa apenas os jogos inversos

    const res = await fetch("lotofacil_combinacoes_convertido.json");
    const dados = await res.json();

    const jogosSalvos = Object.values(dados).map(arr =>
      arr.slice().sort((a, b) => a - b).join(",")
    );

    // üìä Frequ√™ncia hist√≥rica
    const contagem = {};
    for (let i = 1; i <= 25; i++) contagem[i] = 0;
    Object.values(dados).forEach(jogo => {
      jogo.forEach(num => contagem[num]++);
    });

    const topFrequentes = Object.entries(contagem)
      .sort((a, b) => b[1] - a[1])
      .map(([num]) => parseInt(num));

    const top5 = topFrequentes.slice(0, 5);
    const top10 = topFrequentes.slice(5, 10);

    for (let j = 0; j < 9; j++) {
      const titulo = document.createElement("div");
      titulo.textContent = `üéØ Jogo ${j + 1}:`;
      titulo.style.color = "#00ffd5";
      titulo.style.fontWeight = "bold";
      titulo.style.margin = "12px 0 6px";
      titulo.style.fontSize = "16px";
      container.appendChild(titulo);

      const jogo = [];

      const inicio = Math.floor(Math.random() * 16) + 1;
      for (let i = 0; i < 5; i++) {
        const n = inicio + i;
        if (n <= 25 && !jogo.includes(n)) jogo.push(n);
      }

      if (!jogo.includes(1)) jogo.push(1);
      if (!jogo.includes(25)) jogo.push(25);

      let candidato = 1;
      while (jogo.length < 13) {
        if (candidato % 2 !== 0 && !jogo.includes(candidato)) {
          jogo.push(candidato);
        }
        candidato++;
      }

      const raras = [11, 18, 22, 13, 2];
      for (let r of raras) {
        if (jogo.length < 15 && !jogo.includes(r)) {
          jogo.push(r);
        }
      }

      const final = jogo.slice(0, 15).sort((a, b) => a - b);
      const jogoString = final.join(",");
      const existeNoJson = jogosSalvos.includes(jogoString);

      const linha = document.createElement("div");
      linha.style.display = "flex";
      linha.style.flexWrap = "wrap";
      linha.style.gap = "6px";
      linha.style.marginBottom = "10px";

      final.forEach(dezena => {
        const span = document.createElement("span");
        span.textContent = String(dezena).padStart(2, '0');
        span.style.fontWeight = "bold";
        span.style.textAlign = "center";
        span.style.width = "48px";
        span.style.height = "48px";
        span.style.lineHeight = "48px";
        span.style.fontSize = "18px";
        span.style.borderRadius = "6px";
        span.style.display = "inline-block";
        span.style.boxShadow = "0 0 4px #888";
        span.style.marginRight = "4px";

        // üé® Cores por frequ√™ncia
        if (top5.includes(dezena)) {
          span.style.backgroundColor = "#ff4d4d"; // vermelho
          span.style.color = "#fff";
        } else if (top10.includes(dezena)) {
          span.style.backgroundColor = "#ffa500"; // laranja
          span.style.color = "#fff";
        } else {
          span.style.backgroundColor = "#333"; // preto/cinza
          span.style.color = "#fff";
        }

        linha.appendChild(span);
      });

      container.appendChild(linha);

      // üìÅ Status do jogo
      const status = document.createElement("div");
      status.innerHTML = existeNoJson
        ? "<span style='color:green;'>‚úÖ J√° existe no hist√≥rico</span>"
        : "<span style='color:red;'>üÜï In√©dito</span>";
      status.style.marginBottom = "6px";
      container.appendChild(status);
    }

    // üé® Legenda explicativa (uma vez s√≥)
    const legenda = document.createElement("div");
    legenda.style.fontSize = "13px";
    legenda.style.marginTop = "20px";
    legenda.innerHTML = `
      <strong>üé® Legenda de cores:</strong><br>
      üî¥ <span style="color:red; font-weight:bold;">Vermelho</span>: n√∫meros mais frequentemente sorteados (top 5)<br>
      üü† <span style="color:orange; font-weight:bold;">Laranja</span>: n√∫meros medianamente sorteados (top 6‚Äì10)<br>
      ‚ö´Ô∏è <span style="color:#333; font-weight:bold;">Preto</span>: n√∫meros menos sorteados (fora do top 10)
    `;
    container.appendChild(legenda);

    atualizarStatus("‚úÖ 9 jogos gerados com destaque por frequ√™ncia!", "#00ffd5");
  } catch (error) {
    console.error("Erro ao carregar ou processar o JSON:", error);
    alert("‚ùå Falha ao gerar os jogos. Verifique o caminho do JSON ou o formato dos dados.");
  }
}
	
// ‚úÖ Preenche os inputs fixos com um array de 15 n√∫meros, mantendo a ordem original
function preencherInputs(numeros) {
  const inputs = document.querySelectorAll("#entradaTopo input");

  // Garante que o array seja v√°lido e preserve a ordem
  const conjuntoCorrigido = Array.isArray(numeros) ? numeros.slice(0, 15) : [];

  // Preenche os inputs na ordem exata recebida
  for (let i = 0; i < inputs.length; i++) {
    const valor = conjuntoCorrigido[i];
    inputs[i].value = Number.isInteger(valor) && valor >= 1 && valor <= 25 ? valor : "";
  }

  // Atualiza o topo visual com os n√∫meros originais
  atualizarTopo(conjuntoCorrigido);
}
function gerarJogoPromissor(historicoConcursos) {
  const frequencia = {};
  const triosRepetidos = new Set();
  const dezenasRecentes = new Set();

  // üîÅ Calcula frequ√™ncia de cada dezena
  Object.values(historicoConcursos).forEach(dezenas => {
    dezenas.forEach(n => {
      frequencia[n] = (frequencia[n] || 0) + 1;
    });

    // üîó Extrai trios recorrentes
    for (let i = 0; i < dezenas.length - 2; i++) {
      const trio = [dezenas[i], dezenas[i + 1], dezenas[i + 2]].sort((a, b) => a - b).join("-");
      triosRepetidos.add(trio);
    }
  });

  // üîç Define dezenas frias (menos frequentes)
  const todasDezenas = Array.from({ length: 25 }, (_, i) => i + 1);
  const frias = todasDezenas
    .filter(n => !frequencia[n] || frequencia[n] < 5); // ajuste o limiar conforme necess√°rio

  // üß† Define dezenas quentes (mais frequentes)
  const quentes = todasDezenas
    .filter(n => frequencia[n] >= 10) // ajuste o limiar conforme necess√°rio
    .sort((a, b) => frequencia[b] - frequencia[a]);

  // üìä Distribui√ß√£o por faixa
  const faixaBaixa = todasDezenas.filter(n => n >= 1 && n <= 8 && !frias.includes(n));
  const faixaMedia = todasDezenas.filter(n => n >= 9 && n <= 17 && !frias.includes(n));
  const faixaAlta = todasDezenas.filter(n => n >= 18 && n <= 25 && !frias.includes(n));

  // üî¢ Seleciona 5 de cada faixa
  const jogo = [];

  function sortearDezenas(faixa, qtd) {
    const selecionadas = [];
    const candidatos = faixa.slice();
    while (selecionadas.length < qtd && candidatos.length > 0) {
      const idx = Math.floor(Math.random() * candidatos.length);
      selecionadas.push(candidatos.splice(idx, 1)[0]);
    }
    return selecionadas;
  }

  jogo.push(...sortearDezenas(faixaBaixa, 5));
  jogo.push(...sortearDezenas(faixaMedia, 5));
  jogo.push(...sortearDezenas(faixaAlta, 5));

  // üîó Tenta incluir um trio recorrente
  const trioArray = Array.from(triosRepetidos);
  if (trioArray.length > 0) {
    const trio = trioArray[Math.floor(Math.random() * trioArray.length)]
      .split("-")
      .map(n => parseInt(n, 10));

    trio.forEach(n => {
      if (!jogo.includes(n) && jogo.length < 15) jogo.push(n);
    });
  }

  // üîÅ Completa at√© 15 dezenas se necess√°rio
  while (jogo.length < 15) {
    const candidatos = quentes.filter(n => !jogo.includes(n));
    const n = candidatos[Math.floor(Math.random() * candidatos.length)];
    if (n) jogo.push(n);
  }

  return jogo.slice(0, 15).sort((a, b) => a - b);
}

// ‚úÖ Busca os trios mais comuns via PHP
async function verTriosMaisComuns() {
  const resultado = document.getElementById("resultadoBitcoin");
  if (!resultado) return;

  atualizarStatus("üîç Buscando trios mais comuns...", "#4682b4");

  try {
    const res = await fetch("trios_comuns.php", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ acao: "buscar_trios" })
    });

    if (!res.ok) {
      throw new Error(`Erro HTTP ${res.status}`);
    }

    const dados = await res.json();

    if (dados.erro) {
      atualizarStatus("‚ö†Ô∏è Erro do servidor.", "#ff9900");
      resultado.innerHTML = `<p style="color: orange;">‚ö†Ô∏è ${dados.erro}</p>`;
      return;
    }

    const trios = Array.isArray(dados.trios_comuns) ? dados.trios_comuns : [];

    if (trios.length === 0) {
      atualizarStatus("‚ö†Ô∏è Nenhum concurso carregado.", "#ff9900");
      resultado.innerHTML = `
        <p style="color: orange;">‚ö†Ô∏è Nenhum trio encontrado com os crit√©rios atuais.</p>
        <p style="color: green;">üü¢ Jogos 100% In√©ditos</p>
      `;
      return;
    }

    let html = `<strong>üìä Trios mais comuns:</strong><br><ul style="list-style:none; padding-left:0;">`;

    trios.slice(0, 30).forEach((item, index) => {
      const trioStr = Array.isArray(item.trio) ? item.trio.join(" - ") : "Trio inv√°lido";
      const ocorrencias = item.ocorrencias ?? "‚Äî";
      const porcentagem = item.porcentagem ?? "‚Äî";
      html += `<li>üî¢ <strong>${trioStr}</strong> ‚Äî ${ocorrencias}x (${porcentagem}%)</li>`;
      if ((index + 1) % 3 === 0) html += `<hr>`;
    });

    html += `</ul>`;
    resultado.innerHTML = html;
    atualizarStatus("‚úÖ Trios mais comuns carregados!", "#00ffd5");

  } catch (err) {
    console.error("Erro ao buscar trios:", err);
    atualizarStatus("‚ùå Falha ao buscar trios.", "#ff6347");
    resultado.innerHTML = `
      <p style="color: red;">‚ö†Ô∏è N√£o foi poss√≠vel carregar os trios. Verifique o servidor.</p>
      <p style="color: green;">üü¢ Jogos 100% In√©ditos</p>
    `;
  }
}
 function limparTudo() {
  // üîÑ Limpa todos os inputs num√©ricos da p√°gina
  document.getElementById("infoConcurso").textContent = "";
  const inputsNumericos = document.querySelectorAll('input[type="number"]');
  inputsNumericos.forEach(input => {
    input.value = "";
    input.style.backgroundColor = "";
    input.style.color = "";
    input.style.fontWeight = "";
    input.style.fontFamily = "";
    input.classList.remove("highlight", "error");
  });

  // üîÑ Limpa todos os inputs de texto dentro da div #entrada
  const inputsTexto = document.querySelectorAll('#entrada input[type="text"]');
  inputsTexto.forEach(input => {
    input.value = "";
    input.style.backgroundColor = "";
    input.style.color = "";
    input.style.fontWeight = "";
    input.style.fontFamily = "";
    input.classList.remove("highlight", "error");
  });

  // üßπ Limpa etiquetas de n√∫meros digitados
  const labelsTopo = document.getElementById("labelsTopo");
  if (labelsTopo) labelsTopo.innerHTML = "";

  // üßπ Limpa resultado final
  const resultado = document.getElementById("resultado");
  if (resultado) resultado.innerHTML = "";

  // üßπ Limpa campo de sa√≠da
  const output = document.getElementById("output");
  if (output) output.textContent = "";

  // üßπ Limpa status
  atualizarStatus("üßπ Interface limpa com sucesso!", "#00ffd5");

  // üßπ Limpa painel de Bitcoin (se existir)
  const resultadoBitcoin = document.getElementById("resultadoBitcoin");
  if (resultadoBitcoin) resultadoBitcoin.innerHTML = "";

  // üßπ Limpa painel do √∫ltimo concurso
  const topo = document.getElementById("ultimoConcursoTopo");
  if (topo) topo.innerHTML = "";

  // üßπ Limpa vari√°veis globais
  window.jogoFixo = [];
  window.maisFrequentes = [];
  window.previstosEconometricamente = [];

  // üßπ Limpa jogos gerados
  const container = document.getElementById("jogosGerados");
  if (container) container.innerHTML = "";

  // üßπ Limpa an√°lise estat√≠stica
  const analise = document.getElementById("analiseEstatistica");
  if (analise) analise.innerHTML = "";

  // üßπ Limpa lista de concursos
  const lista = document.getElementById("listaConcursos");
  if (lista) lista.innerHTML = "";

  // üßπ Limpa barra de progresso
  const barra = document.getElementById("barraProgresso");
  if (barra) {
    barra.style.transition = "width 0.3s ease";
    barra.style.width = "0%";
  }

  // üßπ Limpa qualquer outro painel de concursos (se existir)
  const painelConcursos = document.getElementById("painelConcursos");
  if (painelConcursos) painelConcursos.innerHTML = "";

  // üßπ Limpa hist√≥rico de concursos (se armazenado localmente)
  localStorage.removeItem("ultimosConcursos");

  // üßπ Limpa tabela de concursos (se existir)
  const tabela = document.querySelector("#tabelaConcursos tbody");
  if (tabela) tabela.innerHTML = "";

  // üßπ Limpa alertas ou mensagens extras
  const alertas = document.getElementById("alertas");
  if (alertas) alertas.innerHTML = "";

  // üßπ Limpa os jogos inversos √† l√≥gica
  const jogosInversos = document.getElementById("jogosInversosContainer");
  if (jogosInversos) jogosInversos.innerHTML = "";
}
 
 
 
 function atualizarStatus(msg, cor = "#333") {
  const status = document.getElementById("statusMsg");
  if (status) {
    status.textContent = msg;
    status.style.color = cor;
  }
}

function atualizarTopo(dezenas) {
  const inputs = document.querySelectorAll('#entradaTopo input');
  dezenas.forEach((n, i) => {
    if (inputs[i]) {
      inputs[i].value = String(n).padStart(2, '0');
      inputs[i].style = `
        background-color: #f0f8ff;
        font-weight: bold;
        font-family: 'Orbitron', Arial, sans-serif;
        color: #000;
        text-align: center;
      `;
    }
  });
}
 
 
 
 
 function avaliarConjuntoPython() {
  const inputs = document.querySelectorAll('#entradaTopo input');
  const numeros = [];

  inputs.forEach(input => {
    let valor = parseInt(input.value);
    if (isNaN(valor)) {
      const limpo = input.value.replace(/\D/g, '');
      valor = parseInt(limpo);
    }
    numeros.push(Number.isInteger(valor) && valor >= 1 && valor <= 25 ? valor : null);
  });

  const conjuntoCorrigido = numeros.filter(n => n !== null);

  if (conjuntoCorrigido.length !== 15) {
    atualizarStatus(`‚ö†Ô∏è Conjunto inv√°lido: ${conjuntoCorrigido.length}/15 n√∫meros √∫nicos v√°lidos.`, "#ff9900");
    return;
  }

  atualizarTopo(conjuntoCorrigido);

  const soma_total = conjuntoCorrigido.reduce((a, b) => a + b, 0);
  const pares = conjuntoCorrigido.filter(n => n % 2 === 0).length;
  const impares = 15 - pares;

  const distribuicao = {
    linhas: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 },
    colunas: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 }
  };
  conjuntoCorrigido.forEach(n => {
    const linha = Math.ceil(n / 5);
    const coluna = n % 5 === 0 ? 5 : n % 5;
    distribuicao.linhas[linha]++;
    distribuicao.colunas[coluna]++;
  });

  const sequencias_comuns = [];
  const ordenado = [...conjuntoCorrigido].sort((a, b) => a - b);
  for (let i = 0; i < ordenado.length - 2; i++) {
    if (ordenado[i + 1] === ordenado[i] + 1 && ordenado[i + 2] === ordenado[i] + 2) {
      sequencias_comuns.push([ordenado[i], ordenado[i + 1], ordenado[i + 2]]);
    }
  }

  const sugestoes = [];
  for (let i = 0; i < 3; i++) {
    const embaralhado = [...conjuntoCorrigido].sort(() => Math.random() - 0.5);
    sugestoes.push(embaralhado);
  }

  const resultado = document.getElementById("resultadoBitcoin");
  let html = `
    <strong>üìä Avalia√ß√£o JavaScript:</strong><br>
    <ul style="list-style:none; padding-left:0;">
      <li>üßÆ Soma total: <strong>${soma_total}</strong></li>
      <li>‚öñÔ∏è Pares: <strong>${pares}</strong> | √çmpares: <strong>${impares}</strong></li>
      <li>üîç Trios comuns detectados: <strong>${sequencias_comuns.length}</strong></li>
    </ul>
  `;

  const linhas = Object.entries(distribuicao.linhas).map(([l, q]) => `L${l}: ${q}`).join(" | ");
  const colunas = Object.entries(distribuicao.colunas).map(([c, q]) => `C${c}: ${q}`).join(" | ");
  html += `<p>üß© Distribui√ß√£o:<br><strong>${linhas}</strong><br><strong>${colunas}</strong></p>`;

  if (sugestoes.length) {
    html += `<p>üé∞ Sugest√µes de jogos:</p><ul>`;
    sugestoes.forEach((jogo, i) => {
      html += `<li>Jogo ${i + 1}: <strong>${jogo.join(", ")}</strong></li>`;
    });
    html += `</ul>`;
  }

  resultado.innerHTML = html;
  atualizarStatus("‚úÖ Avalia√ß√£o conclu√≠da com sucesso!", "#00ffd5");
}

  // ‚úÖ Limpa toda a interface visual e dados
  function limparInterfaceCompleta() {
    const campos = [
      "resultadoBitcoin", "jogosGerados", "analiseEstatistica",
      "statusImportacao", "labelsTopo", "ultimoConcursoTopo", "infoUltimoConcurso",
      "tabelaTrios", "listaConcursos", "resultado", "output"
    ];
    campos.forEach(id => {
      const el = document.getElementById(id);
      if (el) el.innerHTML = "";
    });

    const concursoInput = document.getElementById("numeroConcurso");
    if (concursoInput) concursoInput.value = "";

    document.querySelectorAll("input").forEach(input => {
      input.value = "";
      input.style.backgroundColor = "";
      input.style.color = "";
      input.style.fontWeight = "";
      input.style.fontFamily = "";
    });

    window.jogoFixo = [];
    atualizarStatus("üßπ Interface limpa com sucesso!", "#00ffd5");
  }
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const botao = document.getElementById("btnSortear");
  if (botao) {
    botao.addEventListener("click", sortearComLogica);
  }
});

async function sortearComLogica() {
  try {
    const res = await fetch("lotofacil_combinacoes_convertido.json");
    const dados = await res.json();
document.getElementById("infoConcurso").textContent = "";
    const chaves = Object.keys(dados).map(k => parseInt(k)).sort((a, b) => a - b);
    const ultimaChave = chaves[chaves.length - 1].toString();
    const concursoReferencia = dados[ultimaChave];
    const jogosOrdenados = Object.entries(dados).sort((a, b) => parseInt(a[0]) - parseInt(b[0]));

    if (!Array.isArray(jogosOrdenados) || jogosOrdenados.length === 0) {
      atualizarStatus("‚ùå Nenhum jogo encontrado no JSON local.", "#ff0000");
      return;
    }

    const container = document.getElementById("jogosGerados");
    container.innerHTML = "";

    const estatisticas = {};
    for (let i = 1; i <= 25; i++) {
      estatisticas[i] = { freq: 0, freqRecente: 0, atraso: 0, simulado: 0 };
    }

    const totalJogos = jogosOrdenados.length;
    const recentes = jogosOrdenados.slice(-50);

    jogosOrdenados.forEach(([_, jogo], index) => {
      jogo.forEach(num => {
        estatisticas[num].freq++;
        estatisticas[num].atraso = totalJogos - index;
      });
    });

    recentes.forEach(([_, jogo]) => {
      jogo.forEach(num => {
        estatisticas[num].freqRecente++;
      });
    });

    const simulados = [];
    for (let s = 0; s < 1000; s++) {
      const jogoSimulado = [];
      let score = 0;

      while (jogoSimulado.length < 15) {
        const n = Math.floor(Math.random() * 25) + 1;
        const e = estatisticas[n];
        const peso = e.freq * 1.2 + e.freqRecente * 2 - e.atraso * 0.5;
        if (Math.random() < peso / 100 && !jogoSimulado.includes(n)) {
          jogoSimulado.push(n);
          estatisticas[n].simulado++;
          score += peso;
        }
      }

      simulados.push({ jogo: jogoSimulado, score });
    }

    const top9Simulados = simulados.sort((a, b) => b.score - a.score).slice(0, 9);

    top9Simulados.forEach((item, i) => {
      const grupo = document.createElement("div");
      grupo.className = "grupo-jogo";
      grupo.style.marginBottom = "12px";

      const titulo = document.createElement("div");
      titulo.textContent = `üîÆ Simulado ${i + 1} ‚Äî Score: ${item.score.toFixed(2)}`;
      titulo.style.fontWeight = "bold";
      titulo.style.marginBottom = "4px";
      titulo.style.color = "#00ffcc";
      titulo.style.textShadow = "0 0 6px #00ffd5";
      grupo.appendChild(titulo);

      item.jogo.sort((a, b) => a - b).forEach(num => {
        const span = document.createElement("span");
        span.textContent = String(num).padStart(2, '0');
        span.style.display = "inline-block";
        span.style.width = "48px";
        span.style.height = "48px";
        span.style.lineHeight = "48px";
        span.style.textAlign = "center";
        span.style.fontWeight = "bold";
        span.style.fontSize = "18px";
        span.style.borderRadius = "6px";
        span.style.marginRight = "4px";
        span.style.boxShadow = "0 0 4px #ffd700";
        span.style.backgroundColor = concursoReferencia.includes(num) ? "#ffff66" : "#202020";
        span.style.color = concursoReferencia.includes(num) ? "#000000" : "#ffffff";
        grupo.appendChild(span);
      });

      container.appendChild(grupo);
    });

    // üß† Avalia√ß√£o dos jogos reais
    let melhorJogoChave = "";
    let maiorAcerto = 0;
    let totalAcima12 = 0;
    const destaques = [];

    jogosOrdenados.forEach(([chave, jogo]) => {
      let score = 0, soma = 0, acertos = 0;
      let quadrantes = [0, 0, 0, 0];
      let seq = 1, penalidadeSeq = 0;

      const ordenado = [...jogo].sort((a, b) => a - b);
      for (let i = 1; i < ordenado.length; i++) {
        if (ordenado[i] === ordenado[i - 1] + 1) {
          seq++;
          if (seq >= 5) penalidadeSeq = 5;
        } else {
          seq = 1;
        }
      }

      jogo.forEach(n => {
        const e = estatisticas[n];
        score += e.freq * 1.2 + e.freqRecente * 2 + e.simulado * 1.5 - e.atraso * 0.5;
        soma += n;
        if (n <= 6) quadrantes[0]++;
        else if (n <= 12) quadrantes[1]++;
        else if (n <= 18) quadrantes[2]++;
        else quadrantes[3]++;
        if (concursoReferencia.includes(n)) acertos++;
      });

      const penalidadeSoma = (soma < 180 || soma > 210) ? 3 : 0;
      const penalidadeQuadrantes = quadrantes.filter(q => q < 2).length >= 2 ? 3 : 0;
      const relevancia = score - penalidadeSeq - penalidadeSoma - penalidadeQuadrantes;

      const grupo = document.createElement("div");
      grupo.className = "grupo-jogo";
      grupo.style.marginBottom = "12px";

      const titulo = document.createElement("div");
      titulo.textContent = `Jogo ${chave} ‚Äî ${acertos} acertos ‚Äî Relev√¢ncia: ${relevancia.toFixed(2)}`;
      titulo.style.fontWeight = "bold";
      titulo.style.marginBottom = "4px";
      titulo.style.color = acertos >= 12 ? "#ffeb3b" : "#ffffff";
      titulo.style.textShadow = acertos >= 12 ? "0 0 6px #ffff66" : "none";
      grupo.appendChild(titulo);

      ordenado.forEach(num => {
        const span = document.createElement("span");
        span.textContent = String(num).padStart(2, '0');
        span.style.display = "inline-block";
        span.style.width = "48px";
        span.style.height = "48px";
        span.style.lineHeight = "48px";
        span.style.textAlign = "center";
        span.style.fontWeight = "bold";
        span.style.fontSize = "18px";
        span.style.borderRadius = "6px";
        span.style.marginRight = "4px";
        span.style.boxShadow = "0 0 4px #00ffd5";
        span.style.backgroundColor = concursoReferencia.includes(num) ? "#ffff66" : "#303030";
        span.style.color = concursoReferencia.includes(num) ? "#000000" : "#ffffff";
        grupo.appendChild(span);
      });

      if (acertos > maiorAcerto) {
        maiorAcerto = acertos;
        melhorJogoChave = chave;
      }

      if (chave !== ultimaChave && acertos >= 13) {
        totalAcima12++;
        destaques.push(grupo);
      } else {
        container.appendChild(grupo);
      }
    });

    // üü® Exibe os destaques no topo
    if (destaques.length > 0) {
      const tituloDestaque = document.createElement("div");
      tituloDestaque.textContent = `üåü Esses concursos anteriores acertaram entre 12 e 15 n√∫meros do concurso ${ultimaChave}:`;
      tituloDestaque.style.fontWeight = "bold";
      tituloDestaque.style.color = "#ffeb3b";
      tituloDestaque.style.marginBottom = "12px";
      container.prepend(tituloDestaque);

      destaques.reverse().forEach(grupo => {
        container.prepend(grupo);
      });
    }

    // ‚úÖ Mensagem final
    atualizarStatus(`üîç Jogo ${melhorJogoChave} teve ${maiorAcerto} acertos com base no concurso ${ultimaChave}!`, "#00ff80");

    // üìä Resumo adicional
    const resumo = document.createElement("div");
    resumo.textContent = `üìä ${totalAcima12} concursos anteriores tiveram entre 12 e 15 acertos com rela√ß√£o ao concurso ${ultimaChave}.`;
    resumo.style.fontWeight = "bold";
    resumo.style.color = "#00bfff";
    resumo.style.marginTop = "16px";
    container.appendChild(resumo);

    } catch (erro) {
    console.error("‚ùå Erro ao acessar o arquivo JSON:", erro);
    atualizarStatus("‚ùå Falha ao acessar lotofacil_combinacoes_convertido.json. Verifique se o formato est√° correto.", "#ff6347");
  }
}

function atualizarStatus(texto, cor) {
  const status = document.getElementById("statusImportacao");
  if (status) {
    status.innerText = texto;
    status.style.color = cor;
  }
}
</script>
	
	
<script>
  async function gerarBloco() {
  for (let i = 0; i < JOGOS_POR_BLOCO; i++) {
    const jogo = gerarJogoAleatorio();
    const acertos = jogo.filter(n => window.jogoFixo.includes(n)).length;
    const frequentesNoJogo = jogo.filter(n => window.maisFrequentes.includes(n)).length;
    const previstosNoJogo = jogo.filter(n => window.previstosEconometricamente.includes(n)).length;

    const progressoTotal = blocoAtual * JOGOS_POR_BLOCO + i;
    const progressoPercentual = (progressoTotal / TOTAL_JOGOS) * 100;
    atualizarBarra(progressoPercentual);

    if (acertos >= 12 || (frequentesNoJogo >= 8 && previstosNoJogo >= 6)) {
      const div = document.createElement("div");
      div.className = "jogo-comparativo";

      const grupo = document.createElement("div");
      grupo.style.display = "flex";
      grupo.style.flexWrap = "wrap";
      grupo.style.gap = "4px";

      jogo.forEach(num => {
        const el = document.createElement("div");
        el.className = "label";
        el.textContent = num;
        if (window.jogoFixo.includes(num)) {
          el.classList.add("sorteado");
        }
        grupo.appendChild(el);
      });

      const status = await verificarRepeticaoHistorica(jogo);
      const contador = document.createElement("div");
      const origem = acertos >= 12 ? "üéØ por acertos" : "üìà por tend√™ncia";
      contador.textContent = `Acertos: ${acertos} ${origem} ${status}`;
      contador.style.marginTop = "8px";
      contador.style.fontWeight = "bold";
      div.appendChild(grupo);
      div.appendChild(contador);

      if (status.includes("üü¢")) {
        document.getElementById("jogosIneditosContainer").appendChild(div);
      } else {
        document.getElementById("jogosGerados").appendChild(div);
      }

      jogosComAcertos++;
    }
  }

  blocoAtual++;

  if (blocoAtual < BLOCOS) {
    setTimeout(() => gerarBloco(), 50);
  } else {
    pararCronometro();
    finalizarBarra();

    atualizarStatus(
      jogosComAcertos === 0
        ? "üîÅ Nenhum jogo relevante encontrado."
        : `üìä Foram encontrados ${jogosComAcertos} jogos com alto potencial!`,
      jogosComAcertos === 0 ? "#ff4500" : "#228B22"
    );
  }
}

  function sortearAleatorios(array, quantidade) {
    const embaralhado = [...array];
    for (let i = embaralhado.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [embaralhado[i], embaralhado[j]] = [embaralhado[j], embaralhado[i]];
    }
    return embaralhado.slice(0, quantidade);
  }

  function carregarCombinacoesReais() {
    atualizarStatus("‚ö†Ô∏è Fun√ß√£o 'carregarCombinacoesReais' ainda n√£o implementada.", "#ff9900");
  }

  async function prepararPromissor() {
    try {
      const response = await fetch("https://loteriascaixa-api.herokuapp.com/api/lotofacil");
      if (!response.ok) throw new Error("API indispon√≠vel");

      const concursos = await response.json();
      if (!Array.isArray(concursos) || concursos.length === 0) {
        throw new Error("Hist√≥rico vazio ou inv√°lido");
      }

      const frequencia = Array(26).fill(0);
      concursos.forEach(concurso => {
        if (Array.isArray(concurso.dezenas)) {
          concurso.dezenas.forEach(numStr => {
            const numero = parseInt(numStr, 10);
            if (!isNaN(numero) && numero >= 1 && numero <= 25) {
              frequencia[numero]++;
            }
          });
        }
      });

      const numerosComFrequencia = [];
      for (let i = 1; i <= 25; i++) {
        numerosComFrequencia.push({ numero: i, freq: frequencia[i] });
      }

      numerosComFrequencia.sort((a, b) => a.freq - b.freq);

      const menosFrequentes = numerosComFrequencia.slice(0, 18).map(n => n.numero);
      const maisFrequentes = numerosComFrequencia.slice(-7).map(n => n.numero);

      const selecionados = [
        ...sortearAleatorios(menosFrequentes, 11),
        ...sortearAleatorios(maisFrequentes, 4)
      ];

      const promissor = selecionados.sort((a, b) => a - b);

      window.jogoFixo = promissor;
      preencherInputs(promissor);
      exibirResultado(promissor);

      const inputsTopo = document.querySelectorAll('#entrada input');
      promissor.forEach((numero, index) => {
        if (inputsTopo[index]) {
          inputsTopo[index].value = String(numero).padStart(2, '0');
          inputsTopo[index].style.backgroundColor =
            maisFrequentes.includes(numero)
              ? "#ffd700"
              : menosFrequentes.includes(numero)
                ? "#87cefa"
                : "#90ee90";

          inputsTopo[index].style.fontWeight = "bold";
          inputsTopo[index].style.fontFamily = "'Orbitron', Arial, sans-serif";
          inputsTopo[index].style.color = "#000";
        }
      });

      atualizarStatus("üéØ Jogo promissor pronto!", "#00ffd5");
    } catch (error) {
      console.error("‚ùå Erro ao preparar jogo promissor:", error);
      atualizarStatus("‚ùå Erro ao gerar jogo promissor.", "#ff0000");
    }
  }
</script>

<script>
  function temSequenciaLonga(jogo) {
    const ordenado = [...jogo].sort((a, b) => a - b);
    let count = 1;
    for (let i = 1; i < ordenado.length; i++) {
      if (ordenado[i] === ordenado[i - 1] + 1) {
        count++;
        if (count >= 4) return true;
      } else {
        count = 1;
      }
    }
    return false;
  }

  function distribuicaoLinhaColuna(jogo) {
    const linhas = [[], [], [], [], []];
    const colunas = [[], [], [], [], []];
    jogo.forEach(n => {
      const linha = Math.floor((n - 1) / 5);
      const coluna = (n - 1) % 5;
      linhas[linha].push(n);
      colunas[coluna].push(n);
    });
    return {
      linhasOK: linhas.filter(l => l.length >= 2 && l.length <= 4).length >= 3,
      colunasOK: colunas.filter(c => c.length >= 2 && c.length <= 4).length >= 3
    };
  }

  function analisarJogo(jogo) {
    const molduraBase = [1, 2, 3, 4, 5, 6, 10, 15, 20, 21, 22, 23, 24, 25];
    const moldura = molduraBase.filter(() => Math.random() > 0.3);
    const numerosMoldura = jogo.filter(n => moldura.includes(n)).length;
    const pares = jogo.filter(n => n % 2 === 0).length;
    const soma = jogo.reduce((a, b) => a + b, 0);
    return { moldura: numerosMoldura, pares, soma };
  }
  
  
 // üîß Fun√ß√£o auxiliar para cache interno
function registrarConcursoNaMemoria(concursoStr, dezenasArray) {
  if (!window.concursoCache) window.concursoCache = {};
  window.concursoCache[concursoStr] = dezenasArray;
}

async function buscarConcursoEspecifico() {
  const numero = prompt("Digite o n√∫mero do concurso que deseja buscar:");
  const concursoInt = parseInt(numero);
  if (!numero || isNaN(concursoInt) || concursoInt < 1) {
    return alert("‚ö†Ô∏è N√∫mero de concurso inv√°lido.");
  }

  const concursoStr = String(concursoInt);
  const infoConcurso = document.getElementById("infoConcurso");
  const inputsTopo = document.querySelectorAll('#entradaTopo input');
  infoConcurso.textContent = "üîÑ Buscando concurso...";
  infoConcurso.style.color = "#4682b4";

  let dezenas = null;

  // üîÅ 1. Busca no JSON local atualizado
  try {
    const res = await fetch("lotofacil_combinacoes_convertido.json", { cache: "no-store" });
    const concursos = await res.json();
    if (Array.isArray(concursos[concursoStr]) && concursos[concursoStr].length === 15) {
      dezenas = concursos[concursoStr];
      console.log(`‚úÖ JSON local respondeu com o concurso ${concursoStr}`);
    }
  } catch (e) {
    console.warn("‚ùå Erro ao buscar do JSON local:", e);
  }

  // üß† 2. Fallback manual via G1 (exemplo: concurso 3528)
  if (!dezenas && concursoStr === "3528") {
    dezenas = [1, 3, 5, 6, 7, 9, 10, 16, 18, 19, 20, 22, 23, 24, 25];
    console.log("‚úÖ Concurso 3528 carregado manualmente via G1");
  }

  // üß† 3. Fallback via cache interno
  if (!dezenas && window.concursoCache && window.concursoCache[concursoStr]) {
    dezenas = window.concursoCache[concursoStr];
    console.log(`üß† Concurso ${concursoStr} recuperado do cache interno`);
  }

  // ‚ùå Se ainda n√£o encontrou
  const dezenasNumeros = Array.isArray(dezenas)
    ? dezenas.map(n => parseInt(n)).filter(n => !isNaN(n))
    : [];

  if (dezenasNumeros.length !== 15) {
    infoConcurso.textContent = "‚ùå Concurso n√£o encontrado.";
    infoConcurso.style.color = "red";
    return alert(`‚ùå Concurso ${concursoStr} n√£o encontrado ou incompleto.`);
  }

  // ‚úÖ Registra no cache interno
  registrarConcursoNaMemoria(concursoStr, dezenasNumeros);

  // ‚úÖ Preenche os inputs
  const formatadas = dezenasNumeros.map(n => String(n).padStart(2, '0'));
  formatadas.forEach((num, i) => {
    if (inputsTopo[i]) {
      inputsTopo[i].value = num;
      inputsTopo[i].style = `
        background-color: #f0f8ff;
        font-weight: bold;
        font-family: 'Orbitron', Arial, sans-serif;
        color: #000;
        text-align: center;
      `;
    }
  });

  infoConcurso.textContent = `Concurso n¬∫: ${concursoStr}`;
  infoConcurso.style.color = "#333";
  window.jogoFixo = dezenasNumeros;
  alert(`‚úÖ Concurso ${concursoStr} carregado:\n${formatadas.join(" - ")}`);
}

function logicaGanhadorBitcoin() {
  try {
    const resultado = document.getElementById("resultadoBitcoin") || document.getElementById("resultado");
    const status = document.getElementById("statusImportacao") || document.getElementById("statusMsg");
    const inputs = document.querySelectorAll("#entrada input") || document.querySelectorAll("#entradaTopo input");

    if (!resultado || !status || inputs.length === 0) return;

    resultado.innerHTML = "";
    status.innerText = "";
    inputs.forEach(input => {
      input.value = "";
      input.style.backgroundColor = "";
      input.style.color = "";
    });

    atualizarStatus("üîÑ Processando concursos...", "#4682b4");

    const concursosUnificados = {
      "concurso_2890": [3, 5, 7, 9, 10, 12, 14, 16, 18, 19, 20, 21, 23, 24, 25],
      "concurso_2889": [1, 2, 4, 6, 8, 11, 13, 15, 17, 19, 20, 22, 23, 24, 25],
      "concurso_2888": [2, 3, 5, 6, 8, 10, 12, 14, 16, 17, 18, 20, 21, 23, 25],
    };

    const todasDezenas = Object.values(concursosUnificados)
      .map(lista => lista.filter(n => n >= 1 && n <= 25))
      .filter(arr => arr.length === 15);

    if (todasDezenas.length === 0) throw new Error("Nenhum concurso v√°lido encontrado.");

    const frequencia = Array(26).fill(0);
    const trioContador = {};

    todasDezenas.forEach(dezenas => {
      dezenas.forEach(num => frequencia[num]++);
      for (let i = 0; i < dezenas.length - 2; i++) {
        const trio = dezenas.slice(i, i + 3).sort((a, b) => a - b).join("-");
        trioContador[trio] = (trioContador[trio] || 0) + 1;
      }
    });

    const ultimoJogo = todasDezenas[todasDezenas.length - 1];
    const candidatos = Array.from({ length: 25 }, (_, i) => i + 1);
    const jogosGerados = [];

    for (let j = 0; j < 9; j++) {
      let sorteioFinal = [];
      let tentativa = 0;
      let estatisticas = null;
      let temSequencia = false;
      let distrib = { linhasOK: true, colunasOK: true };
      let entropia = 0;

      do {
        sorteioFinal = [];
        tentativa++;

        while (sorteioFinal.length < 15) {
          const candidato = candidatos[Math.floor(Math.random() * candidatos.length)];
          const chance = Math.random();
          const repetidas = sorteioFinal.filter(n => ultimoJogo.includes(n)).length;
          const podeRepetir = !ultimoJogo.includes(candidato) || repetidas < 5;

          if (chance < 0.5 && !sorteioFinal.includes(candidato) && podeRepetir) {
            sorteioFinal.push(candidato);
          }
        }

        estatisticas = analisarJogo(sorteioFinal);
        temSequencia = temSequenciaLonga(sorteioFinal);
        distrib = distribuicaoLinhaColuna(sorteioFinal);

        estatisticas.mediaFreq = sorteioFinal.reduce((acc, num) => acc + frequencia[num], 0) / 15;
        estatisticas.raridadeBitcoin = sorteioFinal.filter(n => frequencia[n] <= 2).length;
        estatisticas.chanceBitcoin = estatisticas.raridadeBitcoin / 15;

        const grupos = {
          A: sorteioFinal.filter(n => n <= 5).length,
          B: sorteioFinal.filter(n => n >= 6 && n <= 10).length,
          C: sorteioFinal.filter(n => n >= 11 && n <= 15).length,
          D: sorteioFinal.filter(n => n >= 16 && n <= 20).length,
          E: sorteioFinal.filter(n => n >= 21).length,
        };

        entropia = Object.values(grupos).reduce((acc, qtd) => {
          if (qtd > 0) {
            const p = qtd / 15;
            acc -= p * Math.log2(p);
          }
          return acc;
        }, 0);
        estatisticas.entropia = entropia;

        estatisticas.pontuacao =
          estatisticas.chanceBitcoin * 100 +
          (2.3 - Math.abs(2.1 - estatisticas.entropia)) * 10 +
          (7 - Math.abs(5.5 - estatisticas.mediaFreq)) * 5 +
          (estatisticas.moldura >= 6 && estatisticas.moldura <= 9 ? 5 : 0) +
          (estatisticas.pares >= 6 && estatisticas.pares <= 9 ? 5 : 0);

      } while (
        (estatisticas.moldura < 6 || estatisticas.moldura > 9 ||
         temSequencia || !distrib.linhasOK || !distrib.colunasOK ||
         estatisticas.entropia < 1.8 || estatisticas.entropia > 2.3)
        && tentativa < 5000
      );

      jogosGerados.push({ dezenas: sorteioFinal, estatisticas, tentativa });
    }

    const melhorJogo = jogosGerados.reduce((melhor, atual) =>
      atual.estatisticas.pontuacao > melhor.estatisticas.pontuacao ? atual : melhor
    );
	
	    resultado.innerHTML += "<h3>üß† Jogos principais gerados:</h3>" + jogosGerados.map((jogo, index) => {
      const sinais = [...jogo.dezenas].sort((a, b) => a - b).map(num => {
        if (ultimoJogo.includes(num)) return `<span style="color: orange;">${num} üîÅ</span>`;
        if (frequencia[num] >= 1) return `<span style="color: green;">${num} üìà</span>`;
        return `<span style="color: blue;">${num} ‚úÖ</span>`;
      });

      const triosDoJogo = [];
      for (let i = 0; i < jogo.dezenas.length - 2; i++) {
        const trio = jogo.dezenas.slice(i, i + 3).sort((a, b) => a - b).join("-");
        if (trioContador[trio]) {
          triosDoJogo.push(`${trio} (${trioContador[trio]}x)`);
        }
      }

      return `
        <div style="margin-bottom: 20px; border: 1px solid #ccc; padding: 10px; border-radius: 8px;">
          <strong>üé≤ Jogo ${index + 1}:</strong> ${sinais.join(", ")}<br><br>
          <strong>üìä Estat√≠sticas:</strong><br>
          Moldura: ${jogo.estatisticas.moldura}<br>
          Pares: ${jogo.estatisticas.pares}<br>
          Soma: ${jogo.estatisticas.soma}<br>
          M√©dia de frequ√™ncia: ${jogo.estatisticas.mediaFreq.toFixed(2)}<br>
          Repetidos do √∫ltimo concurso: ${jogo.dezenas.filter(n => ultimoJogo.includes(n)).length}<br>
          Entropia combinat√≥ria: ${jogo.estatisticas.entropia.toFixed(2)}<br>
          Pontua√ß√£o l√≥gica: ${jogo.estatisticas.pontuacao.toFixed(2)}<br><br>
          <strong>üß† Perfil estilo Bitcoin:</strong><br>
          Dezenas raras (‚â§2 ocorr√™ncias): ${jogo.estatisticas.raridadeBitcoin}<br>
          Chance estilo Bitcoin: ${(jogo.estatisticas.chanceBitcoin * 100).toFixed(2)}%<br>
          ${jogo.estatisticas.chanceBitcoin >= 0.4 ? "<span style='color:#ffd700;'>üíé Raridade extrema ‚Äî estilo minerador solo</span><br>" : ""}
          ${jogo === melhorJogo ? "<span style='color:#00bfff; font-weight:bold;'>üîù Jogo Priorit√°rio</span><br>" : ""}
          <br>
          <strong>üì° Trios orbitais:</strong><br>
          ${triosDoJogo.slice(0, 10).join("<br>")}
        </div>
      `;
    }).join("");

    atualizarStatus(`‚úÖ Estrat√©gia Bitcoin aplicada com ${jogosGerados.length} jogos!`, "#00ffd5");

    const inspiracao = document.createElement("div");
    inspiracao.innerHTML = `
      <p style="color: #ffd700; font-style: italic; margin-top: 20px;">
        üí° Em janeiro de 2023, um minerador solo com apenas 49 TH/s encontrou sozinho o bloco 907283 do Bitcoin.
        Chance estimada: <strong>1 em 130 mil por dia</strong>. Recompensa: <strong>3,154 BTC</strong> (~R$ 2 milh√µes).
        <br><br>
        Cada jogo aqui carrega esse esp√≠rito: uma chance rara, mas real, de romper a l√≥gica e surpreender.
      </p>
    `;
    resultado.appendChild(inspiracao);

    function sortear(array, quantidade) {
      const copia = [...array];
      const resultado = [];
      while (resultado.length < quantidade && copia.length > 0) {
        const i = Math.floor(Math.random() * copia.length);
        resultado.push(copia.splice(i, 1)[0]);
      }
      return resultado;
    }

    const paresUltimo = ultimoJogo.filter(n => n % 2 === 0);
    const imparesUltimo = ultimoJogo.filter(n => n % 2 !== 0);
    const qtdTotal = 8 + Math.floor(Math.random() * 3);
    const qtdPares = Math.floor(qtdTotal / 2);
    const qtdImpares = qtdTotal - qtdPares;

    const baseSugestao = [...sortear(paresUltimo, qtdPares), ...sortear(imparesUltimo, qtdImpares)];

    const blocoSugestao = document.createElement("div");
    blocoSugestao.innerHTML = `
      <div style="margin-top: 30px; padding: 15px; border: 2px dashed #ffd700; border-radius: 10px;">
        <strong>‚ú® Sugest√£o extra baseada no √∫ltimo concurso:</strong><br>
        ${baseSugestao.sort((a, b) => a - b).map(n => `<span style="color:#ff8c00; font-weight:bold;">${String(n).padStart(2, '0')}</span>`).join(", ")}
        <br><br>
        <em>Equil√≠brio entre pares e √≠mpares mantido. Essa sugest√£o serve como base para novos jogos.</em>
      </div>
    `;
    resultado.appendChild(blocoSugestao);

    const jogosDerivados = [];
    for (let i = 0; i < 9; i++) {
      let jogo = [...baseSugestao];
      const restantes = candidatos.filter(n => !jogo.includes(n));
      while (jogo.length < 15) {
        const n = restantes[Math.floor(Math.random() * restantes.length)];
        if (!jogo.includes(n)) jogo.push(n);
      }
      jogo.sort((a, b) => a - b);
      jogosDerivados.push(jogo);
    }

    const blocoDerivados = document.createElement("div");
    blocoDerivados.innerHTML = "<h3 style='margin-top:30px;'>üß† Jogos derivados da sugest√£o:</h3>" + jogosDerivados.map((jogo, index) => {
      return `
        <div style="margin-bottom: 15px; border: 1px dashed #ccc; padding: 10px; border-radius: 8px;">
          <strong>üéØ Jogo derivado ${index + 1}:</strong> ${jogo.map(n => `<span style="color:#4682b4;">${String(n).padStart(2, '0')}</span>`).join(", ")}
        </div>
      `;
    }).join("");
    resultado.appendChild(blocoDerivados);

  } catch (erro) {
    console.error("Erro na l√≥gica Bitcoin:", erro);
    atualizarStatus("‚ùå Falha na estrat√©gia Bitcoin.", "#ff6347");
    if (resultado) {
      resultado.innerHTML = `<p style="color: red;">‚ö†Ô∏è N√£o foi poss√≠vel acessar os concursos. Verifique a conex√£o ou o arquivo local.</p>`;
    }
  }
}


	
	
   
	
	

  // ‚úÖ Cron√¥metro retr√¥ + barra sincronizada
  let cronometroInterval;
  let segundosDecorridos = 0;
  const DURACAO_ESTIMADA_SEGUNDOS = 250;

  function iniciarCronometro() {
    const cronometro = document.getElementById("cronometroRetro");
    if (!cronometro) return;

    segundosDecorridos = 0;
    cronometro.textContent = "‚è±Ô∏è 00:00";

    clearInterval(cronometroInterval);
    cronometroInterval = setInterval(() => {
      segundosDecorridos++;
      const minutos = String(Math.floor(segundosDecorridos / 60)).padStart(2, '0');
      const segundos = String(segundosDecorridos % 60).padStart(2, '0');
      cronometro.textContent = `‚è±Ô∏è ${minutos}:${segundos}`;

      const progressoPercentual = Math.min((segundosDecorridos / DURACAO_ESTIMADA_SEGUNDOS) * 100, 100);
      atualizarBarra(progressoPercentual);
    }, 1000);
  }

  function pararCronometro() {
    clearInterval(cronometroInterval);
  }

  function reiniciarBarra() {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = "0%";
      barra.style.display = "block";
    }
  }

  function atualizarBarra(progressoPercentual) {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = `${progressoPercentual}%`;
    }
  }

  function finalizarBarra() {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = "100%";
      setTimeout(() => {
        barra.style.display = "none";
      }, 1000);
    }
  }
  
  
  
  
  
  
  if (!dezenas && window.concursoCache && window.concursoCache[String(ultimaChave)]) {
  dezenas = window.concursoCache[String(ultimaChave)];
  console.log(`üß† Concurso ${ultimaChave} recuperado do cache interno`);
}
  
  
  
  
  
async function importarUltimos() {
  const infoConcurso = document.getElementById("infoConcurso");
  const inputsTopo = document.querySelectorAll('#entradaTopo input');

  infoConcurso.textContent = "üîÑ Buscando √∫ltimo concurso...";
  infoConcurso.style.color = "#4682b4";

  let ultimaChave = null;
  let dezenas = null;

  let concursos = {};

  // 1Ô∏è‚É£ Busca no JSON local gerado pelo script atualizar.mjs
  try {
    const resJson = await fetch("lotofacil_combinacoes_convertido.json", { cache: "no-store" });
    concursos = await resJson.json();
  } catch (e) {
    console.warn("‚ùå Erro ao buscar do JSON local:", e);
  }

  // 2Ô∏è‚É£ Encontra o maior n√∫mero de concurso no JSON
  const chaves = Object.keys(concursos).map(Number).sort((a, b) => b - a);
  const maiorLocal = chaves[0];

  // 3Ô∏è‚É£ Verifica se h√° concurso mais recente na API externa
  let maiorApi = maiorLocal;
  try {
    const resApi = await fetch("https://api.guidi.dev.br/loteria/lotofacil");
    const dadosApi = await resApi.json();
    if (dadosApi?.concurso && parseInt(dadosApi.concurso) > maiorLocal) {
      maiorApi = parseInt(dadosApi.concurso);
      console.log(`üÜï API indica concurso mais recente: ${maiorApi}`);
    }
  } catch (e) {
    console.warn("‚ùå Erro ao verificar √∫ltimo concurso na API externa:", e);
  }

  ultimaChave = maiorApi;

  // 4Ô∏è‚É£ Tenta buscar as dezenas do concurso mais recente
  if (concursos[String(ultimaChave)]) {
    dezenas = concursos[String(ultimaChave)];
    console.log(`‚úÖ JSON local respondeu com o concurso ${ultimaChave}`);
  } else {
    try {
      const resApi = await fetch(`https://api.guidi.dev.br/loteria/lotofacil/${ultimaChave}`);
      const dadosApi = await resApi.json();
      if (Array.isArray(dadosApi.dezenas) && dadosApi.dezenas.length === 15) {
        dezenas = dadosApi.dezenas;
        console.log(`‚úÖ API externa respondeu com o concurso ${ultimaChave}`);
      }
    } catch (e) {
      console.warn("‚ùå Erro ao buscar concurso na API externa:", e);
    }
  }

  // 5Ô∏è‚É£ Valida√ß√£o e normaliza√ß√£o
  const dezenasNumeros = Array.isArray(dezenas)
    ? dezenas.map(n => parseInt(n)).filter(n => !isNaN(n))
    : [];

  if (dezenasNumeros.length !== 15) {
    infoConcurso.textContent = "‚ùå √öltimo concurso n√£o encontrado ou incompleto.";
    infoConcurso.style.color = "red";
    return alert("‚ö†Ô∏è N√£o foi poss√≠vel carregar o √∫ltimo concurso.");
  }

  // 6Ô∏è‚É£ Preenche os inputs visuais
  const formatadas = dezenasNumeros.map(n => String(n).padStart(2, '0'));
  formatadas.forEach((num, i) => {
    if (inputsTopo[i]) {
      inputsTopo[i].value = num;
      inputsTopo[i].style = `
        background-color: #f0f8ff;
        font-weight: bold;
        font-family: 'Orbitron', Arial, sans-serif;
        color: #000;
        text-align: center;
      `;
    }
  });

  // 7Ô∏è‚É£ Atualiza visual do concurso
  infoConcurso.textContent = `Concurso n¬∫ ${ultimaChave}`;
  Object.assign(infoConcurso.style, {
    position: 'absolute',
    left: '50%',
    top: '190px',
    transform: 'translateX(-50%)',
    fontWeight: 'bold',
    color: '#333'
  });

  // 8Ô∏è‚É£ Atualiza vari√°vel global
  window.jogoFixo = dezenasNumeros;

  // 9Ô∏è‚É£ Alerta de sucesso
  alert(`‚úÖ √öltimo concurso ${ultimaChave} carregado:\n${formatadas.join(" - ")}`);
}

async function sorteioBitcoin() {
  const entradaTopo = document.querySelectorAll('#entradaTopo input');
  const resultado = document.getElementById("resultadoBitcoin");

  console.log("Lendo inputs do topo:", [...entradaTopo].map(i => i.value));

  if (!entradaTopo || entradaTopo.length !== 15 || !resultado) {
    resultado.innerHTML = "‚ö†Ô∏è Preencha 15 dezenas v√°lidas no topo antes de sortear.";
    return;
  }

  const numerosOriginais = Array.from(entradaTopo)
    .map(input => parseInt(input.value))
    .filter((val, idx, arr) => !isNaN(val) && val >= 1 && val <= 25 && arr.indexOf(val) === idx);

  if (numerosOriginais.length !== 15) {
    resultado.innerHTML = "‚ö†Ô∏è Os n√∫meros devem ser √∫nicos e entre 1 e 25.";
    return;
  }

  const universo = Array.from({ length: 25 }, (_, i) => i + 1);
  const response = await fetch("lotofacil_combinacoes_convertido.json");
  const jogosAnteriores = await response.json();

  const contagem = {};
  for (let i = 1; i <= 25; i++) contagem[i] = 0;
  Object.values(jogosAnteriores).forEach(jogo => {
    jogo.forEach(num => contagem[num]++);
  });

  const melhores13 = Object.entries(contagem)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 13)
    .map(([num]) => parseInt(num));

  const jogosComIPE = [];

  function calcularIPE(jogo, soma, pares, moldura, filtrados) {
    let pontos = 0;
    if (soma >= 180 && soma <= 210) pontos++;
    if (pares >= 6 && pares <= 9) pontos++;
    if (moldura >= 8 && moldura <= 11) pontos++;
    if (filtrados.length >= 8) pontos++;

    let seq = 1;
    for (let i = 1; i < jogo.length; i++) {
      if (jogo[i] === jogo[i - 1] + 1) {
        seq++;
        if (seq > 2) break;
      } else {
        seq = 1;
      }
    }
    if (seq <= 2) pontos++;
    return pontos;
  }

  function gerarJogoForcadoIPE5() {
    let tentativa = 0;
    while (tentativa < 1000) {
      const jogo = [];
      while (jogo.length < 15) {
        const n = Math.floor(Math.random() * 25) + 1;
        if (!jogo.includes(n)) jogo.push(n);
      }
      jogo.sort((a, b) => a - b);
      const soma = jogo.reduce((acc, n) => acc + n, 0);
      const pares = jogo.filter(n => n % 2 === 0).length;
      const moldura = jogo.filter(n => [1,2,3,4,5,6,10,11,15,16,20,21,25].includes(n)).length;
      const filtrados = jogo.filter(n => melhores13.includes(n));
      const ipe = calcularIPE(jogo, soma, pares, moldura, filtrados);
      if (ipe === 5) return { jogo, soma, pares, moldura, filtrados };
      tentativa++;
    }
    return null;
  }

  let html = `<strong>üèÜ Ganhador estilo Bitcoin:</strong><br><br>`;

  for (let j = 1; j <= 9; j++) {
    const reaproveitados = [];
    while (reaproveitados.length < 9) {
      const n = numerosOriginais[Math.floor(Math.random() * numerosOriginais.length)];
      if (!reaproveitados.includes(n)) reaproveitados.push(n);
    }

    const restantes = universo.filter(n => !reaproveitados.includes(n));
    const novos = [];
    while (novos.length < 6) {
      const n = restantes[Math.floor(Math.random() * restantes.length)];
      if (!novos.includes(n)) novos.push(n);
    }

    const jogoFinal = [...reaproveitados, ...novos].sort((a, b) => a - b);
    const soma = jogoFinal.reduce((acc, n) => acc + n, 0);
    const pares = jogoFinal.filter(n => n % 2 === 0).length;
    const moldura = jogoFinal.filter(n => [1,2,3,4,5,6,10,11,15,16,20,21,25].includes(n)).length;
    const filtrados = jogoFinal.filter(n => melhores13.includes(n));
    const ipe = calcularIPE(jogoFinal, soma, pares, moldura, filtrados);

    jogosComIPE.push({ jogo: jogoFinal, ipe, reaproveitados, novos, soma, pares, moldura, filtrados });
  }

  jogosComIPE.forEach((jogoObj, index) => {
    const cor = jogoObj.ipe === 5 ? "#00ff80" : jogoObj.ipe === 4 ? "#ffd700" : "#999";
    const bg = jogoObj.ipe === 5 ? "#003322" : jogoObj.ipe === 4 ? "#332900" : "#1a1a1a";
    const emoji = jogoObj.ipe === 5 ? "üíé" : jogoObj.ipe === 4 ? "‚≠ê" : "üé≤";

    html += `
      <div style="margin-bottom: 18px; border: 2px solid ${cor}; background-color:${bg}; padding: 10px; border-radius: 8px;">
        <strong style="color:${cor};">${emoji} Jogo ${index + 1} (IPE ${jogoObj.ipe}/5):</strong><br>
        <div style="margin: 6px 0; display: flex; flex-wrap: wrap; gap: 6px;">
          ${jogoObj.jogo.map(n => `
            <span style="
              display:inline-block;
              width:48px;
              height:48px;
              line-height:48px;
              text-align:center;
              font-weight:bold;
              font-size:18px;
              border-radius:6px;
              background-color:#202020;
              color:#fff;
              box-shadow:0 0 4px ${cor};
            ">${String(n).padStart(2, '0')}</span>
          `).join("")}
        </div>
        üîÅ Reaproveitados: ${jogoObj.reaproveitados.join(", ")}<br>
        ‚ú® Novos: ${jogoObj.novos.join(", ")}<br>
        üìä Soma: ${jogoObj.soma} | ‚öñÔ∏è Pares: ${jogoObj.pares} | √çmpares: ${15 - jogoObj.pares} | üß© Moldura: ${jogoObj.moldura}<br>
        üîç Frequentes: ${jogoObj.filtrados.join(", ")}<br>
        <strong style="color:${cor};">üåü  √çndice de Performance Estrat√©gica: ${jogoObj.ipe}/5</strong>
      </div>
    `;
  });

  if (!jogosComIPE.some(j => j.ipe === 5)) {
    const jogoExtra = gerarJogoForcadoIPE5();
    if (jogoExtra) {
      html += `
        <div style="margin-bottom: 18px; border: 2px solid #00ff80; background-color:#003322; padding: 10px; border-radius: 8px;">
          <strong style="color:#00ff80;">üíé Complemento Estrat√©gico (IPE 5/5):</strong><br>
          <div style="margin: 6px 0; display: flex; flex-wrap: wrap; gap: 6px;">
            ${jogoExtra.jogo.map(n => `
              <span style="
                display:inline-block;
                width:48px;
                height:48px;
                line-height:48px;
                text-align:center;
                font-weight:bold;
                font-size:18px;
                border-radius:6px;
                background-color:#202020;
                color:#fff;
                box-shadow:0 0 4px #00ff80;
              ">${String(n).padStart(2, '0')}</span>
            `).join("")}
          </div>
          üìä Soma: ${jogoExtra.soma} | ‚öñÔ∏è Pares: ${jogoExtra.pares} | √çmpares: ${15 - jogoExtra.pares} | üß© Moldura: ${jogoExtra.moldura}<br>
          üîç Frequentes: ${jogoExtra.filtrados.join(", ")}<br>
          <strong style="color:#00ff80;">üåü  √çndice de Performance Estrat√©gica
: 5/5</strong>
        </div>
      `;
    }
  }

  resultado.innerHTML = html;	
  
  }
				
				
				
			
				
				
 function gerarJogosPromissores() {
  const qtd = 6;

  fetch("lotofacil_combinacoes_convertido.json")
    .then(res => res.json())
    .then(historicoConcursos => {
      const container = document.getElementById("jogosGerados");
      container.innerHTML = "<h3 style='color:#00ffd5;'>üìà Estrat√©gias Otimizadas (12 a 14 pts):</h3>";

      const candidatos = [];
      const frequenciaReal = {};
      const todas = Array.from({ length: 25 }, (_, i) => i + 1);

      Object.values(historicoConcursos).forEach(dezenas => {
        dezenas.forEach(n => {
          frequenciaReal[n] = (frequenciaReal[n] || 0) + 1;
        });
      });

      const frequenciaSimulada = Array(25).fill(0);
      for (let i = 0; i < 1000; i++) {
        const sorteados = [];
        while (sorteados.length < 15) {
          const n = Math.floor(Math.random() * 25) + 1;
          if (!sorteados.includes(n)) sorteados.push(n);
        }
        sorteados.forEach(n => frequenciaSimulada[n - 1]++);
      }

      const pesoFinal = {};
      for (let i = 1; i <= 25; i++) {
        const real = frequenciaReal[i] || 0;
        const simulado = frequenciaSimulada[i - 1] || 0;
        pesoFinal[i] = (real * 0.5) + (simulado * 0.5);
      }

      for (let i = 0; i < 100; i++) {
        const jogo = [];
        while (jogo.length < 15) {
          const n = Math.floor(Math.random() * 25) + 1;
          if (!jogo.includes(n)) jogo.push(n);
        }
        jogo.sort((a, b) => a - b);

        const nota = jogo.reduce((soma, n) => soma + (pesoFinal[n] || 0), 0);

        let vezesEntre12e14 = 0;
        Object.values(historicoConcursos).forEach(concurso => {
          const acertos = jogo.filter(n => concurso.includes(n)).length;
          if (acertos >= 12 && acertos <= 14) vezesEntre12e14++;
        });

        candidatos.push({ jogo, nota, vezesEntre12e14 });
      }

      candidatos.sort((a, b) => b.vezesEntre12e14 - a.vezesEntre12e14);
      const melhores = candidatos.slice(0, qtd);

      const melhorJogo = melhores[0].jogo;
      if (typeof preencherInputs === "function") {
        preencherInputs(melhorJogo);
      }

      melhores.forEach(({ jogo, vezesEntre12e14 }, index) => {
        const bloco = document.createElement("div");
        bloco.style.marginBottom = "20px";
        bloco.style.padding = "12px";
        bloco.style.border = "1px solid #888";
        bloco.style.borderRadius = "10px";
        bloco.style.backgroundColor = "#1e1e1e";
        bloco.style.color = "#f0f0f0";

        const titulo = document.createElement("h4");
        titulo.textContent = `üé≤ Jogo ${index + 1}`;
        titulo.style.marginBottom = "10px";
        titulo.style.color = "#00ffd5";
        bloco.appendChild(titulo);

        const dezenas = document.createElement("div");
        dezenas.style.display = "flex";
        dezenas.style.flexWrap = "wrap";
        dezenas.style.gap = "8px";

        jogo.forEach(num => {
          const span = document.createElement("span");
          span.textContent = String(num).padStart(2, '0');
          span.style.padding = "6px 10px";
          span.style.borderRadius = "6px";
          span.style.backgroundColor = "#333";
          span.style.color = "#ffd700";
          span.style.fontWeight = "bold";
          span.style.fontSize = "16px";
          span.style.boxShadow = "0 0 4px rgba(255, 255, 255, 0.2)";
          dezenas.appendChild(span);
        });

        bloco.appendChild(dezenas);

        const info = document.createElement("div");
        info.textContent = `üéØ Frequ√™ncia entre 12‚Äì14 pts: ${vezesEntre12e14}`;
        info.style.marginTop = "12px";
        info.style.color = "#87cefa";
        bloco.appendChild(info);

        container.appendChild(bloco);
      });

      atualizarStatus(`${qtd} jogos com maior recorr√™ncia entre 12 e 14 pontos gerados! üß†`, "#00ffd5");
    })
    .catch(err => {
      console.error("‚ùå Erro ao carregar hist√≥rico:", err);
      atualizarStatus("‚ùå Falha ao gerar jogos promissores.", "#ff0000");
    });
}
  // ‚úÖ Registro global de fun√ß√µes
  document.addEventListener("DOMContentLoaded", () => {
    window.sortearComLogica = sortearComLogica;
    window.gerarJogosPromissores = gerarJogosPromissores;
    window.importarUltimos = importarUltimos;
    window.verTriosMaisComuns = verTriosMaisComuns;
    window.avaliarConjuntoPython = avaliarConjuntoPython;
    window.gerarSugestao = gerarSugestao;
	window.jogoFixo
	
    window.sortearComFrequencia = sortearComFrequencia;
	
    window.prepararPromissor = prepararPromissor;
    window.logicaGanhadorBitcoin = logicaGanhadorBitcoin;
    window.buscarConcursoEspecifico = buscarConcursoEspecifico;

    // Fun√ß√µes auxiliares
    window.limparInterfaceCompleta = limparInterfaceCompleta;
    window.limparJogoFixo = limparJogoFixo;
    window.carregarCombinacoesReais = carregarCombinacoesReais;
    window.atualizarConcursos = atualizarConcursos;
    window.exibirResultado = exibirResultado;
    window.preencherInputs = preencherInputs;
    window.atualizarStatus = atualizarStatus;
    window.atualizarTopo = atualizarTopo;

    // Cron√¥metro e barra
    window.iniciarCronometro = iniciarCronometro;
    window.pararCronometro = pararCronometro;
    window.reiniciarBarra = reiniciarBarra;
    window.atualizarBarra = atualizarBarra;
    window.finalizarBarra = finalizarBarra;
	window.sortearComFrequencia = sortearComFrequencia;

    // ‚úÖ Inicializa√ß√µes seguras
    //atualizarConcursos(); // mant√©m apenas o que √© necess√°rio
  });

</script>

</body>

</html>














